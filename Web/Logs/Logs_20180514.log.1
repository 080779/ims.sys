2018-05-14 11:14:09,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:14:09 +08:00

2018-05-14 11:14:09,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-14 11:14:09,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:09,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:14:09 +08:00

2018-05-14 11:14:09,160 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 15

2018-05-14 11:14:09,160 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:09,160 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:09 +08:00

2018-05-14 11:14:09,332 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:14:09 +08:00

2018-05-14 11:14:10,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-14 11:14:10,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-14 11:14:10,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,442 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 7 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 11:14:10,442 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,442 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,442 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,442 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-14 11:14:10,442 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,442 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,442 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 11:14:10,442 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,442 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,645 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,785 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:14:10,785 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,785 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:14:10,785 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,817 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-14 11:14:10,817 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,879 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,895 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:14:10,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:14:10,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:14:10,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,973 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:10,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:10 +08:00

2018-05-14 11:14:11,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,020 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-14 11:14:11,020 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,020 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:14:11,020 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,020 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:14:11,020 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,020 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,020 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,035 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-14 11:14:11,035 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,035 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,035 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:14:11,035 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,035 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,051 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,067 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:14:11,067 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,067 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:14:11,067 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:14:11,067 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:14:11,067 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,067 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:14:11,067 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,067 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,067 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,082 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:14:11,082 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,082 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:14:11,082 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:14:11,082 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:14:11,082 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,082 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:14:11,082 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,082 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,082 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,114 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:14:11,114 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,114 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:14:11,114 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,114 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:14:11,114 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,129 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,129 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,145 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,160 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,160 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:14:11,160 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,160 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:14:11 +08:00

2018-05-14 11:14:11,160 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:14:11,160 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:14:11,160 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:14:11 +08:00

2018-05-14 11:15:39,712 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,712 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:15:39,712 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,712 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:15:39,712 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,713 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,713 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,713 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,713 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,714 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:39,714 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,714 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:39,714 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,714 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,714 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,714 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,715 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,715 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 11:15:39,715 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,715 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,716 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,716 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,716 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,716 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,716 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 11:15:39,716 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,716 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,716 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,716 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,717 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,717 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,717 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-14 11:15:39,717 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,717 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:39,717 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,718 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,718 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,718 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,718 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,718 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-14 11:15:39,718 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,718 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,719 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,719 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,719 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,719 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,720 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:39,720 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,720 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:39,720 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:39,720 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:39,720 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,720 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,720 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,720 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,721 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,721 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:39,721 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,721 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:39,721 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:39,721 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:39,721 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,722 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,722 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,722 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,722 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,724 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:15:39,724 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,724 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:39,724 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,725 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,725 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,725 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,725 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,725 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:39,725 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,725 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:39,725 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,725 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:39,726 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,727 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,727 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,727 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,727 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,727 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:15:39,727 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,728 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:39,728 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:39,728 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:39,728 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:39 +08:00

2018-05-14 11:15:42,357 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,358 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:15:42,358 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,358 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:15:42,358 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,358 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,358 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,359 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,359 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,359 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:42,359 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,359 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:42,359 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,359 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,359 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,359 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,360 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,360 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 11:15:42,360 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,360 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,360 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,360 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,361 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,361 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,361 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 11:15:42,361 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,361 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,361 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,361 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,361 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,361 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,362 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-14 11:15:42,362 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,362 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:42,362 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,362 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,362 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,394 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,395 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,395 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-14 11:15:42,395 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,395 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,396 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,396 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,396 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:42,396 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,396 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:42,396 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:42,396 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:42,396 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,397 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,397 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,397 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,397 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,397 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:42,397 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,397 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:42,397 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:42,397 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:42,397 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,398 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:15:42,398 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:42,398 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,398 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:42,398 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:42,398 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:42,398 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:42 +08:00

2018-05-14 11:15:43,337 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,337 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:15:43,337 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,337 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:15:43,337 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,337 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,338 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,338 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:43,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:43,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,339 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,339 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 11:15:43,339 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,339 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,339 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,340 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,340 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,340 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,340 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 11:15:43,340 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,340 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,340 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,340 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,340 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,341 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,341 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-14 11:15:43,341 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,341 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:43,341 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,341 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,341 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,341 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,342 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,342 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-14 11:15:43,342 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,342 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,342 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,342 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,342 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,342 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,343 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:43,343 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,343 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:43,343 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:43,343 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:43,343 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,343 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,343 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,343 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,343 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:43,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:43,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:43,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:43,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,344 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,344 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,344 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,345 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,345 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:15:43,345 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,345 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:43,345 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,345 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,345 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:43,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,348 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,348 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:15:43,348 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,348 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:43,348 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:43,348 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:43,348 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:43 +08:00

2018-05-14 11:15:44,161 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,161 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:15:44,161 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,161 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:15:44,161 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,162 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,162 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,162 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,162 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,162 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:44,162 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,162 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:44,162 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,163 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,163 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,163 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,163 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,163 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 11:15:44,163 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,163 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 11:15:44,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,165 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,165 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,165 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,165 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,165 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-14 11:15:44,165 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,165 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:44,165 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,166 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,166 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,166 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,166 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,166 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-14 11:15:44,166 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,166 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:44,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:44,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:44,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:44,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,168 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,168 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,168 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,168 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,169 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:44,169 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,169 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:44,169 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:44,169 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:44,169 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,169 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,169 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,169 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,169 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,171 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:15:44,171 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,171 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:44,171 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,172 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,172 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,172 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,172 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,172 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:44,172 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,172 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:44,172 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,172 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,172 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:44,173 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,174 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,174 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,174 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,174 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,174 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:15:44,174 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,174 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:44,175 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:44,175 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:44,175 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:44 +08:00

2018-05-14 11:15:45,151 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,151 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:15:45,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:15:45,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,152 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,152 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,152 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,152 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,152 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:45,153 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,153 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:45,153 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,153 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,153 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,153 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,153 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,154 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 11:15:45,154 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,154 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,154 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,154 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,154 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,154 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,154 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 11:15:45,154 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,154 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,155 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,155 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,155 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,155 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,155 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-14 11:15:45,155 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,155 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:45,155 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,156 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,156 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,156 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,156 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,156 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-14 11:15:45,156 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,156 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,156 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,157 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,157 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:45,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:45,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:45,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:45,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,158 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,158 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,158 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,158 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,159 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:45,159 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,159 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:45,159 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:45,159 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:45,159 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,159 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,159 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,159 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,159 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,161 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:15:45,161 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,161 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:45,161 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,162 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,162 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,162 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,162 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,162 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:45,162 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,162 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-14 11:15:45,162 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,163 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,164 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,164 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:15:45,164 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,164 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:45,164 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:45,164 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:45,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:45 +08:00

2018-05-14 11:15:47,069 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,069 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:15:47,069 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,069 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:15:47,069 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,070 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,070 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,070 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,070 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,070 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:47,070 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,070 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,070 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,071 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,071 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,071 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,071 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,071 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 11:15:47,071 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,072 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,072 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,072 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,072 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,072 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,072 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 11:15:47,072 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,072 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,073 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,073 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,073 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,073 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,073 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-14 11:15:47,073 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,073 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:47,073 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,074 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,074 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,074 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,074 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,074 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-14 11:15:47,074 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,074 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,074 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,074 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,075 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,075 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,075 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:47,075 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,075 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:47,075 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,075 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,075 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,076 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,076 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,076 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,076 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,076 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:47,076 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,076 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:47,076 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,076 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,076 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,077 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,077 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,077 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,077 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,077 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:15:47,077 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,077 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:47,078 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,078 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,078 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,078 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,078 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,078 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:47,078 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,078 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,078 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,079 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,080 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,080 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:47,080 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,080 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,080 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,080 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,080 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,080 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,080 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,081 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:15:47,081 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,081 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,081 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,081 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,081 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,830 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,830 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:15:47,830 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,830 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:15:47,830 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,833 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:15:47,833 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,833 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,833 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,833 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:47,833 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,833 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,833 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,834 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,834 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,834 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,834 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,834 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 11:15:47,834 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,834 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,835 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,835 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,835 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,835 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,835 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 11:15:47,835 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,835 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,835 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,835 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,836 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,836 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,836 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-14 11:15:47,836 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,836 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:47,836 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,836 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,836 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,837 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,837 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,837 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-14 11:15:47,837 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,837 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,837 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,837 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,838 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,838 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,838 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:47,838 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,838 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:47,838 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,838 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,838 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,839 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,839 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,839 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,839 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,839 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:47,839 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,839 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:47,839 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,839 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,839 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,840 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,840 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,840 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,840 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,840 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:15:47,840 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,840 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:47,840 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,841 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,841 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,841 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,841 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,841 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:47,841 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,841 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,841 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,842 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,843 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:47,843 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,843 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:47,843 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,843 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,843 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,843 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,843 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,843 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:15:47,844 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,844 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:47,844 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:47,844 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:47,844 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:47 +08:00

2018-05-14 11:15:48,418 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,419 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:15:48,419 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,419 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:15:48,419 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,419 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,419 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,419 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,419 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,420 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:48,420 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,420 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,420 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,420 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,420 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,420 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,420 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,421 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 11:15:48,421 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,421 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,421 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,421 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,421 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,421 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,421 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 11:15:48,421 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,421 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,422 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,422 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,422 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,422 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,422 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-14 11:15:48,422 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,422 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:48,422 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,423 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,423 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,423 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,423 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,423 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-14 11:15:48,423 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,423 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,423 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,423 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,424 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,424 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,424 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:48,424 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,424 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:48,424 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,424 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,424 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,425 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,425 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,425 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,425 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,425 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:48,425 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,425 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:48,425 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,425 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,425 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:15:48,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:48,426 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:48,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,428 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,429 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,429 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,429 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,429 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,429 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:15:48,429 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,429 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,430 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,430 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,430 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,946 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,946 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:15:48,946 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,947 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:15:48,947 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,947 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,947 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,947 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,947 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,948 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:48,948 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,948 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,948 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,948 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,948 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,948 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,949 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,949 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 11:15:48,949 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,949 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,949 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,949 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,949 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,949 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,950 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 11:15:48,950 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,950 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,950 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,950 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,950 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,950 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,950 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-14 11:15:48,950 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,951 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:48,951 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,951 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,951 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,951 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,951 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,952 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-14 11:15:48,952 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,952 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,952 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,952 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,952 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,952 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,953 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:48,953 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,953 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:48,953 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,953 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,953 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,953 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,953 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,953 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,953 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,954 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:15:48,954 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,954 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:48,954 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,954 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,954 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,954 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,954 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,954 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,954 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:15:48,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-14 11:15:48,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,955 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,955 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,955 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:15:48,956 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,957 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,957 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,957 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,957 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,957 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:15:48,957 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,957 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:15:48 +08:00

2018-05-14 11:15:48,958 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:15:48,958 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:15:48,958 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:15:48 +08:00

2018-05-14 11:16:21,176 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,176 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:16:21,176 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,176 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:16:21,177 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,177 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:21,177 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:21,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:21,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,196 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,197 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:21,197 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,197 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,199 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:16:21,199 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,199 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,199 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,200 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:21,200 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,200 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,212 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-14 11:16:21,212 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,212 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,212 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,213 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:21,213 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,213 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,213 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:21,213 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,213 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,213 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,213 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:21,213 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,213 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,214 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:21,214 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,214 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,214 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,225 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:16:21,225 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,225 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,225 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,225 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,230 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 11:16:21,230 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,230 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,232 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,249 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:21,249 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,249 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,249 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,249 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,249 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,282 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 33 ms with result: SqlDataReader

2018-05-14 11:16:21,282 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,283 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,287 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,288 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:21,288 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,288 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,288 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,288 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,288 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,293 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-14 11:16:21,293 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,294 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,294 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,296 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:16:21,296 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,296 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,296 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,296 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,302 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-14 11:16:21,302 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,302 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,302 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:21,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:21,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:21,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:21,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,305 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,305 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,305 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:16:21,306 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,306 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:21,306 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:21,306 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:21,306 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:21 +08:00

2018-05-14 11:16:26,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:16:26,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:16:26,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:26,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:26,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,838 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,838 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,838 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:26,838 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,838 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,838 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,838 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,838 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,838 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,839 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,840 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:16:26,840 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,840 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,840 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,840 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,840 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,840 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,840 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:26,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:26,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,843 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:16:26,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,848 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:16:26,848 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:26,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:16:26,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:26,852 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:26,852 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:26,852 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:26 +08:00

2018-05-14 11:16:28,443 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,443 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:16:28,443 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,443 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:16:28,443 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:28,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,445 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,445 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,445 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:28,445 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,445 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,445 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,446 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,446 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,446 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,446 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:28,446 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,446 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,446 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,446 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,446 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,447 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,447 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:28,447 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,447 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,447 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,447 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,447 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,447 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,447 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:28,448 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,448 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,448 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,448 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,448 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,448 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,448 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:16:28,448 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,448 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,448 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,449 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,449 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,449 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,449 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,449 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,450 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:28,450 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,450 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,450 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,450 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,450 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,450 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,450 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,450 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,450 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,451 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:28,451 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,451 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,451 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,451 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,451 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,451 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,451 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,451 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,451 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,453 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:16:28,453 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,453 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,453 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,453 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,456 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:16:28,456 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,456 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:28,457 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,458 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,459 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,459 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,459 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:16:28,459 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,459 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:28,459 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:28,460 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:28,460 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:28 +08:00

2018-05-14 11:16:30,597 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,598 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:16:30,598 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,598 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:16:30,598 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,598 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,598 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:30,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,600 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,600 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:30,600 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,600 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,600 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,600 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,600 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,601 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,601 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:30,601 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,601 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,601 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,601 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,601 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,601 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:30,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:30,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,603 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,603 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,603 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,603 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,603 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:16:30,603 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,603 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,603 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,603 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,604 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,604 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,604 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,604 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,604 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:30,604 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,604 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,604 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,604 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,604 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,605 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,605 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,605 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,605 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,605 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:30,605 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,605 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,605 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,605 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,605 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,606 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,606 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,606 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,606 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,606 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:16:30,606 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,606 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,606 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,606 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,607 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,607 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,607 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,607 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,607 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:30,607 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,607 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,607 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:30,608 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,609 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,609 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,609 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,609 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,609 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:16:30,609 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,609 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:30,610 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:30,610 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:30,610 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:30 +08:00

2018-05-14 11:16:34,324 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,325 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:16:34,325 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,325 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:16:34,325 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,325 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,325 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,326 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,326 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,326 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:34,326 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,326 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,326 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,326 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,326 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,327 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,327 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,327 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:34,327 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,327 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,328 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,328 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,328 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,328 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,328 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:34,328 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,328 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,328 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,328 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,328 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:34,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:34,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,330 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,330 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,330 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,330 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,330 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,330 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:16:34,330 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,330 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,330 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,330 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,331 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,331 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,331 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,332 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,332 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:34,332 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,332 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,332 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,332 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,332 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,332 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,332 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,333 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,333 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,333 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:34,333 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,333 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,333 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,333 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,333 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,333 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,333 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:16:34,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,335 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,335 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,335 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,335 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,335 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:34,335 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,335 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,335 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,335 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,335 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,336 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,337 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,337 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,337 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,337 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:16:34,337 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,337 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:34,338 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:34,338 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:34,338 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:34 +08:00

2018-05-14 11:16:36,531 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,531 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:16:36,531 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,531 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:16:36,531 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,532 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,533 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,533 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:36,533 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,533 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,533 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,533 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,534 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,534 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,534 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:36,534 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,534 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,534 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,534 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,534 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,534 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,534 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,535 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,536 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:16:36,536 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,536 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,536 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,536 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,536 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,536 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,536 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,537 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,537 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:36,537 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,537 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,537 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,537 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,537 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,537 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,537 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,537 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,538 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,538 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:36,538 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,538 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,538 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,538 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,538 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,538 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,538 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,539 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,539 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,539 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:16:36,539 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,539 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,539 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,539 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,540 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,542 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,542 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,542 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:16:36,542 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,542 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:36,543 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:36,543 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:36,543 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:36 +08:00

2018-05-14 11:16:40,250 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,250 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:16:40,250 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,250 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:16:40,250 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,250 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:40,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,252 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,252 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:40,252 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,252 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,252 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,252 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,253 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,253 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,253 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:40,253 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,253 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,253 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,253 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,253 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,253 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,254 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:16:40,254 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,254 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,254 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,254 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,254 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,254 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,254 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:16:40,255 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,255 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,255 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,255 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,255 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,255 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,255 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:16:40,255 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,255 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,255 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,256 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,256 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,256 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,256 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,256 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,257 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:40,257 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,257 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,257 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,257 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,257 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,257 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,257 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,257 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,257 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,258 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:16:40,258 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,258 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,258 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,258 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,258 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,258 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,258 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,258 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,258 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,259 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:16:40,259 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,259 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,259 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,259 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,259 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,259 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,259 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,260 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,261 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,262 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,262 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:16:40,262 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,262 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:16:40 +08:00

2018-05-14 11:16:40,262 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:16:40,262 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:16:40,262 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:16:40 +08:00

2018-05-14 11:17:04,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:17:04,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:17:04,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,626 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,626 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,626 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,626 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,626 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:04,626 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,626 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,626 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,627 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,627 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,627 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,627 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,627 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:04,627 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,627 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:04,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:04,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:04,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,631 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:17:04,631 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,631 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,631 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,631 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,631 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,631 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:04,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,633 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,633 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,633 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,633 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,633 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:04,633 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,633 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,633 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,633 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,633 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:17:04,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:04,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:04,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:04,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:17:04,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:04,638 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:04,638 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:04,638 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:04 +08:00

2018-05-14 11:17:07,386 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,386 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:17:07,386 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,386 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:17:07,386 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,387 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,387 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,387 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,387 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,387 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:07,387 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:07,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:07,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,390 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,390 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,390 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,390 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,390 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:07,391 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,391 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,391 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,391 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,391 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,391 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,391 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:07,391 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,391 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,391 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,392 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,392 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,392 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,392 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:17:07,392 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,392 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,392 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,392 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,392 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,392 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,393 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,393 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,393 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:07,393 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,393 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,393 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,393 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,393 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,394 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,394 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,394 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,394 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,395 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:07,395 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,395 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,395 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,395 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,395 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,395 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,395 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,395 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,396 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,396 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:17:07,396 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,396 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,396 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,396 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,399 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:17:07,399 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,399 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,399 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,399 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:07,399 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,399 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,399 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,400 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,400 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,400 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,400 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,400 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:07,400 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,400 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,400 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,400 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,401 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,401 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,401 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,401 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:07,401 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,401 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:07,401 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,401 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,401 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,401 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,402 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,402 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:17:07,402 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,402 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:07,402 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:07,402 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:07,403 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:07 +08:00

2018-05-14 11:17:09,085 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:17:09,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:17:09,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,086 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,086 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:09,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,088 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,088 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:09,088 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,088 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,088 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,088 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,088 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,088 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,089 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:09,089 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,089 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,089 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,089 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,089 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,089 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,089 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:09,089 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,089 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,090 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,090 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,090 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,090 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,090 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:09,090 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,090 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,090 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,090 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,090 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,091 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,091 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:17:09,091 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,091 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,091 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,091 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,091 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,092 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,092 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,092 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,092 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:09,092 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,092 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,092 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,092 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,092 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,093 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,093 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,093 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,093 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,093 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:09,093 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,093 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,093 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,093 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,093 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:17:09,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:09,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:09,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,097 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:09,097 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,097 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,097 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,097 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:17:09,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:09,098 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:09,098 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:09,098 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:09 +08:00

2018-05-14 11:17:10,301 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,301 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:17:10,301 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,301 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:17:10,301 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,302 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,302 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,302 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,302 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,302 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:10,302 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,302 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,302 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,303 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,303 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,303 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,303 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,303 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:10,303 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,303 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,304 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,304 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,304 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,304 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,304 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:10,304 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,304 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,304 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,305 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,305 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,305 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,305 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:10,305 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,305 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,305 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,305 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,305 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,305 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:10,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:17:10,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,307 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,307 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,307 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,307 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,307 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,307 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,307 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,307 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:10,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,308 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,308 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,308 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,308 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,309 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:10,309 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,309 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,309 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,309 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,309 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,309 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,309 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,309 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,309 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,310 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:17:10,310 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,310 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,310 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,310 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,310 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,310 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,310 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,311 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,312 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,313 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,313 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:17:10,313 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,313 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,313 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,313 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,313 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,959 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,960 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:17:10,960 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,960 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:17:10,960 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,964 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 11:17:10,964 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,965 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,965 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,965 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:10,965 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,965 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,965 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,965 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,965 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,965 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,966 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,966 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:10,966 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,966 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,966 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,966 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,967 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,967 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,967 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:10,967 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,967 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,967 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,967 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,967 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,967 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,968 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:10,968 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,968 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,968 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,968 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,968 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,968 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,968 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:10,968 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,968 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,969 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,969 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,969 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,969 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,969 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:17:10,969 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,969 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,969 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,969 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:10,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,971 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,971 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,971 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,971 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,971 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:10,971 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,971 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,971 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,971 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,971 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,972 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,972 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,972 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,972 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,972 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:17:10,972 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,973 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,973 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,973 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,973 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,973 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,974 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,974 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,974 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:10,974 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,974 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,974 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,974 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,974 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,974 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,974 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,975 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,976 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,976 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,976 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:17:10,976 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,976 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:10,977 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:10,977 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:10,977 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:10 +08:00

2018-05-14 11:17:11,561 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:17:11,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:17:11,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,563 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,563 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,563 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:11,563 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,563 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,563 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,564 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,564 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,564 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,564 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,565 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:11,565 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,565 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,565 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,565 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,565 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,565 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,565 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:11,565 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,565 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,566 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,566 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,566 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,566 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,566 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:11,566 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,566 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,566 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,566 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,566 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,567 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,568 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,568 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,568 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,568 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,569 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:11,569 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,569 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,569 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,569 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,569 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,569 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,569 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,569 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,569 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,570 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:11,570 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,570 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,570 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,570 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,570 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,570 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,570 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,570 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,571 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,571 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:17:11,571 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,571 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,571 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,571 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,572 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,572 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,572 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,572 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,572 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:11,572 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,572 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,572 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,572 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,572 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:11,573 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,574 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,574 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,574 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,574 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,574 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:17:11,574 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,574 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:11,575 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:11,575 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:11,575 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:11 +08:00

2018-05-14 11:17:12,177 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,177 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:17:12,177 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,177 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:17:12,177 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:12,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,178 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,179 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,179 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,179 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:12,179 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,179 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,179 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,179 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,180 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,180 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,180 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:12,180 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,180 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,180 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,180 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,180 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,181 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,182 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,182 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,182 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,182 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,182 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:17:12,182 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,182 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,182 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,182 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,184 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:12,184 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,184 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,184 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,184 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,184 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,184 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,184 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,184 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,184 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,185 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:12,185 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,185 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,185 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,185 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,185 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,185 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,185 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,185 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,185 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,186 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:17:12,186 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,186 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,186 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,186 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,186 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,186 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,186 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,186 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,187 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,188 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,188 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,188 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:12,188 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,188 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,188 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,188 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,188 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,188 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,189 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,189 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:17:12,189 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,189 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,189 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,189 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,189 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,877 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,877 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:17:12,877 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,877 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:17:12,877 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,877 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,877 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,878 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,878 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,878 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:12,878 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,878 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,878 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,878 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,878 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,878 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,879 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,879 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:12,879 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,879 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,879 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,879 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,879 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,880 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,881 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,881 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,881 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,881 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,882 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:12,882 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,882 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,882 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,882 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,882 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,882 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,882 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:17:12,882 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,883 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,883 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,883 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,883 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,883 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,883 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,883 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,884 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:12,884 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,884 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,884 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,884 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,884 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,884 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,884 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,884 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,884 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,885 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:12,885 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,885 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,885 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,885 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,885 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,885 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,885 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,885 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,885 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,886 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:17:12,886 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,886 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,886 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,886 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,886 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,886 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,886 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,887 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,889 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,889 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:17:12,889 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,889 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:12,889 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:12,889 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:12,889 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:12 +08:00

2018-05-14 11:17:14,381 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,381 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:17:14,381 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,382 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:17:14,382 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:14,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,384 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,384 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,384 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:14,384 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,384 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,385 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,385 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,385 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,385 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,385 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:14,385 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,385 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,385 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,385 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,385 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,386 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,386 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:14,386 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,386 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,386 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,386 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,386 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,386 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,386 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,387 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:14,388 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,389 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,389 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,389 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,389 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,389 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,390 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:14,390 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,390 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,390 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,390 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,390 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:17:14,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,391 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,391 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,391 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,392 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,393 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,394 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,394 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:17:14,394 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,394 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:14,394 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:14,394 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:14,394 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:14 +08:00

2018-05-14 11:17:15,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:17:15,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:17:15,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:15,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,094 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,095 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,095 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,095 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:15,095 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,095 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,096 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,096 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,096 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,096 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,096 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:15,096 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,096 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,096 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,096 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,096 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,097 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,097 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:17:15,097 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,097 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,097 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,097 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,097 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,098 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,098 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:17:15,098 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,098 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,098 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,098 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,098 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,098 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,099 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:17:15,099 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,099 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,099 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,099 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,099 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,099 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,099 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,099 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,100 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:15,100 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,100 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,100 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,100 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,100 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,100 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,100 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,100 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,100 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,101 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:17:15,101 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,101 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,101 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,101 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,101 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,101 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,101 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,101 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,101 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,102 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:17:15,102 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,102 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,102 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,102 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,102 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,102 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,102 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,105 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,105 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:17:15,105 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,105 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:17:15 +08:00

2018-05-14 11:17:15,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:17:15,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:17:15,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:17:15 +08:00

2018-05-14 11:19:27,578 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:27 +08:00

2018-05-14 11:19:27,593 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-14 11:19:27,593 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:27,593 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:27 +08:00

2018-05-14 11:19:27,593 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 15

2018-05-14 11:19:27,593 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:27,593 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:27 +08:00

2018-05-14 11:19:27,687 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:27 +08:00

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:28 +08:00

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:28 +08:00

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:28 +08:00

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:28 +08:00

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:28,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:28 +08:00

2018-05-14 11:19:28,718 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:28 +08:00

2018-05-14 11:19:28,859 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:19:28,859 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:28,859 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:19:28,859 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:28 +08:00

2018-05-14 11:19:28,875 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-14 11:19:28,875 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:28,937 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:28 +08:00

2018-05-14 11:19:28,953 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:28 +08:00

2018-05-14 11:19:28,984 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:28,984 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:28,984 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:19:28,984 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:28 +08:00

2018-05-14 11:19:28,984 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:28,984 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,015 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,031 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,047 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:19:29,047 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,047 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,062 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-14 11:19:29,062 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,062 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,062 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,062 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:19:29,062 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,062 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,078 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-14 11:19:29,078 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,078 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,078 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,109 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:29,109 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,109 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,109 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,109 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,125 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-14 11:19:29,125 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,125 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,140 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,156 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:29,156 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,156 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,156 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,156 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,156 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-14 11:19:29,156 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,156 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,172 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,172 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:29,172 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,172 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,172 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,172 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,172 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:19:29,172 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,172 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,172 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,250 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:19:29,250 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,250 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,250 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,250 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,250 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-14 11:19:29,250 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,285 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,287 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:29,287 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,287 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,287 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,312 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 24 ms with result: SqlDataReader

2018-05-14 11:19:29,312 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,312 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,312 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,312 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:29,312 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,312 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,312 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,312 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-14 11:19:29,312 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,328 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,328 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,328 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:29,328 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,328 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:29,328 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,343 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-14 11:19:29,343 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,359 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,359 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,359 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:19:29,359 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,359 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:29,359 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:19:29,359 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:29,359 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:29 +08:00

2018-05-14 11:19:33,054 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,055 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:19:33,055 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,055 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:19:33,055 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:33,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,057 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,057 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,057 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,057 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,057 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,058 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,058 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:19:33,058 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,058 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,058 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,058 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,058 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,058 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,059 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:19:33,059 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,059 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,059 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,059 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,059 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,059 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,060 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:33,060 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,060 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,060 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,060 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,060 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,060 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,060 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,060 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,061 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:33,061 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,061 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,061 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,061 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,061 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,061 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,061 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,061 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,062 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:33,062 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,062 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,062 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,062 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,062 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,062 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,062 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,065 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:19:33,065 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,065 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,065 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,065 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 11:19:33,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:33,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:33,072 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,073 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,073 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,073 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,073 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,074 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:19:33,074 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,074 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:33,074 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:33,074 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:33,075 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:33 +08:00

2018-05-14 11:19:34,167 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,167 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:19:34,167 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,167 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:19:34,167 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,168 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,168 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,168 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,168 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,168 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:34,168 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,168 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,168 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,168 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,169 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,169 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,169 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,169 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:19:34,169 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,169 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:19:34,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,171 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,171 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:34,171 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,171 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,171 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,171 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,172 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,172 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,172 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,172 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,172 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:34,172 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,172 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,172 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,172 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,173 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,173 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,173 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,173 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,173 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:34,173 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,173 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,173 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,173 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,174 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,174 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,174 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,174 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,176 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:19:34,176 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,176 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,176 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,176 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,180 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 11:19:34,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:34,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,182 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,182 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,182 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,182 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,182 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:34,182 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,182 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,182 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,182 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,182 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,183 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,183 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,183 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:34,183 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,183 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:34,183 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,183 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,183 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,183 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,184 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,184 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:19:34,184 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,184 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:34,184 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:34,184 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:34,184 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:34 +08:00

2018-05-14 11:19:35,278 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,278 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:19:35,278 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,278 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:19:35,278 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,279 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,279 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,279 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,279 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,279 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:35,279 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,279 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,279 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,280 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,280 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,280 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,281 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,281 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:19:35,281 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,281 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,281 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,281 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,281 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,281 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,282 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:19:35,282 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,282 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,282 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,282 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,282 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,282 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:35,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,284 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:35,284 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,284 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,284 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,284 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,284 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,284 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,284 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,284 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,285 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:35,285 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,285 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,285 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,285 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,285 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,285 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,285 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,286 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,287 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:19:35,287 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,287 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,287 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,287 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,291 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:19:35,291 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,291 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,291 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,291 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:35,291 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,291 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,291 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,292 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,292 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,292 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,292 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,292 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:35,292 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,292 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,292 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,292 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,292 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:35,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,294 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,294 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,294 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,294 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,294 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:19:35,295 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,295 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:35,295 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:35,295 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:35,295 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:35 +08:00

2018-05-14 11:19:36,184 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,184 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:19:36,184 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,184 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:19:36,184 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,185 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,185 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,185 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,185 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,185 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:36,185 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,185 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,185 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,186 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,186 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,186 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,186 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,186 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:19:36,186 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,186 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,187 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,187 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,187 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,187 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,187 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:19:36,187 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,187 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,187 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,187 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,187 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,188 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,188 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:36,188 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,188 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,188 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,188 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,188 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,188 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,189 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,189 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,189 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:36,189 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,189 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,189 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,189 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,189 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,189 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,190 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,190 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,190 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:36,190 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,190 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,190 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,190 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,190 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,190 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,190 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,191 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,192 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:19:36,193 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,193 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,193 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,193 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,196 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:19:36,196 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:36,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,200 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,200 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:19:36,200 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,200 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:36,201 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:36,201 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:36,201 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:36 +08:00

2018-05-14 11:19:37,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:19:37,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:19:37,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,115 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,115 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,115 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,115 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,115 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:37,115 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,115 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,115 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,116 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,116 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,116 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,116 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,116 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:19:37,116 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,116 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,117 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,117 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,117 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,117 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,117 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:19:37,117 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,117 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,117 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,117 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,117 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,118 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,118 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:37,118 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,118 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,118 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,118 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,118 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,118 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,119 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,119 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,119 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:37,119 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,119 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,119 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,119 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,120 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,120 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,120 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,120 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,120 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:37,120 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,120 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,120 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,120 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,122 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:19:37,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,126 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:19:37,126 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,126 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,126 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,126 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,129 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,129 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,129 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,129 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,129 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,129 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:19:37,130 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,130 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,130 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,130 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,130 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,833 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,834 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,835 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,835 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,835 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,835 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,835 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,836 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:19:37,836 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,836 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,836 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,836 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,836 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,836 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,836 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:19:37,836 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,836 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,837 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,837 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,837 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,837 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,837 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:37,837 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,837 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,837 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,837 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,838 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,838 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,838 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,838 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,838 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:37,838 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,838 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,838 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,838 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,839 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,839 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,839 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,839 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,839 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:37,839 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,839 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,839 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,839 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,839 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,840 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,840 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,840 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,842 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:19:37,842 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,842 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,842 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,842 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,845 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:19:37,845 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,846 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,846 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,846 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:37,846 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,846 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,846 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,846 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,846 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,846 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:37,847 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,848 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,848 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,848 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,848 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,849 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:19:37,849 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,849 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:37,849 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:37,849 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:37,849 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:37 +08:00

2018-05-14 11:19:38,925 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,926 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:19:38,926 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,926 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:19:38,926 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,926 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,926 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,926 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,927 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,927 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:38,927 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,927 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,927 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,927 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,927 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,927 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,927 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,928 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:19:38,928 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,928 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,928 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,928 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,928 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,928 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,928 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:19:38,928 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,929 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,929 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,929 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,929 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,929 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,929 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:38,929 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,929 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,929 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,929 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,930 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,930 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,930 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,930 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,931 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:38,931 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,931 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,931 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,931 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,931 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,931 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,931 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,931 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,932 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:38,932 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,932 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,932 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,932 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,932 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,932 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,932 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,933 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,934 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 7
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:19:38,934 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,934 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,934 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,934 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,938 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:19:38,938 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,938 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,938 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,938 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:38,938 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,938 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,938 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,939 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,940 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:38,940 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,940 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:38,940 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,940 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,940 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,940 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,940 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,941 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:19:38,941 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,941 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:38,941 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:38,941 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:38,941 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:38 +08:00

2018-05-14 11:19:40,215 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,215 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:19:40,215 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,215 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:19:40,215 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,215 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,215 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,216 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,216 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,216 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:40,216 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,216 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,216 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,216 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,216 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,216 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,217 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,217 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:19:40,217 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,217 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,217 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,217 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,217 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,218 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,218 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:19:40,218 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,218 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,218 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,218 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,218 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,218 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,219 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:40,219 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,219 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,219 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,219 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,220 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:40,220 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,220 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,220 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,220 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,220 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,220 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,220 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,220 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,221 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:19:40,221 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,221 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,221 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,221 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,221 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,221 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,221 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,222 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,223 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 8
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:19:40,223 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,223 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,223 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,223 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,227 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:19:40,227 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,227 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,227 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,227 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:40,227 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,227 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,227 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,228 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,228 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,228 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,228 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,228 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:40,228 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,228 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,228 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,228 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,228 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:19:40,229 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,230 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,230 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,230 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,230 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,230 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:19:40,231 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,231 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:19:40 +08:00

2018-05-14 11:19:40,231 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:19:40,231 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:19:40,231 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:19:40 +08:00

2018-05-14 11:21:08,105 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,106 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:21:08,106 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,106 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:21:08,106 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,107 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,107 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,107 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,107 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,107 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:21:08,107 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,107 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,107 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,108 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,108 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,108 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,108 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:21:08,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:21:08,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,110 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,110 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,110 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,110 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,110 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,110 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:21:08,110 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,110 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,110 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,110 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,111 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,111 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,111 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,111 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,111 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:21:08,111 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,111 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,112 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,112 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,117 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 11:21:08,117 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,117 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,117 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,117 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:21:08,117 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,118 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,118 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,118 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,118 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,118 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,118 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,118 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,119 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:21:08,119 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,119 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,119 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,119 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,119 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,119 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:21:08,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:21:08,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,122 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,122 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,122 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:21:08,122 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,122 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:21:08,122 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,122 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,122 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,122 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:21:08,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:21:08 +08:00

2018-05-14 11:21:08,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:21:08,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:21:08,123 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:21:08 +08:00

2018-05-14 11:27:48,611 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,612 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:27:48,612 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,612 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:27:48,612 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,614 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:27:48,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:48,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,616 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,616 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,616 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,616 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:27:48,616 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,616 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,617 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,617 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,617 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,617 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,617 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:27:48,617 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,617 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,617 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,617 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,617 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:27:48,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,619 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,619 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,619 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,619 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,619 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:27:48,619 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,619 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,619 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,619 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,620 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,620 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,620 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,620 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,620 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:27:48,620 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,620 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,620 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:27:48,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:48,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,624 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,625 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,625 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,625 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:27:48,625 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,625 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:48,626 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:48,626 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:48,627 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:48 +08:00

2018-05-14 11:27:50,739 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,739 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:27:50,739 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,739 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:27:50,739 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,746 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-14 11:27:50,746 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,747 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,747 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,747 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:50,747 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,747 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,747 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,752 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 11:27:50,752 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,752 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,752 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,753 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:27:50,753 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,753 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,754 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:27:50,754 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,754 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,755 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,755 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:27:50,755 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,755 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,758 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:27:50,758 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,758 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,758 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,759 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:27:50,759 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,759 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,759 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,759 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,766 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-14 11:27:50,766 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,766 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,766 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,767 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:27:50,767 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,767 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,767 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,767 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,770 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:27:50,770 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,775 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,775 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,776 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:27:50,776 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,776 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,776 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,776 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,785 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-14 11:27:50,785 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,785 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,786 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,786 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:27:50,786 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,786 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,786 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,786 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,789 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:27:50,790 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,790 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,791 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,791 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:50,791 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,791 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,791 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,796 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 11:27:50,796 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,796 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:50,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,804 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-14 11:27:50,804 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,804 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,804 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,804 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:50,804 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,804 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:50,804 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,812 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-14 11:27:50,813 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,813 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,813 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,814 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:27:50,814 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,814 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:50,825 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-14 11:27:50,825 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:50,825 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:50 +08:00

2018-05-14 11:27:57,638 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,638 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:27:57,638 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,638 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:27:57,638 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:57,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:27:57,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:27:57,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:27:57,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,643 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,643 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:27:57,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,645 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:27:57,645 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,645 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,645 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,645 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,647 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:27:57,647 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,647 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,648 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,648 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:27:57,648 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,648 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,648 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,648 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:57,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,651 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:27:57,651 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,651 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:27:57,651 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,651 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,651 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,651 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,651 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,652 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:27:57,652 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,652 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:27:57 +08:00

2018-05-14 11:27:57,652 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:27:57,652 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:27:57,652 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:27:57 +08:00

2018-05-14 11:28:03,777 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,778 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:28:03,778 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,778 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:28:03,778 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,820 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 42 ms with result: SqlDataReader

2018-05-14 11:28:03,820 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,820 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,821 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,821 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:03,821 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,821 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,821 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,857 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 36 ms with result: SqlDataReader

2018-05-14 11:28:03,857 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,857 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,858 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,858 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:28:03,858 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,858 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,903 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 44 ms with result: SqlDataReader

2018-05-14 11:28:03,903 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,903 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,903 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,903 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:28:03,903 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,903 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,950 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 46 ms with result: SqlDataReader

2018-05-14 11:28:03,951 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,951 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,951 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,952 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:03,952 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,952 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,952 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,952 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,981 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 28 ms with result: SqlDataReader

2018-05-14 11:28:03,981 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,981 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,983 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,984 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:03,984 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,984 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,984 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,984 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,985 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:03,985 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,985 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,985 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,985 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:03,985 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,985 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,985 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,985 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,986 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:03,986 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,986 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,987 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,987 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:28:03,987 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,988 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,988 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,988 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,988 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:03,988 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,990 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,990 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,990 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:03,990 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,990 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,990 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,991 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:03,991 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,992 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,992 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,992 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:03,992 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,992 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,992 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,992 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:03,992 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,993 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,993 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,993 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:03,993 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,993 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:03,993 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,994 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:28:03,994 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,995 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,995 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,995 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:28:03,996 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,996 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:03,996 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:03,996 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:03,996 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:03 +08:00

2018-05-14 11:28:09,337 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,337 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:28:09,337 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,337 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:28:09,337 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,338 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:09,338 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,338 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,338 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,338 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:09,338 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,338 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,338 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,339 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:09,339 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,339 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,339 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,340 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:28:09,340 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,340 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,340 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:09,340 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,340 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,340 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,340 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:28:09,340 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,341 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,341 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:09,341 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,341 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,341 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,342 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:09,342 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,342 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,342 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,342 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,355 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-14 11:28:09,355 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,356 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,356 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,356 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:09,356 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,356 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,356 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,356 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,357 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:09,357 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,357 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,357 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,357 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:09,357 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,357 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,357 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,357 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,358 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:09,358 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,358 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,358 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,359 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:28:09,359 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,359 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,359 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,359 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,359 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:09,359 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,360 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,360 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,360 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:09,360 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,360 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,360 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,363 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:28:09,363 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,363 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,363 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,363 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:09,363 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,363 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,363 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,364 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:09,364 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,364 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,364 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,364 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:09,365 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,365 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:09,365 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,365 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:09,365 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,365 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,366 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,366 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:28:09,366 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,366 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:09,367 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:09,367 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:09,367 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:09 +08:00

2018-05-14 11:28:13,349 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,349 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:28:13,349 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,349 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:28:13,349 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,387 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 37 ms with result: SqlDataReader

2018-05-14 11:28:13,387 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,387 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,387 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,387 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:13,388 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,388 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,388 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,467 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 79 ms with result: SqlDataReader

2018-05-14 11:28:13,467 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,468 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,468 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,468 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:28:13,468 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,468 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,574 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 105 ms with result: SqlDataReader

2018-05-14 11:28:13,574 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,574 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,574 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,574 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:28:13,574 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,575 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,628 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 53 ms with result: SqlDataReader

2018-05-14 11:28:13,628 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,628 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,628 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,629 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:13,629 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,629 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,629 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,629 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,695 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 65 ms with result: SqlDataReader

2018-05-14 11:28:13,695 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,695 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,695 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,696 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:13,696 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,696 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,696 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,696 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,796 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 100 ms with result: SqlDataReader

2018-05-14 11:28:13,796 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:13,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,797 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,827 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 29 ms with result: SqlDataReader

2018-05-14 11:28:13,827 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,827 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,827 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,828 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:28:13,828 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,828 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,828 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,828 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,887 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 58 ms with result: SqlDataReader

2018-05-14 11:28:13,887 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,887 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,887 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,887 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:13,887 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,887 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,887 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,939 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 51 ms with result: SqlDataReader

2018-05-14 11:28:13,939 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,939 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,940 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,940 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:13,940 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,940 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,940 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,981 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 39 ms with result: SqlDataReader

2018-05-14 11:28:13,981 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,981 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,981 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,981 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:13,981 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,981 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:13,981 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,993 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-14 11:28:13,993 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,993 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,994 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:28:13,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:13,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:28:13,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:13,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:13 +08:00

2018-05-14 11:28:14,397 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,397 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:28:14,397 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,397 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:28:14,397 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,403 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-14 11:28:14,403 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,404 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,404 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,404 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:14,404 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,404 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,404 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,405 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:14,405 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,405 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,405 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:28:14,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:14,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:28:14,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:14,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:14,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,409 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:14,409 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,409 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,409 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,409 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:14,409 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,409 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,409 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,409 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,415 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-14 11:28:14,415 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,415 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,415 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,416 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:14,416 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,416 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,416 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,416 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,416 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:14,416 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,416 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:28:14,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,418 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:14,418 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,418 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,418 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,419 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,420 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,421 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,421 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:28:14,421 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,421 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:14,421 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:14,421 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:14,422 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:14 +08:00

2018-05-14 11:28:15,816 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:15,816 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:28:15,816 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:15,817 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:28:15,817 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:15,870 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 53 ms with result: SqlDataReader

2018-05-14 11:28:15,870 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:15,870 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:15,871 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:15,871 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:15,871 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:15,871 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:28:15,871 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:15,916 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 45 ms with result: SqlDataReader

2018-05-14 11:28:15,916 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:15,916 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:15,917 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:15,917 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:28:15,917 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:15,917 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:15,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 80 ms with result: SqlDataReader

2018-05-14 11:28:15,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:15,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:15,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:15,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:28:15,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:15,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:15 +08:00

2018-05-14 11:28:16,089 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 90 ms with result: SqlDataReader

2018-05-14 11:28:16,089 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,089 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,090 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,090 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:16,090 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,090 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,090 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,090 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,130 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 39 ms with result: SqlDataReader

2018-05-14 11:28:16,130 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,130 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,130 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:16,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,172 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 40 ms with result: SqlDataReader

2018-05-14 11:28:16,172 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,172 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,172 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,173 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:16,173 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,173 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,173 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,173 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,175 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:28:16,175 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,175 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,175 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,176 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:28:16,176 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,176 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,176 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,176 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,179 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:28:16,179 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,180 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,180 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,180 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:16,180 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,180 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,180 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,197 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: SqlDataReader

2018-05-14 11:28:16,197 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,197 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,197 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,197 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:16,197 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,197 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,197 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,198 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:16,198 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,198 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,198 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,198 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:16,198 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,198 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,198 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,199 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:16,199 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,199 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,200 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,200 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:28:16,200 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,200 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,201 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:16,201 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,201 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,884 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,884 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:28:16,884 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,884 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:28:16,884 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,898 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-14 11:28:16,898 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,898 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,899 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,899 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:16,899 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,899 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,899 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,899 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:16,899 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,900 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,900 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,900 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:28:16,900 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,900 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,901 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:16,901 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,901 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,901 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,902 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:28:16,902 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,902 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,902 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:16,902 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,902 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,903 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,903 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:16,903 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,903 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,903 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,903 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,904 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:16,904 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,904 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,904 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,905 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:16,905 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,905 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,905 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,905 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,905 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:16,905 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,906 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,906 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,906 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:16,906 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,906 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,906 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,906 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,907 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:16,907 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,907 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,908 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,909 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:28:16,909 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,909 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,909 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,909 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,911 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:28:16,911 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,911 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,911 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,911 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:16,911 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,911 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,911 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,913 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:28:16,913 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,913 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,913 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,913 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:16,913 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,913 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,913 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,923 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-14 11:28:16,923 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,924 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,924 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,924 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:16,924 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,924 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:16,924 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,934 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-14 11:28:16,934 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,935 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,935 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,936 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:28:16,936 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,936 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:16,936 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:16,936 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:16,936 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:16 +08:00

2018-05-14 11:28:19,397 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,398 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:28:19,398 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,398 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:28:19,398 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,400 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:28:19,400 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,401 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,401 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,401 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:19,401 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,401 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,401 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,404 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:28:19,404 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,405 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,405 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:28:19,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:19,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,406 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:28:19,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:19,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,407 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:19,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,408 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,409 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:19,409 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,412 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,412 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,412 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:19,412 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,412 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,412 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,412 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,413 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:19,413 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,413 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,414 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,414 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:28:19,414 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,414 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,414 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,414 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,415 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:19,415 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,415 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,415 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,415 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:28:19,416 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,416 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,416 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,416 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,416 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:19,416 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,417 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,417 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,417 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:19,417 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,417 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,417 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,418 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:19,418 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,418 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,418 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,418 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:19,418 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,418 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,418 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,418 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:19,419 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,419 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,419 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,419 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:28:19,419 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,419 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:28:19,419 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,420 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:19,420 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,420 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,420 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,421 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:28:19,421 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,421 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:28:19 +08:00

2018-05-14 11:28:19,422 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:28:19,422 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:28:19,422 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:28:19 +08:00

2018-05-14 11:29:53,172 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:53 +08:00

2018-05-14 11:29:53,187 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-14 11:29:53,187 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:53,187 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:53 +08:00

2018-05-14 11:29:53,187 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 15

2018-05-14 11:29:53,187 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:53,187 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:53 +08:00

2018-05-14 11:29:53,291 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:53 +08:00

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,168 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,332 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,457 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:29:54,457 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,457 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:29:54,457 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,457 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 11:29:54,457 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,545 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,556 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,576 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:29:54,576 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,576 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,576 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,592 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:54,592 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,623 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:54,639 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,654 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,654 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,685 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:29:54,685 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,685 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,685 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,685 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,685 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:54,685 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,701 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,701 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,717 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:29:54,717 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,717 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,717 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,717 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,717 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:29:54,717 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,732 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,732 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,732 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:29:54,732 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,732 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,732 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,732 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,732 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:54,732 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,732 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,732 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,764 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:29:54,764 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,764 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,764 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,764 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,764 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:54,764 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,779 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:54,795 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:54,795 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:54,795 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:54 +08:00

2018-05-14 11:29:56,636 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,637 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:29:56,637 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,637 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:29:56,637 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,642 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 11:29:56,642 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,644 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,644 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,644 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:29:56,644 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,644 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,644 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,644 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:56,644 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,644 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,645 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,645 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:29:56,645 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,645 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,652 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-14 11:29:56,652 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,652 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,652 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,652 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:29:56,652 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,652 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,654 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 11:29:56,654 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,654 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,654 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,751 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0))
    )  AS [GroupBy1]
2018-05-14 11:29:56,751 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,751 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,751 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,751 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615661' (Type = String, Size = 4000)

2018-05-14 11:29:56,751 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,760 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-14 11:29:56,760 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,760 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,760 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,760 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0))
    )  AS [GroupBy1]
2018-05-14 11:29:56,760 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,760 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,760 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,760 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615661' (Type = String, Size = 4000)

2018-05-14 11:29:56,760 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 11:29:56,776 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0))
    )  AS [GroupBy1]
2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615661' (Type = String, Size = 4000)

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:56,776 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM  [dbo].[T_Journals] AS [Extent1]
            INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615661' (Type = String, Size = 4000)

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-14 11:29:56,776 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'平台发放' = [Extent1].[Name]) AND (N'平台扣除' = [Extent1].[Name]) AND (N'积分增加' = [Extent1].[Name])
2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:29:56 +08:00

2018-05-14 11:29:56,776 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:29:56,776 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:29:56,776 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:29:56 +08:00

2018-05-14 11:47:27,878 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:27 +08:00

2018-05-14 11:47:27,891 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-14 11:47:27,891 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:27,891 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:27 +08:00

2018-05-14 11:47:27,893 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 15

2018-05-14 11:47:27,893 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:27,893 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:27 +08:00

2018-05-14 11:47:27,990 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:27 +08:00

2018-05-14 11:47:28,898 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-14 11:47:28,898 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:28,899 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-14 11:47:28,900 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:28 +08:00

2018-05-14 11:47:28,901 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 11:47:28,901 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:28,903 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:28 +08:00

2018-05-14 11:47:28,904 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:28 +08:00

2018-05-14 11:47:28,905 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-14 11:47:28,905 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:28,905 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:28 +08:00

2018-05-14 11:47:28,906 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 11:47:28,906 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:28,907 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:28 +08:00

2018-05-14 11:47:29,069 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,208 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:47:29,208 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,208 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:47:29,209 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,219 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-14 11:47:29,219 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,293 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,305 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,341 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:47:29,341 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,341 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,341 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,351 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-14 11:47:29,351 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,388 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,402 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,413 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:47:29,413 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,413 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,413 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:29,413 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,415 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,416 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:47:29,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:29,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,417 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,429 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,459 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
    )  AS [GroupBy1]
2018-05-14 11:47:29,459 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,459 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,459 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,459 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,462 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:47:29,462 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,469 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,481 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,493 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:47:29,493 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,493 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,493 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,493 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,493 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,498 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-14 11:47:29,498 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,506 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,506 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,507 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND ([Extent1].[JournalTypeId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-14 11:47:29,507 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,507 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,507 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,507 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,507 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,508 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:29,508 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,508 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,515 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,548 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:47:29,548 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,548 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,548 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,548 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,550 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:47:29,551 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,557 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,560 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,561 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:47:29,561 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,561 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,561 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,562 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:29,562 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,563 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,564 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,565 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:47:29,565 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,565 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,565 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,565 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:29,565 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,566 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,566 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,574 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:47:29,574 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,574 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:29,574 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:29,574 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:29,574 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:29,577 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:29 +08:00

2018-05-14 11:47:56,250 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,251 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-14 11:47:56,251 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,251 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'PlatformUser201805051709360001' (Type = String, Size = 4000)

2018-05-14 11:47:56,251 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,251 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:56,251 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,252 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,253 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,253 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:47:56,253 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,253 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,253 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,260 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-14 11:47:56,260 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,260 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,261 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,261 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费' = [Extent1].[Description])
2018-05-14 11:47:56,261 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,261 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,261 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:56,262 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,262 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,262 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,262 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'赠送' = [Extent1].[Description])
2018-05-14 11:47:56,262 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,262 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,262 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:56,262 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,262 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,263 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,376 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0))
    )  AS [GroupBy1]
2018-05-14 11:47:56,376 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,376 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,376 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,376 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615661' (Type = String, Size = 4000)

2018-05-14 11:47:56,376 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,379 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-14 11:47:56,379 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,379 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,380 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,406 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0)) AND ([Extent1].[JournalTypeId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-14 11:47:56,406 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,407 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,407 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,407 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615661' (Type = String, Size = 4000)

2018-05-14 11:47:56,407 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,407 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,411 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 11:47:56,411 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,411 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,411 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,412 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0)) AND ([Extent1].[JournalTypeId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-14 11:47:56,412 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,412 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,412 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,412 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615661' (Type = String, Size = 4000)

2018-05-14 11:47:56,412 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,412 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,412 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:56,412 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,413 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,413 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,416 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM  [dbo].[T_Journals] AS [Extent1]
            INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] <> [Extent1].[ToPlatformUserId]) AND ([Extent1].[JournalTypeId] IN (@p__linq__0,@p__linq__1)) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-14 11:47:56,416 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,416 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,416 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,417 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615661' (Type = String, Size = 4000)

2018-05-14 11:47:56,417 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,417 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:56,417 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,417 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,417 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,417 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:56,418 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 11:47:56 +08:00

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-14 11:47:56,419 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 11:47:56,420 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 11:47:56 +08:00

2018-05-14 13:51:52,274 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 13:51:52 +08:00

2018-05-14 13:51:52,293 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-14 13:51:52,293 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:51:52,293 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 13:51:52 +08:00

2018-05-14 13:51:52,398 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 102 ms with result: 15

2018-05-14 13:51:52,398 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:51:52,399 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 13:51:52 +08:00

2018-05-14 13:51:52,514 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 13:51:52 +08:00

2018-05-14 13:51:53,390 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-14 13:51:53,391 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:51:53,392 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-14 13:51:53,392 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,394 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 13:51:53,394 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:51:53,395 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,397 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,399 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-14 13:51:53,399 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:51:53,399 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,400 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 13:51:53,400 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:51:53,400 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,550 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,742 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM  [dbo].[T_TakeCashes] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[PlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent2].[Mobile] = @p__linq__0) OR (1 = 0))
    )  AS [GroupBy1]
2018-05-14 13:51:53,742 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:51:53,742 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '' (Type = String, Size = 4000)

2018-05-14 13:51:53,742 [73] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,768 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 25 ms with result: SqlDataReader

2018-05-14 13:51:53,768 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:51:53,778 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,780 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,793 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Filter1].[Integral]) AS [A1]
        FROM   (SELECT [Extent1].[IntegralTypeId] AS [IntegralTypeId], [Extent1].[Integral] AS [Integral], [Extent2].[Mobile] AS [Mobile]
            FROM  [dbo].[T_TakeCashes] AS [Extent1]
            INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[PlatformUserId] = [Extent2].[Id]
            WHERE 0 = [Extent1].[IsDeleted] ) AS [Filter1]
        INNER JOIN [dbo].[T_IntegralTypes] AS [Extent3] ON [Filter1].[IntegralTypeId] = [Extent3].[Id]
        WHERE (([Filter1].[Mobile] = @p__linq__0) OR (1 = 0)) AND (N'商家积分' = [Extent3].[Name])
    )  AS [GroupBy1]
2018-05-14 13:51:53,793 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:51:53,793 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '' (Type = String, Size = 4000)

2018-05-14 13:51:53,793 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,880 [75] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 86 ms with result: SqlDataReader

2018-05-14 13:51:53,880 [75] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:51:53,927 [75] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 13:51:53 +08:00

2018-05-14 13:51:53,937 [73] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.InvalidOperationException: The cast to value type 'System.Int64' failed because the materialized value is null. Either the result type's generic parameter or the query must use a nullable type.
   在 System.Data.Entity.Core.Common.Internal.Materialization.Shaper.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal)
   在 lambda_method(Closure , Shaper )
   在 System.Data.Entity.Core.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper)
   在 System.Data.Entity.Core.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.<MoveNextAsync>d__4.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Internal.LazyAsyncEnumerator`1.<FirstMoveNextAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Infrastructure.IDbAsyncEnumerableExtensions.<SingleAsync>d__2d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.TakeCashService.<GetModelListAsync>d__1.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\TakeCashService.cs:行号 54
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Areas.Admin.Controllers.TakeCashController.<List>d__14.MoveNext() 位置 F:\201804\IMS.SYS\Web\Areas\Admin\Controllers\TakeCashController.cs:行号 27
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-14 13:53:53,353 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 13:53:53 +08:00

2018-05-14 13:53:53,366 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-14 13:53:53,366 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:53:53,366 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 13:53:53 +08:00

2018-05-14 13:53:53,381 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: 15

2018-05-14 13:53:53,381 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:53:53,381 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 13:53:53 +08:00

2018-05-14 13:53:53,529 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 13:53:53 +08:00

2018-05-14 13:53:54,548 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-14 13:53:54,548 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:53:54,549 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-14 13:53:54,549 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 13:53:54 +08:00

2018-05-14 13:53:54,554 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 4 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 13:53:54,554 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:53:54,556 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 13:53:54 +08:00

2018-05-14 13:53:54,558 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 13:53:54 +08:00

2018-05-14 13:53:54,559 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-14 13:53:54,559 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:53:54,559 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 13:53:54 +08:00

2018-05-14 13:53:54,564 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 5 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 13:53:54,564 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:53:54,565 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 13:53:54 +08:00

2018-05-14 13:53:54,780 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 13:53:54 +08:00

2018-05-14 13:53:55,013 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM  [dbo].[T_TakeCashes] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[PlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent2].[Mobile] = @p__linq__0) OR (1 = 0))
    )  AS [GroupBy1]
2018-05-14 13:53:55,013 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:53:55,014 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '' (Type = String, Size = 4000)

2018-05-14 13:53:55,014 [79] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 13:53:55 +08:00

2018-05-14 13:53:55,026 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-14 13:53:55,026 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:53:55,036 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 13:53:55 +08:00

2018-05-14 13:53:55,039 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 13:53:55 +08:00

2018-05-14 13:53:55,052 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Filter1].[Integral]) AS [A1]
        FROM   (SELECT [Extent1].[IntegralTypeId] AS [IntegralTypeId], [Extent1].[Integral] AS [Integral], [Extent2].[Mobile] AS [Mobile]
            FROM  [dbo].[T_TakeCashes] AS [Extent1]
            INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[PlatformUserId] = [Extent2].[Id]
            WHERE 0 = [Extent1].[IsDeleted] ) AS [Filter1]
        INNER JOIN [dbo].[T_IntegralTypes] AS [Extent3] ON [Filter1].[IntegralTypeId] = [Extent3].[Id]
        WHERE (([Filter1].[Mobile] = @p__linq__0) OR (1 = 0)) AND (N'商家积分' = [Extent3].[Name])
    )  AS [GroupBy1]
2018-05-14 13:53:55,052 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:53:55,052 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '' (Type = String, Size = 4000)

2018-05-14 13:53:55,052 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 13:53:55 +08:00

2018-05-14 13:53:55,057 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-14 13:53:55,057 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 13:53:55,059 [77] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 13:53:55 +08:00

2018-05-14 13:53:55,065 [77] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.InvalidOperationException: The cast to value type 'System.Int64' failed because the materialized value is null. Either the result type's generic parameter or the query must use a nullable type.
   在 System.Data.Entity.Core.Common.Internal.Materialization.Shaper.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal)
   在 lambda_method(Closure , Shaper )
   在 System.Data.Entity.Core.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper)
   在 System.Data.Entity.Core.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.<MoveNextAsync>d__4.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Internal.LazyAsyncEnumerator`1.<FirstMoveNextAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Infrastructure.IDbAsyncEnumerableExtensions.<SingleAsync>d__2d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.TakeCashService.<GetModelListAsync>d__1.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\TakeCashService.cs:行号 54
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Areas.Admin.Controllers.TakeCashController.<List>d__14.MoveNext() 位置 F:\201804\IMS.SYS\Web\Areas\Admin\Controllers\TakeCashController.cs:行号 27
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-14 14:04:13,346 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 14:04:13 +08:00

2018-05-14 14:04:13,357 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-14 14:04:13,358 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:13,358 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 14:04:13 +08:00

2018-05-14 14:04:13,371 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: 15

2018-05-14 14:04:13,371 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:13,371 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 14:04:13 +08:00

2018-05-14 14:04:13,502 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 14:04:13 +08:00

2018-05-14 14:04:14,415 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-14 14:04:14,415 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,416 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-14 14:04:14,417 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,419 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 14:04:14,419 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,420 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,422 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,423 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-14 14:04:14,423 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,423 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,424 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-14 14:04:14,424 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,424 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,540 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,639 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-14 14:04:14,639 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,639 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,641 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-14 14:04:14,641 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,686 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,686 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,687 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-14 14:04:14,688 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,688 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,708 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 20 ms with result: SqlDataReader

2018-05-14 14:04:14,708 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,708 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,755 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,867 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM  [dbo].[T_TakeCashes] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[PlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent2].[Mobile] = @p__linq__0) OR (1 = 0))
    )  AS [GroupBy1]
2018-05-14 14:04:14,867 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,867 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '' (Type = String, Size = 4000)

2018-05-14 14:04:14,867 [83] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,885 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-14 14:04:14,885 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,894 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,896 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,900 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[Integral]) AS [A1]
        FROM  [dbo].[T_TakeCashes] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[PlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent2].[Mobile] = @p__linq__0) OR (1 = 0)) AND ([Extent1].[IntegralTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-14 14:04:14,900 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,900 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '' (Type = String, Size = 4000)

2018-05-14 14:04:14,900 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-14 14:04:14,900 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,904 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-14 14:04:14,904 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-14 14:04:14,905 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/14 14:04:14 +08:00

2018-05-14 14:04:14,912 [80] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.InvalidOperationException: The cast to value type 'System.Int64' failed because the materialized value is null. Either the result type's generic parameter or the query must use a nullable type.
   在 System.Data.Entity.Core.Common.Internal.Materialization.Shaper.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal)
   在 lambda_method(Closure , Shaper )
   在 System.Data.Entity.Core.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper)
   在 System.Data.Entity.Core.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.<MoveNextAsync>d__4.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Internal.LazyAsyncEnumerator`1.<FirstMoveNextAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Infrastructure.IDbAsyncEnumerableExtensions.<SingleAsync>d__2d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.TakeCashService.<GetModelListAsync>d__1.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\TakeCashService.cs:行号 56
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Areas.Admin.Controllers.TakeCashController.<List>d__14.MoveNext() 位置 F:\201804\IMS.SYS\Web\Areas\Admin\Controllers\TakeCashController.cs:行号 27
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
