2018-05-09 17:12:54,164 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,260 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:12:54,260 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:54,260 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:12:54,260 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,358 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 97 ms with result: SqlDataReader

2018-05-09 17:12:54,358 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:54,358 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,359 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,359 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:12:54,359 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:54,359 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 181 ms with result: SqlDataReader

2018-05-09 17:12:54,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:54,541 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,542 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,542 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:12:54,542 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:54,542 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,680 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 137 ms with result: SqlDataReader

2018-05-09 17:12:54,680 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:54,680 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,680 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,680 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 17:12:54,680 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:54,681 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:12:54,681 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:12:54,681 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,856 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 175 ms with result: SqlDataReader

2018-05-09 17:12:54,856 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:54,856 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,857 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:54,858 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:12:54,858 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:54,858 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:54 +08:00

2018-05-09 17:12:55,052 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 193 ms with result: SqlDataReader

2018-05-09 17:12:55,052 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,053 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,053 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,054 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:12:55,054 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,054 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:12:55,054 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:12:55,054 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:12:55,054 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:12:55,054 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,095 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 40 ms with result: SqlDataReader

2018-05-09 17:12:55,095 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,095 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,095 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,096 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:12:55,096 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,096 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:12:55,096 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:12:55,096 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:12:55,096 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:12:55,096 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,165 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 68 ms with result: SqlDataReader

2018-05-09 17:12:55,165 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,165 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,169 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,169 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:12:55,170 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,170 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:12:55,170 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:12:55,170 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,225 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 54 ms with result: SqlDataReader

2018-05-09 17:12:55,225 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,225 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,225 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,225 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:12:55,226 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,226 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:12:55,226 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,290 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 64 ms with result: SqlDataReader

2018-05-09 17:12:55,290 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,290 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,290 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,290 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:12:55,290 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,290 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:12:55,291 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,358 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 67 ms with result: SqlDataReader

2018-05-09 17:12:55,358 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,358 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,359 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,359 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:12:55,359 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,359 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:12:55,359 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:55,403 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 43 ms with result: SqlDataReader

2018-05-09 17:12:55,403 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:55,403 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:55 +08:00

2018-05-09 17:12:56,739 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,740 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:12:56,740 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,740 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:12:56,740 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,778 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 38 ms with result: SqlDataReader

2018-05-09 17:12:56,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,779 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,780 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,780 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:12:56,780 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,780 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,814 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 33 ms with result: SqlDataReader

2018-05-09 17:12:56,814 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,814 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,815 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,815 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:12:56,815 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,815 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,861 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 45 ms with result: SqlDataReader

2018-05-09 17:12:56,861 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,861 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,861 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,862 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 17:12:56,862 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,862 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:12:56,862 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:12:56,862 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,882 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 19 ms with result: SqlDataReader

2018-05-09 17:12:56,882 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,882 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,882 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,883 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:12:56,883 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,883 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,956 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 72 ms with result: SqlDataReader

2018-05-09 17:12:56,956 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,956 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,956 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:56,957 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:12:56,957 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:56,957 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:12:56,957 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:12:56,957 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:12:56,957 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:12:56,957 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:56 +08:00

2018-05-09 17:12:57,072 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 114 ms with result: SqlDataReader

2018-05-09 17:12:57,072 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,072 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,073 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,073 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:12:57,073 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,073 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:12:57,073 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:12:57,073 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:12:57,073 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:12:57,074 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,148 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 74 ms with result: SqlDataReader

2018-05-09 17:12:57,148 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,148 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,149 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,150 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:12:57,150 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,150 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:12:57,150 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:12:57,150 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 129 ms with result: SqlDataReader

2018-05-09 17:12:57,280 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,280 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,280 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,280 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:12:57,280 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,280 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:12:57,280 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,344 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 64 ms with result: SqlDataReader

2018-05-09 17:12:57,345 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,345 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,345 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,345 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:12:57,345 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,345 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:12:57,345 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,363 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-09 17:12:57,363 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,363 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,363 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,363 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:12:57,363 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,363 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:12:57,363 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:12:57 +08:00

2018-05-09 17:12:57,364 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:12:57,364 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:12:57,364 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:12:57 +08:00

2018-05-09 17:14:18,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,246 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:14:18,246 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,247 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:14:18,247 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,254 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 17:14:18,254 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,254 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,255 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,255 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:14:18,255 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,255 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:14:18,255 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,256 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:14:18,256 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,256 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,257 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,257 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:14:18,257 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,257 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:14:18,257 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,259 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:14:18,259 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,260 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,260 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,260 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:14:18,260 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,260 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:14:18,260 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,260 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:18,261 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,261 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,261 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,262 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:14:18,262 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,262 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:14:18,262 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,264 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:14:18,264 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,264 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,264 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,265 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:14:18,265 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,265 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:14:18,265 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,266 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:14:18,266 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,266 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,267 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,268 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:14:18,268 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,268 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:14:18,268 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,269 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:18,269 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,269 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,269 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,270 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:14:18,270 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,270 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:14:18,270 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,270 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:18,270 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,270 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:14:18,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:14:18,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:18,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:14:18,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,274 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:14:18,274 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,274 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:14:18,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:14:18,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:18,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,276 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:14:18,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '25' (Type = Int64)

2018-05-09 17:14:18,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:14:18,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:14:18,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:14:18,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:14:18,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:14:18,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,280 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '25' (Type = Int64)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '购买蓝月赠送' (Type = String, Size = 100)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:14:18' (Type = DateTime2)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:14:18,281 [3] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,290 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 9 ms with error: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。

2018-05-09 17:14:18,290 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:18,293 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:18 +08:00

2018-05-09 17:14:18,294 [24] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.Entity.Core.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。
   在 System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__174_0(Task`1 result)
   在 System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   在 System.Threading.Tasks.Task.Execute()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Utilities.TaskExtensions.CultureAwaiter`1.GetResult()
   在 System.Data.Entity.Core.Mapping.Update.Internal.DynamicUpdateCommand.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<ExecuteInTransactionAsync>d__3d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesToStoreAsync>d__39.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<ExecuteAsyncImplementation>d__9`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesInternalAsync>d__31.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.PlatformUserService.<ProvideAsync>d__5.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\PlatformUserService.cs:行号 401
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Controllers.GivingController.<Provide>d__15.MoveNext() 位置 F:\201804\IMS.SYS\Web\Controllers\GivingController.cs:行号 87
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-09 17:14:54,018 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,019 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:14:54,019 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,019 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:14:54,019 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,022 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:14:54,022 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,022 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,022 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,022 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:14:54,022 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,022 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:14:54,022 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,024 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:14:54,024 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,024 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,024 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,025 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:14:54,025 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,025 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:14:54,025 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,027 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:14:54,027 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,027 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,027 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,027 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:14:54,027 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,027 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:14:54,027 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,036 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:14:54,036 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,037 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,037 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,038 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:14:54,038 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,038 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:14:54,038 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,053 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 17:14:54,053 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,053 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,053 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,054 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:14:54,054 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,054 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:14:54,054 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,055 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:54,055 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,055 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,055 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,056 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:14:54,056 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,056 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:14:54,056 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,057 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:54,057 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,057 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,057 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,057 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:14:54,058 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,058 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:14:54,058 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,058 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:54,058 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,058 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,058 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:14:54,059 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,060 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:54,060 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,060 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,060 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,060 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:14:54,060 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,060 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:14:54,060 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,062 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:14:54,062 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,062 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,063 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,063 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:14:54,063 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,063 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:14:54,063 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,064 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:14:54,064 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,064 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,065 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,066 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,067 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:14:54,067 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '25' (Type = Int64)

2018-05-09 17:14:54,067 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:14:54,067 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,069 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:14:54,069 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,069 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:14:54,069 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:14:54,069 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:14:54,069 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '25' (Type = Int64)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '购买蓝月赠送' (Type = String, Size = 100)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:14:54' (Type = DateTime2)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:14:54,071 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,076 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 4 ms with error: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。

2018-05-09 17:14:54,076 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:14:54,077 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:14:54 +08:00

2018-05-09 17:14:54,078 [14] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.Entity.Core.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。
   在 System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__174_0(Task`1 result)
   在 System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   在 System.Threading.Tasks.Task.Execute()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Utilities.TaskExtensions.CultureAwaiter`1.GetResult()
   在 System.Data.Entity.Core.Mapping.Update.Internal.DynamicUpdateCommand.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<ExecuteInTransactionAsync>d__3d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesToStoreAsync>d__39.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<ExecuteAsyncImplementation>d__9`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesInternalAsync>d__31.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.PlatformUserService.<ProvideAsync>d__5.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\PlatformUserService.cs:行号 401
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Controllers.GivingController.<Provide>d__15.MoveNext() 位置 F:\201804\IMS.SYS\Web\Controllers\GivingController.cs:行号 87
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-09 17:16:14,427 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:14 +08:00

2018-05-09 17:16:14,441 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-09 17:16:14,441 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:14,441 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:14 +08:00

2018-05-09 17:16:14,479 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 36 ms with result: 15

2018-05-09 17:16:14,480 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:14,480 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:14 +08:00

2018-05-09 17:16:16,121 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:16 +08:00

2018-05-09 17:16:17,577 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-09 17:16:17,577 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:17,578 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-09 17:16:17,578 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:17 +08:00

2018-05-09 17:16:17,614 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 35 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 17:16:17,614 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:17,617 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:17 +08:00

2018-05-09 17:16:17,619 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:17 +08:00

2018-05-09 17:16:17,621 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-09 17:16:17,621 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:17,621 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:17 +08:00

2018-05-09 17:16:17,647 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 26 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 17:16:17,647 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:17,647 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:17 +08:00

2018-05-09 17:16:17,846 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:17 +08:00

2018-05-09 17:16:18,050 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:16:18,050 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,050 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-09 17:16:18,050 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,195 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 144 ms with result: SqlDataReader

2018-05-09 17:16:18,195 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,282 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,297 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,329 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:16:18,329 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,329 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:16:18,329 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,360 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 29 ms with result: SqlDataReader

2018-05-09 17:16:18,360 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,376 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,825 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,827 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:16:18,827 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,827 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:16:18,827 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,835 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 17:16:18,835 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,836 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,838 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,838 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:16:18,838 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,838 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:16:18,838 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,901 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 61 ms with result: SqlDataReader

2018-05-09 17:16:18,901 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,902 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,920 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,929 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:16:18,929 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,929 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,970 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 40 ms with result: SqlDataReader

2018-05-09 17:16:18,970 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,972 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,973 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,974 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:16:18,974 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,974 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:18,988 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 17:16:18,988 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:18,988 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:18 +08:00

2018-05-09 17:16:19,001 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,014 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-09 17:16:19,014 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,014 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 17:16:19,014 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,017 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:16:19,017 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,025 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,026 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,027 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:16:19,027 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,027 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:16:19,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 17:16:19,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 17:16:19,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:16:19,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:16:19,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,062 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:16:19,062 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,072 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,074 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,075 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 17:16:19,075 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,075 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 17:16:19,075 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:16:19,075 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:16:19,075 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,075 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:16:19,076 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,076 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,085 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,136 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:16:19,136 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,136 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 17:16:19,136 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,138 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:16:19,138 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,151 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,156 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,167 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:16:19,167 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,167 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:16:19,167 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 30 ms with result: SqlDataReader

2018-05-09 17:16:19,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,203 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,205 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,206 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:16:19,206 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,206 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:16:19,206 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:16:19,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:16:19,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:16:19,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,230 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:16:19,230 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,230 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,230 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,230 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:16:19,230 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,230 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-09 17:16:19,230 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:19,241 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:16:19,241 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:19,241 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:19 +08:00

2018-05-09 17:16:27,524 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,537 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:16:27,537 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,537 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:16:27,537 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,855 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 318 ms with result: SqlDataReader

2018-05-09 17:16:27,855 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,856 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,858 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,858 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:16:27,858 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,858 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,879 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 21 ms with result: SqlDataReader

2018-05-09 17:16:27,879 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,880 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,880 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,880 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:16:27,880 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,880 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,895 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 17:16:27,895 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,895 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,895 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,897 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 17:16:27,897 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,897 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:16:27,897 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:16:27,897 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,900 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:16:27,900 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,901 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,901 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,902 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:16:27,902 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,902 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,902 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:16:27,903 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,903 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,903 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:16:27,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:16:27,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:16:27,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:16:27,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:16:27,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:16:27,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,938 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,938 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:16:27,938 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,938 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:16:27,938 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:16:27,938 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:16:27,938 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:16:27,938 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,939 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:16:27,939 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,940 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,940 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,942 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:16:27,942 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,942 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:16:27,942 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:16:27,942 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,946 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:16:27,946 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,947 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,947 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,947 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:16:27,948 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,948 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:16:27,948 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,959 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:16:27,959 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,960 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,960 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,960 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:16:27,960 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,960 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:16:27,960 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,972 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:16:27,972 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,972 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,972 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,972 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:16:27,972 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,972 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:16:27,972 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:16:27 +08:00

2018-05-09 17:16:27,986 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 17:16:27,986 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:16:27,986 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:16:27 +08:00

2018-05-09 17:17:14,043 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:17:14 +08:00

2018-05-09 17:17:14,043 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:17:14,043 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:17:14,043 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:17:14,043 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:17:14 +08:00

2018-05-09 17:17:14,058 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-09 17:17:14,058 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:17:14,058 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:17:14 +08:00

2018-05-09 17:17:14,058 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:17:14 +08:00

2018-05-09 17:17:14,058 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:17:14,058 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:17:14,058 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:17:14,058 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:17:14 +08:00

2018-05-09 17:17:14,089 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 27 ms with result: SqlDataReader

2018-05-09 17:17:14,089 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:17:14,089 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:17:14 +08:00

2018-05-09 17:17:43,316 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:17:43 +08:00

2018-05-09 17:17:43,332 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:17:43,332 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:17:43,332 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:17:43,332 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:17:43 +08:00

2018-05-09 17:17:43,348 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 17:17:43,348 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:17:43,348 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:17:43 +08:00

2018-05-09 17:17:43,348 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:17:43 +08:00

2018-05-09 17:17:43,348 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:17:43,348 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:17:43,348 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:17:43,348 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:17:43 +08:00

2018-05-09 17:17:43,363 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:17:43,363 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:17:43,363 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:17:43 +08:00

2018-05-09 17:18:15,276 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,276 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:18:15,276 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,276 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:18:15,276 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,276 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:18:15,276 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,276 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:18:15,292 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,292 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:18:15,292 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:18:15,292 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,292 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:18:15,292 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,292 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:18:15,292 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:18:15,292 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,292 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:18:15,292 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,292 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:18:15,292 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:18:15,292 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,292 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,292 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:18:15,292 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,292 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:18:15,292 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,323 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 34 ms with result: SqlDataReader

2018-05-09 17:18:15,323 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,323 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,323 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,323 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:18:15,323 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,323 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:18:15,323 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,339 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:18:15,339 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,339 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,339 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,339 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:18:15,339 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,339 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:18:15,339 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,354 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:18:15,354 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,354 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,401 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,401 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:18:15,401 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,401 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:18:15,401 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,401 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:18:15,401 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,401 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,448 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,464 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,589 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:18:15,589 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '25' (Type = Int64)

2018-05-09 17:18:15,589 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:18:15,589 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,604 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: 1

2018-05-09 17:18:15,604 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '25' (Type = Int64)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '' (Type = String, Size = 100)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:18:15' (Type = DateTime2)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:18:15,620 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,651 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 34 ms with error: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。

2018-05-09 17:18:15,651 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:18:15,667 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:18:15 +08:00

2018-05-09 17:18:15,745 [10] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.Entity.Core.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。
   在 System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__174_0(Task`1 result)
   在 System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   在 System.Threading.Tasks.Task.Execute()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Utilities.TaskExtensions.CultureAwaiter`1.GetResult()
   在 System.Data.Entity.Core.Mapping.Update.Internal.DynamicUpdateCommand.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<ExecuteInTransactionAsync>d__3d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesToStoreAsync>d__39.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<ExecuteAsyncImplementation>d__9`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesInternalAsync>d__31.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.PlatformUserService.<ProvideAsync>d__5.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\PlatformUserService.cs:行号 401
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Controllers.GivingController.<Provide>d__15.MoveNext() 位置 F:\201804\IMS.SYS\Web\Controllers\GivingController.cs:行号 87
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-09 17:19:17,766 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:19:17 +08:00

2018-05-09 17:19:17,766 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:19:17,766 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:17,766 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:19:17,766 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:19:17 +08:00

2018-05-09 17:19:17,782 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 20 ms with result: SqlDataReader

2018-05-09 17:19:17,782 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:17,798 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:19:17 +08:00

2018-05-09 17:19:17,798 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:19:17 +08:00

2018-05-09 17:19:17,798 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:19:17,798 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:17,798 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:19:17,798 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:19:17 +08:00

2018-05-09 17:19:17,798 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:19:17,798 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:17,798 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:19:17 +08:00

2018-05-09 17:19:18,668 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:19:18 +08:00

2018-05-09 17:19:18,668 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:19:18,668 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:18,668 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:19:18,668 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:19:18 +08:00

2018-05-09 17:19:18,683 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-09 17:19:18,683 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:18,683 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:19:18 +08:00

2018-05-09 17:19:18,683 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:19:18 +08:00

2018-05-09 17:19:18,683 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:19:18,683 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:18,683 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:19:18,683 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:19:18 +08:00

2018-05-09 17:19:18,699 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:19:18,699 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:18,699 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:19:18 +08:00

2018-05-09 17:19:19,976 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:19:19 +08:00

2018-05-09 17:19:19,976 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:19:19,976 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:19,976 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:19:19,976 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:19:19 +08:00

2018-05-09 17:19:19,976 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:19:19,976 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:19,992 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:19:19 +08:00

2018-05-09 17:19:25,857 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:19:25 +08:00

2018-05-09 17:19:25,857 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:19:25,857 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:25,857 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:19:25,857 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:19:25 +08:00

2018-05-09 17:19:25,872 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:19:25,872 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:25,872 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:19:25 +08:00

2018-05-09 17:19:35,881 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:19:35 +08:00

2018-05-09 17:19:35,881 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:19:35,881 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:35,881 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:19:35,881 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:19:35 +08:00

2018-05-09 17:19:35,896 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 23 ms with result: SqlDataReader

2018-05-09 17:19:35,896 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:35,896 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:19:35 +08:00

2018-05-09 17:19:42,397 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:19:42 +08:00

2018-05-09 17:19:42,397 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:19:42,397 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:42,397 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:19:42,397 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:19:42 +08:00

2018-05-09 17:19:42,412 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:19:42,412 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:42,412 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:19:42 +08:00

2018-05-09 17:19:48,157 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:19:48 +08:00

2018-05-09 17:19:48,157 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:19:48,157 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:48,157 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:19:48,157 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:19:48 +08:00

2018-05-09 17:19:48,188 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 32 ms with result: SqlDataReader

2018-05-09 17:19:48,188 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:19:48,188 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:19:48 +08:00

2018-05-09 17:20:08,958 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:20:08 +08:00

2018-05-09 17:20:08,958 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:20:08,958 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:20:08,958 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:20:08,958 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:20:08 +08:00

2018-05-09 17:20:08,973 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 17:20:08,973 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:20:08,973 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:20:08 +08:00

2018-05-09 17:20:58,908 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:20:58 +08:00

2018-05-09 17:20:58,908 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:20:58,908 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:20:58,908 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:20:58,908 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:20:58 +08:00

2018-05-09 17:20:58,920 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:20:58,920 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:20:58,920 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:20:58 +08:00

2018-05-09 17:22:08,825 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:22:08 +08:00

2018-05-09 17:22:08,825 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:22:08,825 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:22:08,825 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:22:08,825 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:22:08 +08:00

2018-05-09 17:22:08,825 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:22:08,825 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:22:08,825 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:22:08 +08:00

2018-05-09 17:22:23,233 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:22:23 +08:00

2018-05-09 17:22:23,233 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:22:23 +08:00

2018-05-09 17:22:23,233 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:22:23,233 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '25' (Type = Int64)

2018-05-09 17:22:23,233 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:22:23,233 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:22:23 +08:00

2018-05-09 17:22:23,248 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: 1

2018-05-09 17:22:23,248 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:22:23,248 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:22:23,248 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:22:23,264 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:22:23,264 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:22:23 +08:00

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: 1

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '25' (Type = Int64)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '' (Type = String, Size = 100)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:20:42' (Type = DateTime2)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:22:23,264 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:22:23 +08:00

2018-05-09 17:22:23,264 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 5 ms with error: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。

2018-05-09 17:22:23,264 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:22:23,264 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:22:23 +08:00

2018-05-09 17:22:23,326 [10] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.Entity.Core.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。
   在 System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__174_0(Task`1 result)
   在 System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   在 System.Threading.Tasks.Task.Execute()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Utilities.TaskExtensions.CultureAwaiter`1.GetResult()
   在 System.Data.Entity.Core.Mapping.Update.Internal.DynamicUpdateCommand.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<ExecuteInTransactionAsync>d__3d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesToStoreAsync>d__39.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<ExecuteAsyncImplementation>d__9`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesInternalAsync>d__31.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.PlatformUserService.<ProvideAsync>d__5.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\PlatformUserService.cs:行号 401
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Controllers.GivingController.<Provide>d__15.MoveNext() 位置 F:\201804\IMS.SYS\Web\Controllers\GivingController.cs:行号 87
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-09 17:25:50,331 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,331 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:25:50,331 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,331 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:25:50,331 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,331 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:25:50,331 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,331 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,331 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,331 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:25:50,331 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,331 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:25:50,331 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,331 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:25:50,331 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,347 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:25:50,347 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:25:50,347 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,363 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:25:50,363 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:25:50,363 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,363 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:25:50,363 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,363 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:25:50,363 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:50,363 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:25:50,363 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:50,363 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:25:50 +08:00

2018-05-09 17:25:51,435 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:25:51 +08:00

2018-05-09 17:25:51,435 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:25:51,435 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:51,435 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:25:51,435 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:25:51 +08:00

2018-05-09 17:25:51,435 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:25:51,435 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:25:51,435 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:25:51 +08:00

2018-05-09 17:26:20,867 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:26:20 +08:00

2018-05-09 17:26:20,867 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:26:20,867 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:26:20,867 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:26:20,867 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:26:20 +08:00

2018-05-09 17:26:20,867 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:26:20,867 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:26:20,867 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:26:20 +08:00

2018-05-09 17:28:27,077 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,077 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:28:27,077 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,077 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:28:27,077 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 21 ms with result: SqlDataReader

2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,108 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,123 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,123 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,123 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:28:27,123 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '25' (Type = Int64)

2018-05-09 17:28:27,123 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:28:27,123 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,123 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: 1

2018-05-09 17:28:27,123 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,123 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:28:27,123 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:28:27,123 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:28:27,123 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '25' (Type = Int64)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '' (Type = String, Size = 100)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:26:33' (Type = DateTime2)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:28:27,123 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,123 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 3 ms with error: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。

2018-05-09 17:28:27,123 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,123 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,170 [10] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.Entity.Core.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。
   在 System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__174_0(Task`1 result)
   在 System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   在 System.Threading.Tasks.Task.Execute()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Utilities.TaskExtensions.CultureAwaiter`1.GetResult()
   在 System.Data.Entity.Core.Mapping.Update.Internal.DynamicUpdateCommand.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<ExecuteInTransactionAsync>d__3d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesToStoreAsync>d__39.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<ExecuteAsyncImplementation>d__9`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesInternalAsync>d__31.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.PlatformUserService.<ProvideAsync>d__5.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\PlatformUserService.cs:行号 401
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Controllers.GivingController.<Provide>d__15.MoveNext() 位置 F:\201804\IMS.SYS\Web\Controllers\GivingController.cs:行号 87
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,610 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:28:27,610 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:28:27,610 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 35 ms with result: SqlDataReader

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:27,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,688 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 40 ms with result: SqlDataReader

2018-05-09 17:28:27,688 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,688 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:28:27,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: SqlDataReader

2018-05-09 17:28:27,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:28:27,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:27,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:27,735 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:27,750 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:27 +08:00

2018-05-09 17:28:31,426 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,426 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:28:31,426 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:31,427 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:28:31,427 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,438 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:28:31,438 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:31,438 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,439 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,439 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:28:31,440 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:31,440 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:28:31,440 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,450 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:28:31,450 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:31,450 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,453 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,453 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,454 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:28:31,454 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '25' (Type = Int64)

2018-05-09 17:28:31,454 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:28:31,454 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,454 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 17:28:31,454 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:31,454 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:28:31,454 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:28:31,454 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:28:31,454 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '25' (Type = Int64)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '' (Type = String, Size = 100)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:28:31' (Type = DateTime2)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:28:31,455 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,464 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 8 ms with error: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。

2018-05-09 17:28:31,464 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:31,465 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:31 +08:00

2018-05-09 17:28:31,511 [10] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.Entity.Core.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。
   在 System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__174_0(Task`1 result)
   在 System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   在 System.Threading.Tasks.Task.Execute()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Utilities.TaskExtensions.CultureAwaiter`1.GetResult()
   在 System.Data.Entity.Core.Mapping.Update.Internal.DynamicUpdateCommand.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<ExecuteInTransactionAsync>d__3d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesToStoreAsync>d__39.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<ExecuteAsyncImplementation>d__9`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesInternalAsync>d__31.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.PlatformUserService.<ProvideAsync>d__5.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\PlatformUserService.cs:行号 401
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Controllers.GivingController.<Provide>d__15.MoveNext() 位置 F:\201804\IMS.SYS\Web\Controllers\GivingController.cs:行号 87
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-09 17:28:34,210 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,211 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:28:34,211 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,211 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:28:34,211 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,213 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:28:34,213 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,213 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,213 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,214 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:34,214 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,214 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:28:34,214 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,224 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:28:34,224 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,224 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:28:34,226 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:34,242 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,258 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:28:34,273 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '25' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '25' (Type = Int64)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '' (Type = String, Size = 100)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:28:34' (Type = DateTime2)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:28:34,289 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,305 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 2 ms with error: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。

2018-05-09 17:28:34,305 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:34,305 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:34 +08:00

2018-05-09 17:28:34,336 [10] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.Entity.Core.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。
   在 System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__174_0(Task`1 result)
   在 System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   在 System.Threading.Tasks.Task.Execute()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Utilities.TaskExtensions.CultureAwaiter`1.GetResult()
   在 System.Data.Entity.Core.Mapping.Update.Internal.DynamicUpdateCommand.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<ExecuteInTransactionAsync>d__3d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesToStoreAsync>d__39.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<ExecuteAsyncImplementation>d__9`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesInternalAsync>d__31.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.PlatformUserService.<ProvideAsync>d__5.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\PlatformUserService.cs:行号 401
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Controllers.GivingController.<Provide>d__15.MoveNext() 位置 F:\201804\IMS.SYS\Web\Controllers\GivingController.cs:行号 87
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-09 17:28:38,794 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,806 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:28:38,806 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,806 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:28:38,806 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,820 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 17:28:38,820 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,821 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,821 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,821 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:38,821 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,821 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:28:38,821 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,872 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 51 ms with result: SqlDataReader

2018-05-09 17:28:38,872 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,872 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,873 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,874 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:28:38,874 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,874 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:38,874 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,875 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:28:38,875 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,875 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,875 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,875 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:38,875 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,875 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:38,875 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,888 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:28:38,888 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,888 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,889 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,890 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:28:38,890 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,890 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:28:38,890 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,890 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:28:38,890 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,891 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,891 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,891 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:28:38,891 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,891 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:28:38,891 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:28:38,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,893 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,894 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:28:38,894 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,894 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:38,894 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,895 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:28:38,895 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,895 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,896 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,896 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:28:38,896 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,896 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:28:38,896 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,897 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:28:38,897 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,897 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,897 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,897 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:38,897 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,897 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:28:38,897 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,907 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:28:38,907 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,908 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,908 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,908 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:28:38,908 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,908 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:28:38,908 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,918 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:28:38,918 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,918 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,919 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,919 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:28:38,919 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,919 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:28:38,919 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,930 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:28:38,930 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,930 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,931 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,932 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:28:38,932 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,932 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:28:38,932 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,946 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 17:28:38,946 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,946 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,949 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,949 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,950 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:28:38,950 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '25' (Type = Int64)

2018-05-09 17:28:38,950 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:28:38,950 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,950 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 17:28:38,951 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,951 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:28:38,951 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:28:38,951 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:28:38,951 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,951 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 17:28:38,951 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,951 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:28:38,951 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,951 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:28:38,951 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:28:38,951 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:28:38,952 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:28:38,952 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:28:38,952 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:28:38,952 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:28:38,952 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:28:38,952 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '25' (Type = Int64)

2018-05-09 17:28:38,952 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '' (Type = String, Size = 100)

2018-05-09 17:28:38,952 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:28:38' (Type = DateTime2)

2018-05-09 17:28:38,952 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:28:38,952 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,953 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。

2018-05-09 17:28:38,953 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:28:38,954 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:28:38 +08:00

2018-05-09 17:28:38,997 [43] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.Entity.Core.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。
   在 System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__174_0(Task`1 result)
   在 System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   在 System.Threading.Tasks.Task.Execute()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Utilities.TaskExtensions.CultureAwaiter`1.GetResult()
   在 System.Data.Entity.Core.Mapping.Update.Internal.DynamicUpdateCommand.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<ExecuteInTransactionAsync>d__3d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesToStoreAsync>d__39.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<ExecuteAsyncImplementation>d__9`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesInternalAsync>d__31.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.PlatformUserService.<ProvideAsync>d__5.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\PlatformUserService.cs:行号 401
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Controllers.GivingController.<Provide>d__15.MoveNext() 位置 F:\201804\IMS.SYS\Web\Controllers\GivingController.cs:行号 87
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-09 17:29:13,103 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,103 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:29:13,104 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,104 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615661' (Type = String, Size = 4000)

2018-05-09 17:29:13,104 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,106 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:29:13,106 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,107 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,107 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,107 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:29:13,107 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,107 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:29:13,107 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,123 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-09 17:29:13,123 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,123 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,124 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,125 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:29:13,125 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,125 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:29:13,125 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,128 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:29:13,128 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,128 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,128 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,129 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:29:13,129 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,129 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:29:13,129 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,139 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:29:13,139 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,139 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,140 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,141 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:29:13,141 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,141 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:29:13,141 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:29:13,144 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,159 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:29:13,159 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,159 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,159 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,159 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:29:13,159 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,159 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:29:13,159 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,175 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 22 ms with result: SqlDataReader

2018-05-09 17:29:13,175 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,175 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,175 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,175 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:29:13,175 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,175 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:29:13,175 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,206 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 29 ms with result: SqlDataReader

2018-05-09 17:29:13,206 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,206 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,206 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,206 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:29:13,206 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,206 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:29:13,206 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,222 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:29:13,222 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,222 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,222 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,222 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,222 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:29:13,222 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '25' (Type = Int64)

2018-05-09 17:29:13,222 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:29:13,222 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: 1

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '170' (Type = Int64)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '3' (Type = Int64)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '3' (Type = Int64)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '25' (Type = Int64)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '5' (Type = String, Size = 100)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:29:13' (Type = DateTime2)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:29:13,237 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, @7, NULL, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '3' (Type = Int64)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '3' (Type = Int64)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '170' (Type = Int64)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '5' (Type = String, Size = 100)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:29:13' (Type = DateTime2)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:29:13,237 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:29:13,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:13,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Committed transaction at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:13,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:13 +08:00

2018-05-09 17:29:19,620 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,621 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:29:19,621 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:19,621 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:29:19,621 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,622 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:29:19,622 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:19,623 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,624 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,624 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:29:19,624 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:19,624 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,713 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 89 ms with result: SqlDataReader

2018-05-09 17:29:19,713 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:19,714 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,714 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,714 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:29:19,715 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:19,715 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,966 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 251 ms with result: SqlDataReader

2018-05-09 17:29:19,966 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:19,966 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,967 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,968 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 17:29:19,968 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:19,968 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:29:19,968 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:29:19,968 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,990 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 21 ms with result: SqlDataReader

2018-05-09 17:29:19,990 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:19,990 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,996 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,997 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:29:19,997 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:19,997 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:19 +08:00

2018-05-09 17:29:19,999 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:29:19,999 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,000 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,000 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,017 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:29:20,017 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,019 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:29:20,019 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:29:20,019 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:29:20,019 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:29:20,019 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,028 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:29:20,028 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,028 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,029 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,029 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:29:20,029 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,029 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:29:20,029 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:29:20,029 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:29:20,029 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:29:20,030 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,031 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:29:20,031 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,031 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,032 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,032 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:29:20,032 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,032 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:29:20,032 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:29:20,032 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,052 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 19 ms with result: SqlDataReader

2018-05-09 17:29:20,052 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,054 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,054 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,054 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:29:20,054 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,054 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:29:20,054 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,067 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:29:20,067 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,068 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,068 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,068 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:29:20,068 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,068 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:29:20,068 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,081 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:29:20,081 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,081 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,081 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,081 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:29:20,081 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,081 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:29:20,081 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:29:20 +08:00

2018-05-09 17:29:20,092 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:29:20,092 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:29:20,093 [37] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:29:20 +08:00

2018-05-09 17:34:16,215 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,216 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:34:16,216 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,216 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:34:16,216 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,219 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:34:16,219 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,219 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,220 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,220 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:34:16,220 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,220 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:34:16,220 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 26 ms with result: SqlDataReader

2018-05-09 17:34:16,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,247 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,247 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:34:16,248 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,248 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:34:16,248 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,252 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 17:34:16,252 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,252 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,253 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,253 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:34:16,253 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,253 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:34:16,253 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,265 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:34:16,265 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,265 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,266 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,266 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:34:16,266 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,266 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:34:16,266 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,268 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:34:16,268 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,268 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,276 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,277 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:34:16,277 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,277 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:34:16,277 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,278 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:34:16,278 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,278 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,279 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,279 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:34:16,279 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,279 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:34:16,279 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,287 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 17:34:16,287 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,287 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,288 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,288 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:34:16,288 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,288 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:34:16,288 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:34:16,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,306 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:34:16,306 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,306 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,306 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,306 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:34:16,306 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,306 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:34:16,306 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '20' (Type = Int64)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,337 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:34:16,337 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,337 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:34:16,337 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:34:16,337 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:34:16,337 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '20' (Type = Int64)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '55' (Type = String, Size = 100)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:34:16' (Type = DateTime2)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:34:16,337 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,337 [44] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 4 ms with error: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。

2018-05-09 17:34:16,337 [44] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:34:16,337 [44] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:34:16 +08:00

2018-05-09 17:34:16,368 [12] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.Entity.Core.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。
   在 System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__174_0(Task`1 result)
   在 System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   在 System.Threading.Tasks.Task.Execute()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Utilities.TaskExtensions.CultureAwaiter`1.GetResult()
   在 System.Data.Entity.Core.Mapping.Update.Internal.DynamicUpdateCommand.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<ExecuteInTransactionAsync>d__3d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesToStoreAsync>d__39.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<ExecuteAsyncImplementation>d__9`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesInternalAsync>d__31.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.PlatformUserService.<ProvideAsync>d__5.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\PlatformUserService.cs:行号 401
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Controllers.GivingController.<Provide>d__15.MoveNext() 位置 F:\201804\IMS.SYS\Web\Controllers\GivingController.cs:行号 87
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-09 17:36:25,302 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,303 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:36:25,303 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,303 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615612' (Type = String, Size = 4000)

2018-05-09 17:36:25,303 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,308 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 17:36:25,308 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,309 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,309 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,309 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:36:25,309 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,309 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:36:25,309 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 20 ms with result: SqlDataReader

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:36:25,322 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 20 ms with result: SqlDataReader

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '4' (Type = Int64, IsNullable = false)

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:36:25,353 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,369 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:36:25,369 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,369 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,369 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,369 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:36:25,369 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,369 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:36:25,369 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,385 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:36:25,385 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,385 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,385 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,385 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:36:25,385 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,385 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:36:25,385 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '20' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: 1

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '20' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '4' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '4' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '20' (Type = Int64)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '55' (Type = String, Size = 100)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:36:25' (Type = DateTime2)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:36:25,400 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 5 ms with error: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。

2018-05-09 17:36:25,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:36:25,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:36:25 +08:00

2018-05-09 17:36:25,447 [46] ERROR IMS.Web.App_Start.Filter.SYSExceptionFilter - 出现未处理异常：System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.Entity.Core.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: INSERT 语句与 FOREIGN KEY 约束"FK_T_Journals_T_IntegralTypes"冲突。该冲突发生于数据库"ims_db"，表"dbo.T_IntegralTypes", column 'Id'。
语句已终止。
   在 System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__174_0(Task`1 result)
   在 System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   在 System.Threading.Tasks.Task.Execute()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Utilities.TaskExtensions.CultureAwaiter`1.GetResult()
   在 System.Data.Entity.Core.Mapping.Update.Internal.DynamicUpdateCommand.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Data.Entity.Core.Mapping.Update.Internal.UpdateTranslator.<UpdateAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<ExecuteInTransactionAsync>d__3d`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesToStoreAsync>d__39.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<ExecuteAsyncImplementation>d__9`1.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Data.Entity.Core.Objects.ObjectContext.<SaveChangesInternalAsync>d__31.MoveNext()
   --- 内部异常堆栈跟踪的结尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Service.Service.PlatformUserService.<ProvideAsync>d__5.MoveNext() 位置 F:\201804\IMS.SYS\Service\Service\PlatformUserService.cs:行号 401
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 IMS.Web.Controllers.GivingController.<Provide>d__15.MoveNext() 位置 F:\201804\IMS.SYS\Web\Controllers\GivingController.cs:行号 87
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeAsynchronousActionMethod>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2018-05-09 17:41:49,191 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,192 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:41:49,192 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,192 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:41:49,192 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,197 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 17:41:49,197 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,198 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,200 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,201 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:41:49,201 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,201 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,215 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 17:41:49,215 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,215 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,223 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,223 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:41:49,223 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,223 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,285 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 61 ms with result: SqlDataReader

2018-05-09 17:41:49,285 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,285 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,291 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,292 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 17:41:49,292 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,292 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:41:49,292 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:41:49,292 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,297 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 17:41:49,297 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,297 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,300 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,300 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:41:49,300 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,300 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,309 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 17:41:49,309 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,311 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,312 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,312 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:41:49,312 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,312 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:41:49,312 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:41:49,312 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:41:49,312 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:41:49,312 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,316 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:41:49,316 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,316 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,317 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,317 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:41:49,317 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,318 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:41:49,318 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:41:49,318 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:41:49,318 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:41:49,318 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,325 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 17:41:49,325 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,325 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,326 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,330 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:41:49,330 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,330 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:41:49,330 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:41:49,330 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,335 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 17:41:49,335 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,335 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,336 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,336 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:41:49,336 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,336 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:41:49,336 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,505 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 168 ms with result: SqlDataReader

2018-05-09 17:41:49,506 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,506 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,506 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,506 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:41:49,506 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,506 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:41:49,506 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,660 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 153 ms with result: SqlDataReader

2018-05-09 17:41:49,660 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,660 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,660 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,660 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:41:49,660 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,661 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:41:49,661 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:41:49 +08:00

2018-05-09 17:41:49,678 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-09 17:41:49,678 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:41:49,678 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:41:49 +08:00

2018-05-09 17:42:10,799 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,815 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:42:10,815 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,815 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:42:10,815 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,831 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-09 17:42:10,831 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,831 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,831 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,831 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:42:10,831 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,831 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:42:10,831 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,843 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:42:10,843 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,843 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,843 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,843 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:42:10,843 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,843 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:42:10,843 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,843 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:42:10,843 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,843 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,847 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:42:10,847 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,847 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,847 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,847 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 17:42:10,847 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,847 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 17:42:10,847 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,847 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:42:10,863 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,863 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:42:10,863 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:42:10,863 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,863 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:42:10,863 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,863 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:42:10,863 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:42:10,863 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,863 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:42:10,863 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,879 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:42:10,879 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,879 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,879 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,879 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:42:10,879 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,879 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:42:10,879 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '20' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: 1

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '20' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '23' (Type = String, Size = 100)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:42:10' (Type = DateTime2)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, @7, NULL, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '5' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '5' (Type = Int64)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '23' (Type = String, Size = 100)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 17:42:10' (Type = DateTime2)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 17:42:10,910 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,925 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:42:10,925 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:10,925 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Committed transaction at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:10,941 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:10 +08:00

2018-05-09 17:42:14,260 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,261 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:42:14,261 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,261 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:42:14,261 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,311 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 52 ms with result: SqlDataReader

2018-05-09 17:42:14,311 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,311 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,311 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,311 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:42:14,311 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,311 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,327 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: SqlDataReader

2018-05-09 17:42:14,327 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,327 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,327 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,327 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:42:14,327 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,327 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:42:14,342 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,358 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:42:14,358 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,358 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,374 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,374 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:42:14,374 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,374 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:42:14,374 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:42:14,374 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:42:14,374 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:42:14,374 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,389 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 17:42:14,389 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,389 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:42:14,405 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,421 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:42:14,421 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,421 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,421 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,421 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:42:14,421 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,421 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:42:14,421 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,436 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:42:14,436 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,436 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,436 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,436 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:42:14,436 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,436 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:42:14,436 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,452 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: SqlDataReader

2018-05-09 17:42:14,452 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,452 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,452 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,452 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:42:14,452 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,452 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:42:14,452 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:42:14 +08:00

2018-05-09 17:42:14,467 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-09 17:42:14,467 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:42:14,467 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:42:14 +08:00

2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,334 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,350 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-09 17:43:04,350 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,350 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,350 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,366 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:43:04,366 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,366 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 63 ms with result: SqlDataReader

2018-05-09 17:43:04,428 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,428 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 17:43:04,428 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,428 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:43:04,428 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:43:04,428 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:43:04,428 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:43:04,444 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,459 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:43:04,459 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,459 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,459 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,459 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:43:04,459 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,459 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:43:04,459 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,475 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:43:04,475 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,475 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,475 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,475 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:43:04,475 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,475 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:43:04,475 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:04,491 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:43:04,491 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:04,491 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:04 +08:00

2018-05-09 17:43:25,729 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,729 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:43:25,729 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,729 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:43:25,729 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,731 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:43:25,731 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,732 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,733 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,733 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:43:25,733 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,734 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,749 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-09 17:43:25,749 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,749 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,750 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,750 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:43:25,750 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,750 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,765 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 17:43:25,765 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,765 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,765 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,868 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0))
    )  AS [GroupBy1]
2018-05-09 17:43:25,868 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,868 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:43:25,868 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:43:25,868 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:43:25,872 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,882 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:43:25,882 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,882 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,883 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,883 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:43:25,883 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,883 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,885 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:43:25,885 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,887 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,901 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,908 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0)) AND ([Extent1].[ToIntegralTypeId] = @p__linq__3) AND ([Extent1].[PlatformUserId] = @p__linq__4)
    )  AS [GroupBy1]
2018-05-09 17:43:25,908 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,908 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:43:25,908 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:43:25,908 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:43:25,908 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:43:25,908 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__4: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:43:25,908 [53] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,940 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 31 ms with result: SqlDataReader

2018-05-09 17:43:25,941 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,941 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,950 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,951 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0)) AND ([Extent1].[ToIntegralTypeId] = @p__linq__3) AND ([Extent1].[PlatformUserId] = @p__linq__4)
    )  AS [GroupBy1]
2018-05-09 17:43:25,951 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,951 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:43:25,951 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:43:25,951 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:43:25,951 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:43:25,951 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__4: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:43:25,951 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,954 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:43:25,954 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,954 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,955 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,960 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM  [dbo].[T_Journals] AS [Extent1]
            INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:43:25,960 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,960 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:43:25,961 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:43:25,961 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:43:25,961 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,966 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 17:43:25,966 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,970 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,970 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,970 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:43:25,970 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,970 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:43:25,970 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,988 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-09 17:43:25,988 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,988 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,988 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,988 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:43:25,988 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,988 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:43:25,988 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:25,999 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:43:25,999 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:25,999 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:25 +08:00

2018-05-09 17:43:26,000 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:43:26 +08:00

2018-05-09 17:43:26,000 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:43:26,000 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:26,000 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:43:26,000 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:43:26 +08:00

2018-05-09 17:43:26,011 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:43:26,011 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:43:26,011 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:43:26 +08:00

2018-05-09 17:44:53,819 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,819 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:44:53,819 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,819 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:44:53,819 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,819 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:44:53,819 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,819 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,834 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,850 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:44:53,850 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,850 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,850 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0)) AND ([Extent1].[CreateTime] >= @p__linq__3) AND ([Extent1].[CreateTime] <= @p__linq__4)
    )  AS [GroupBy1]
2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '2018/5/8 0:00:00' (Type = DateTime2)

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__4: '2018/5/10 0:00:00' (Type = DateTime2)

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,866 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0)) AND ([Extent1].[CreateTime] >= @p__linq__3) AND ([Extent1].[CreateTime] <= @p__linq__4) AND ([Extent1].[ToIntegralTypeId] = @p__linq__5) AND ([Extent1].[PlatformUserId] = @p__linq__6)
    )  AS [GroupBy1]
2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '2018/5/8 0:00:00' (Type = DateTime2)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__4: '2018/5/10 0:00:00' (Type = DateTime2)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__5: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__6: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM  [dbo].[T_Journals] AS [Extent1]
        INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0)) AND ([Extent1].[CreateTime] >= @p__linq__3) AND ([Extent1].[CreateTime] <= @p__linq__4) AND ([Extent1].[ToIntegralTypeId] = @p__linq__5) AND ([Extent1].[PlatformUserId] = @p__linq__6)
    )  AS [GroupBy1]
2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '2018/5/8 0:00:00' (Type = DateTime2)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__4: '2018/5/10 0:00:00' (Type = DateTime2)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__5: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__6: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,881 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM  [dbo].[T_Journals] AS [Extent1]
            INNER JOIN [dbo].[T_PlatformUsers] AS [Extent2] ON [Extent1].[ToPlatformUserId] = [Extent2].[Id]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND (([Extent2].[Mobile] = @p__linq__2) OR (1 = 0)) AND ([Extent1].[CreateTime] >= @p__linq__3) AND ([Extent1].[CreateTime] <= @p__linq__4)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '15615615666' (Type = String, Size = 4000)

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '2018/5/8 0:00:00' (Type = DateTime2)

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__4: '2018/5/10 0:00:00' (Type = DateTime2)

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:44:53,897 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:44:53,912 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,928 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:44:53,928 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:53,928 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:44:53,928 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:53,928 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:53 +08:00

2018-05-09 17:44:58,934 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,934 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:44:58,934 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,934 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:44:58,934 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,940 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 17:44:58,940 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,940 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,942 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,942 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:44:58,942 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,942 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,955 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:44:58,955 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,955 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,956 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,956 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:44:58,956 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,956 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,968 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 17:44:58,969 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,969 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,969 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,971 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[CreateTime] >= @p__linq__2) AND ([Extent1].[CreateTime] <= @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:44:58,971 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,971 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:44:58,971 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:44:58,971 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2018/5/8 0:00:00' (Type = DateTime2)

2018-05-09 17:44:58,971 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '2018/5/10 0:00:00' (Type = DateTime2)

2018-05-09 17:44:58,972 [61] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,974 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 17:44:58,974 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,975 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,976 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,976 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:44:58,976 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,976 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,977 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:44:58,977 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,977 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,979 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,984 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[CreateTime] >= @p__linq__2) AND ([Extent1].[CreateTime] <= @p__linq__3) AND ([Extent1].[ToIntegralTypeId] = @p__linq__4) AND ([Extent1].[PlatformUserId] = @p__linq__5)
    )  AS [GroupBy1]
2018-05-09 17:44:58,984 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,984 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:44:58,984 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:44:58,984 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2018/5/8 0:00:00' (Type = DateTime2)

2018-05-09 17:44:58,984 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '2018/5/10 0:00:00' (Type = DateTime2)

2018-05-09 17:44:58,985 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__4: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:44:58,985 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__5: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:44:58,985 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,989 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:44:58,989 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,989 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,989 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,990 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[CreateTime] >= @p__linq__2) AND ([Extent1].[CreateTime] <= @p__linq__3) AND ([Extent1].[ToIntegralTypeId] = @p__linq__4) AND ([Extent1].[PlatformUserId] = @p__linq__5)
    )  AS [GroupBy1]
2018-05-09 17:44:58,990 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,990 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:44:58,990 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:44:58,990 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2018/5/8 0:00:00' (Type = DateTime2)

2018-05-09 17:44:58,990 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '2018/5/10 0:00:00' (Type = DateTime2)

2018-05-09 17:44:58,990 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__4: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:44:58,990 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__5: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:44:58,990 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,991 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:44:58,991 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,992 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,992 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:58,995 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[CreateTime] >= @p__linq__2) AND ([Extent1].[CreateTime] <= @p__linq__3)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:44:58,995 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:58,995 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:44:58,995 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:44:58,995 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2018/5/8 0:00:00' (Type = DateTime2)

2018-05-09 17:44:58,995 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '2018/5/10 0:00:00' (Type = DateTime2)

2018-05-09 17:44:58,995 [62] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:44:58 +08:00

2018-05-09 17:44:59,002 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 17:44:59,002 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:44:59,002 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,017 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-09 17:44:59,017 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:59,017 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,017 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,017 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:44:59,017 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:59,017 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:44:59,017 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,033 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 17:44:59,033 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:59,033 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,033 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,033 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:44:59,033 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:59,033 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:44:59,033 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:44:59 +08:00

2018-05-09 17:44:59,048 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 17:44:59,048 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:44:59,048 [60] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:44:59 +08:00

2018-05-09 17:51:37,035 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:37 +08:00

2018-05-09 17:51:37,047 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-09 17:51:37,048 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:37,048 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:37 +08:00

2018-05-09 17:51:37,141 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 91 ms with result: 15

2018-05-09 17:51:37,141 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:37,142 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:37 +08:00

2018-05-09 17:51:37,449 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:37 +08:00

2018-05-09 17:51:38,331 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-09 17:51:38,331 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:38,333 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-09 17:51:38,333 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:38,335 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 2 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 17:51:38,335 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:38,336 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:38,338 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:38,339 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-09 17:51:38,339 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:38,339 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:38,340 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 17:51:38,340 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:38,341 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:38,491 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:38,634 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 17:51:38,635 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:38,635 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-09 17:51:38,635 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:38,644 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 17:51:38,644 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:38,724 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:38,735 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:38,776 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:51:38,776 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:38,776 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:51:38,776 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:38,778 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:51:38,778 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:38,804 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:38 +08:00

2018-05-09 17:51:39,077 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,080 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 17:51:39,080 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,080 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:51:39,080 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,081 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:51:39,081 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,083 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,085 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,085 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:51:39,085 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,085 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:51:39,085 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,086 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:39,086 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,086 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,095 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,104 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:51:39,104 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,105 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,105 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:39,105 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,106 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,107 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,108 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:51:39,108 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,108 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,108 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:39,108 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,108 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,122 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,135 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-09 17:51:39,135 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,136 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 17:51:39,136 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,137 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:51:39,137 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,146 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,146 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,148 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:51:39,148 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,148 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,148 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:39,148 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,148 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,164 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 17:51:39,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 17:51:39,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:51:39,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:51:39,181 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,187 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 17:51:39,187 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,196 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,197 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,198 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 17:51:39,198 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,198 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 17:51:39,198 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:51:39,198 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:51:39,198 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,203 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 17:51:39,204 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,204 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,213 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,260 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:51:39,260 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,260 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 17:51:39,260 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,264 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:51:39,264 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,275 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,279 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,290 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:51:39,290 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,290 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:51:39,290 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,291 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:39,291 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,295 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,296 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,297 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:51:39,297 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,297 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:51:39,297 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,302 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 17:51:39,302 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,302 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,303 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,303 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:51:39,303 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,303 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:51:39,303 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,303 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:39,303 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,304 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,304 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,304 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:51:39,304 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,304 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-09 17:51:39,304 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:39,304 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:39,304 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:39,304 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:39 +08:00

2018-05-09 17:51:42,708 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,728 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:51:42,728 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,728 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:51:42,728 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,730 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:51:42,730 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,730 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,731 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,731 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:51:42,731 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,731 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,736 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 17:51:42,736 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,736 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,737 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,737 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:51:42,737 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,737 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,737 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:42,737 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,737 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,737 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,739 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 17:51:42,739 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,739 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:51:42,739 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:51:42,739 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,740 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:42,740 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,740 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,740 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,741 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:51:42,741 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,741 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,741 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:42,741 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,741 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,741 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,744 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:51:42,744 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,744 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:51:42,744 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:51:42,744 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:51:42,744 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:51:42,744 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,745 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:42,745 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,745 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,745 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,745 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:51:42,746 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,746 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:51:42,746 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:51:42,746 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:51:42,746 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:51:42,746 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,746 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:42,746 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,746 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,746 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,749 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:51:42,749 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,749 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:51:42,749 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:51:42,749 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,749 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:42,749 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,751 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,751 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,751 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:51:42,751 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,751 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:51:42,751 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,751 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:42,751 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,752 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,752 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,752 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:51:42,752 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,752 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:51:42,752 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,752 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:42,752 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,752 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:51:42,753 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:51:42 +08:00

2018-05-09 17:51:42,754 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 17:51:42,754 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:51:42,754 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:51:42 +08:00

2018-05-09 17:59:19,575 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,576 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 17:59:19,576 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,576 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 17:59:19,576 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,579 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 17:59:19,579 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,579 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,580 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,581 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 17:59:19,581 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,581 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,627 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 46 ms with result: SqlDataReader

2018-05-09 17:59:19,627 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 17:59:19,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,628 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,657 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 28 ms with result: SqlDataReader

2018-05-09 17:59:19,657 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,657 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,657 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,657 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 17:59:19,657 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,658 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:59:19,658 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:59:19,658 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,672 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 17:59:19,672 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,672 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,673 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,673 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 17:59:19,673 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,673 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,684 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 17:59:19,684 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,685 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,685 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,685 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:59:19,685 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,685 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:59:19,685 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:59:19,685 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:59:19,685 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:59:19,686 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,687 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:59:19,687 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,687 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,688 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,688 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 17:59:19,688 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,688 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:59:19,688 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:59:19,688 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:59:19,688 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 17:59:19,688 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,690 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:59:19,690 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,690 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,690 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,691 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 17:59:19,691 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,691 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 17:59:19,691 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 17:59:19,691 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,692 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:59:19,692 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,693 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,693 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,710 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:59:19,710 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,710 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 17:59:19,710 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,758 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 48 ms with result: SqlDataReader

2018-05-09 17:59:19,758 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,759 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,759 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,759 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:59:19,759 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,759 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:59:19,759 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 25 ms with result: SqlDataReader

2018-05-09 17:59:19,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:59:19,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 17:59:19,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,819 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 34 ms with result: SqlDataReader

2018-05-09 17:59:19,819 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,819 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,819 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,819 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 17:59:19,819 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,819 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 17:59:19,819 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 17:59:19 +08:00

2018-05-09 17:59:19,821 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 17:59:19,821 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 17:59:19,822 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 17:59:19 +08:00

2018-05-09 18:05:36,685 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,685 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:05:36,685 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,685 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:05:36,685 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,689 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 18:05:36,689 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,690 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,690 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,691 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:05:36,691 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,691 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,694 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 18:05:36,694 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,694 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,694 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,695 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:05:36,695 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,695 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,696 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:05:36,696 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,696 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,696 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,697 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:05:36,697 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,697 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:05:36,697 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:05:36,697 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,699 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:05:36,699 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,699 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,699 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,700 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:05:36,700 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,700 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,702 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:05:36,702 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,702 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,702 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:05:36,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:05:36,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:05:36,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:05:36,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:05:36,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,706 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:05:36,706 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,706 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,706 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,707 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:05:36,707 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,707 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:05:36,707 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:05:36,707 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:05:36,707 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:05:36,707 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,707 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:05:36,707 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,707 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,708 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,708 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:05:36,709 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,709 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:05:36,709 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:05:36,709 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,712 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 18:05:36,713 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,713 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,713 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,713 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:05:36,713 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,713 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:05:36,713 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,715 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:05:36,715 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,715 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,715 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,715 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:05:36,715 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,715 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:05:36,715 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,716 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:05:36,716 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,717 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,717 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,717 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:05:36,717 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,717 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:05:36,717 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,717 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:05:36,717 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,718 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,718 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,718 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:05:36,718 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,718 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:05:36,718 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:05:36 +08:00

2018-05-09 18:05:36,718 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:05:36,718 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:05:36,718 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:05:36 +08:00

2018-05-09 18:06:51,261 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,261 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:06:51,261 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,261 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:06:51,261 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,265 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 18:06:51,265 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,266 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:06:51,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,273 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 18:06:51,273 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,274 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,274 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,274 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:06:51,274 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,274 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,276 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:06:51,277 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,277 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,277 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,277 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:06:51,277 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,277 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:06:51,277 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:06:51,277 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 18:06:51,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,290 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,291 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,291 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:06:51,291 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,291 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,302 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 18:06:51,302 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,302 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:06:51,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:06:51,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:06:51,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:06:51,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:06:51,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,315 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 18:06:51,315 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,315 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,315 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,316 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:06:51,316 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,316 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:06:51,316 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:06:51,316 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:06:51,316 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:06:51,316 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,317 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:06:51,317 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,317 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,317 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,318 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:06:51,319 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,319 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:06:51,319 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:06:51,319 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 18:06:51,322 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,323 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,323 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,323 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:06:51,323 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,323 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:06:51,323 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,326 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:06:51,326 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,326 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,326 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,326 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:06:51,326 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,326 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:06:51,326 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,327 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:06:51,327 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,328 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,328 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,328 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:06:51,328 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,328 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:06:51,328 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,328 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:06:51,328 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,329 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,329 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,329 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:06:51,329 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,329 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:06:51,329 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:06:51 +08:00

2018-05-09 18:06:51,329 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:06:51,329 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:06:51,329 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:06:51 +08:00

2018-05-09 18:07:46,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:07:46 +08:00

2018-05-09 18:07:46,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:07:46,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:46,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:07:46,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:07:46 +08:00

2018-05-09 18:07:46,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 37 ms with result: SqlDataReader

2018-05-09 18:07:46,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:46,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:46 +08:00

2018-05-09 18:07:46,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:07:46 +08:00

2018-05-09 18:07:46,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:07:46,998 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:46,998 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:07:46 +08:00

2018-05-09 18:07:47,073 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 74 ms with result: SqlDataReader

2018-05-09 18:07:47,073 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,073 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,073 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,074 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:07:47,074 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,074 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,115 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 41 ms with result: SqlDataReader

2018-05-09 18:07:47,115 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,115 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,116 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,116 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:07:47,116 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,116 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:07:47,116 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:07:47,116 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,194 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 78 ms with result: SqlDataReader

2018-05-09 18:07:47,194 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,195 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,195 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,195 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:07:47,195 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,195 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,252 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 56 ms with result: SqlDataReader

2018-05-09 18:07:47,252 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,252 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,252 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:07:47,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:07:47,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:07:47,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:07:47,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:07:47,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,300 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 46 ms with result: SqlDataReader

2018-05-09 18:07:47,300 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,300 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,300 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,301 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:07:47,301 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,301 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:07:47,301 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:07:47,301 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:07:47,301 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:07:47,301 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,344 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 42 ms with result: SqlDataReader

2018-05-09 18:07:47,344 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,344 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,344 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,344 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:07:47,345 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,345 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:07:47,345 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:07:47,345 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,405 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 60 ms with result: SqlDataReader

2018-05-09 18:07:47,405 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,405 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,405 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,406 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:07:47,406 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,406 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:07:47,406 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,417 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 18:07:47,417 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,417 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,417 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,417 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:07:47,417 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,417 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:07:47,417 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,424 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 18:07:47,424 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,424 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,425 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,425 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:07:47,425 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,425 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:07:47,425 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,461 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 36 ms with result: SqlDataReader

2018-05-09 18:07:47,461 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,461 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,462 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,462 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:07:47,462 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,462 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:07:47,462 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:07:47 +08:00

2018-05-09 18:07:47,495 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 33 ms with result: SqlDataReader

2018-05-09 18:07:47,495 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:07:47,496 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:07:47 +08:00

2018-05-09 18:08:53,774 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:08:53 +08:00

2018-05-09 18:08:53,774 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:08:53,774 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:53,774 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:08:53,774 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:08:53 +08:00

2018-05-09 18:08:53,836 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 62 ms with result: SqlDataReader

2018-05-09 18:08:53,836 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:53,837 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:53 +08:00

2018-05-09 18:08:53,837 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:08:53 +08:00

2018-05-09 18:08:53,837 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:08:53,837 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:53,838 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:08:53 +08:00

2018-05-09 18:08:53,945 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 106 ms with result: SqlDataReader

2018-05-09 18:08:53,945 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:53,945 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:53 +08:00

2018-05-09 18:08:53,945 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:08:53 +08:00

2018-05-09 18:08:53,945 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:08:53,946 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:53,946 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:08:53 +08:00

2018-05-09 18:08:54,053 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 107 ms with result: SqlDataReader

2018-05-09 18:08:54,053 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,053 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,053 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,054 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:08:54,054 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,054 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:08:54,054 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:08:54,054 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,149 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 95 ms with result: SqlDataReader

2018-05-09 18:08:54,149 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,149 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,150 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,150 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:08:54,150 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,150 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,291 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 141 ms with result: SqlDataReader

2018-05-09 18:08:54,291 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,292 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,292 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,292 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:08:54,292 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,293 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:08:54,293 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:08:54,293 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:08:54,293 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:08:54,293 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,413 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 120 ms with result: SqlDataReader

2018-05-09 18:08:54,413 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,414 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,414 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,414 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:08:54,414 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,414 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:08:54,414 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:08:54,414 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:08:54,414 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:08:54,415 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,496 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 81 ms with result: SqlDataReader

2018-05-09 18:08:54,496 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,496 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,496 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,497 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:08:54,497 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,497 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:08:54,497 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:08:54,497 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,501 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 18:08:54,501 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,501 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,501 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,501 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:08:54,501 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,501 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:08:54,501 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:08:54,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:08:54,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:08:54,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,504 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:08:54,504 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,504 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,504 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,504 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:08:54,504 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:08:54 +08:00

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:08:54,505 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:08:54,506 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:08:54 +08:00

2018-05-09 18:10:22,254 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,254 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:22,254 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,254 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:22,254 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,408 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 153 ms with result: SqlDataReader

2018-05-09 18:10:22,408 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,408 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,409 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,409 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:22,409 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,409 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,539 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 128 ms with result: SqlDataReader

2018-05-09 18:10:22,539 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,539 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,539 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,540 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:22,541 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,541 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,688 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 147 ms with result: SqlDataReader

2018-05-09 18:10:22,688 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,688 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,688 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,689 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:22,689 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,689 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:22,689 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:22,689 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,805 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 115 ms with result: SqlDataReader

2018-05-09 18:10:22,805 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,805 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,805 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,805 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:22,805 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,805 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,860 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 54 ms with result: SqlDataReader

2018-05-09 18:10:22,860 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,860 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:22,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:22,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:22,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:22,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:22,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,904 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 42 ms with result: SqlDataReader

2018-05-09 18:10:22,904 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,904 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,904 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,905 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:22,905 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,905 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:22,905 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:22,905 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:22,905 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:22,905 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,945 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 40 ms with result: SqlDataReader

2018-05-09 18:10:22,945 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,946 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,946 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,946 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:22,946 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,946 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:22,946 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:22,946 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,950 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 18:10:22,950 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:22,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:22,952 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,953 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:10:22,953 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,953 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,954 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,954 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:22,954 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,954 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:22,954 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,955 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:10:22,955 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,955 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,955 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,955 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:22,955 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,955 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:10:22,955 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,985 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 30 ms with result: SqlDataReader

2018-05-09 18:10:22,985 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,986 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,986 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,986 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:22,986 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,986 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:22,986 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:22,987 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:22,987 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:22,987 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:22 +08:00

2018-05-09 18:10:24,960 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,960 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:24,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:24,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:24,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:24,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:24,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:24,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:24,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,964 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:24,964 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,964 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:24,964 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:24,964 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,964 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:24,964 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,964 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,964 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:24,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:24,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:24,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:24,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:24,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:24,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:24,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:24,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,968 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:24,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:24,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:24,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,972 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:10:24,972 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,973 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,973 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,973 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:24,973 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:24,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:24,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:24,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:24,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:24,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:24,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:24 +08:00

2018-05-09 18:10:26,716 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,717 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:26,717 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,717 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:26,717 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,717 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:26,717 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,717 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,718 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,718 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:26,718 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,718 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,718 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:26,718 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,718 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,719 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,719 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:26,719 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,719 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,719 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:26,719 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,719 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,719 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,720 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:26,720 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,720 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:26,720 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:26,720 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,720 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:26,720 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,720 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,720 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,720 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:26,720 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,720 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,721 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:26,721 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,721 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,721 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,722 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:26,722 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,722 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:26,722 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:26,722 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:26,722 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:26,722 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,722 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:26,722 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,722 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:26,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:26,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:26,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:26,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:26,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,724 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:26,724 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,724 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,724 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,726 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:26,726 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,726 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:26,726 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:26,726 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:26,729 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:10:26,729 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:26,729 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:26 +08:00

2018-05-09 18:10:27,781 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,781 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:27,781 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,781 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:27,781 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,782 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:27,782 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,782 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,783 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,783 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:27,783 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,783 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,783 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:27,783 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,783 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,784 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,784 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:27,784 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,784 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,784 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:27,784 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,784 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,785 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,785 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:27,785 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,785 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:27,785 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:27,785 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:27,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:27,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,786 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:27,786 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,787 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,787 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,787 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:27,787 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,787 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:27,787 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:27,787 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:27,787 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:27,787 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,788 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:27,788 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,788 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,788 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,788 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:27,788 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,788 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:27,788 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:27,788 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:27,789 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:27,789 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,789 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:27,789 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,789 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,789 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,791 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:27,791 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,791 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:27,791 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:27,791 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:27,794 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 18:10:27,794 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:27,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:27 +08:00

2018-05-09 18:10:28,428 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,429 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:28,429 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,429 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:28,429 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,429 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:28,429 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,430 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,430 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,430 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:28,430 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,430 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,431 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:28,431 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,431 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,431 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,431 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:28,431 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,431 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,431 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:28,431 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,432 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,432 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,432 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:28,432 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,432 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:28,432 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:28,432 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,432 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:28,432 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:28,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,433 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:28,433 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,435 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,435 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,435 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:28,435 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,435 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:28,435 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:28,435 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:28,435 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:28,435 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:28,436 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,437 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:28,437 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,437 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,437 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,439 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 12
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:28,439 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,439 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:28,439 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:28,439 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:28,442 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 18:10:28,442 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:28,442 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:28 +08:00

2018-05-09 18:10:29,039 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,040 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:29,040 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,040 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:29,040 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,040 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,040 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,041 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,041 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,041 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:29,041 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,041 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,042 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,043 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:29,043 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,043 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:29,043 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:29,043 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:29,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,044 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,044 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,044 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,044 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,045 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:29,045 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,045 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:29,045 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:29,045 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,045 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,045 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,046 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:29,046 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,046 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:29,046 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:29,046 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,046 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,046 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,046 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,046 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,046 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,047 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,047 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:29,047 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,047 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:29,047 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:29,047 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,047 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,047 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,047 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,510 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,511 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:29,511 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,511 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:29,511 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,513 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:10:29,513 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,514 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,514 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,514 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:29,515 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,515 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,515 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,515 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,515 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,515 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,515 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:29,515 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,515 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,515 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,516 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,516 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,516 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,516 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:29,516 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,516 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:29,516 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:29,516 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,517 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,517 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,517 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,518 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,518 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:29,518 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,518 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,518 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,518 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,518 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,519 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,519 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:29,519 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,519 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:29,519 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:29,519 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,519 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,519 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,520 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,521 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,521 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,521 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,521 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,521 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:29,521 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,522 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:29,522 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:29,522 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,522 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,522 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,522 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,522 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,522 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,523 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,524 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,524 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,524 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:29,524 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,524 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:29,524 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:29,524 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:29,524 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:29,524 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:29 +08:00

2018-05-09 18:10:30,262 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,263 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:30,263 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,263 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:30,263 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,263 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:30,263 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,263 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,264 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,264 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:30,264 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,264 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,264 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:30,264 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:30,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:30,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,266 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,266 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,266 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:30,266 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,266 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:30,266 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:30,266 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,266 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:30,267 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,267 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,267 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,267 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:30,267 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,267 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,267 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:30,267 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,268 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,268 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,268 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:30,269 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,269 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:30,269 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:30,269 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:30,269 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:30,269 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,273 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 18:10:30,273 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,274 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,274 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,274 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:30,274 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,274 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:30,274 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:30,274 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:30,274 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:30,275 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,275 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:30,275 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,275 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,275 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,276 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:30,276 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,276 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:30,276 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:30,276 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,276 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:30,276 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,277 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,277 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,277 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:30,277 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,277 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:30,277 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,278 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:30,278 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,278 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,278 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,279 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:30,279 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,279 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:30,279 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,281 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:10:30,281 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,281 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,281 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,281 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:30,281 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,281 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:10:30,281 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,281 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:30,281 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,282 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,282 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,282 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:30,282 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,282 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:30,282 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:30,282 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:30,282 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:30,282 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:30 +08:00

2018-05-09 18:10:44,276 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,277 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:44,277 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,277 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:44,277 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,277 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,277 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,277 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,278 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,278 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:44,278 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,278 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,278 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,278 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,278 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,278 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,279 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:44,279 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,279 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,279 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,279 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,279 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,279 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,280 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:44,280 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,280 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:44,280 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:44,280 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,280 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,280 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,280 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,280 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,280 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:44,281 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,281 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,281 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,281 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,281 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,281 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,282 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:44,282 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,282 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:44,282 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:44,282 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,282 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,282 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,282 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,282 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,282 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,282 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,283 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:44,283 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,283 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:44,283 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:44,283 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,283 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,283 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,283 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,283 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,283 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,283 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,284 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:44,284 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,284 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:44,284 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:44,284 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,285 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,285 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,285 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,285 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,285 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:44,285 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,285 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,285 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,285 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,285 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,286 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,287 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:44,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:44,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,960 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,960 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,960 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:44,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:44,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:44,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:44,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:44,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,964 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,964 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,964 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,964 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,964 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:44,964 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,964 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,965 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,966 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:44,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:44,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:44,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,967 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,967 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,967 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:44,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:44,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:44,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:44,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:44,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:44,971 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:44,971 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:44,971 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:44 +08:00

2018-05-09 18:10:46,063 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,064 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:46,064 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,065 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:46,065 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,065 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,065 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,065 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,066 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,066 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:46,066 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,066 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,067 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,067 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,067 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,067 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,067 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:46,067 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,067 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,067 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,067 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,067 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,068 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,068 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:46,068 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,068 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:46,068 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:46,068 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,068 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,068 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,069 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,069 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,069 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:46,069 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,069 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,069 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,069 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,070 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,070 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,070 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:46,070 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,070 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:46,070 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:46,070 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,070 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,071 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,071 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,071 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,071 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,071 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,072 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:46,072 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,072 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:46,072 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:46,072 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,072 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,072 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,073 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,073 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,073 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,073 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,073 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:46,073 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,073 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:46,073 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:46,073 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,074 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,074 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,075 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,075 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,075 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:46,075 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,075 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,075 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,075 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,075 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,075 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,076 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:46,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,843 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:46,843 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,843 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:46,843 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,843 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,843 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,844 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,844 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,844 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:46,844 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,844 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:46,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,846 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,846 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:46,846 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,846 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:46,846 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:46,846 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,846 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,846 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,847 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,847 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,847 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:46,847 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,847 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,847 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,847 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,847 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,848 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,848 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:46,848 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,848 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:46,848 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:46,848 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,848 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,848 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,849 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,849 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,849 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,849 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,849 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:46,849 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,849 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:46,850 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:46,850 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,850 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,850 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,850 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,850 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,850 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,850 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,851 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:46,851 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,851 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:46,851 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:46,851 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,851 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,851 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,851 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,851 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,851 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,852 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,853 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,853 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,853 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:46,853 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,853 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:46,853 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:46,853 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:46,853 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:46,853 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:46 +08:00

2018-05-09 18:10:47,832 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,832 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:47,832 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,832 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:47,832 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,832 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,832 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,833 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,833 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,833 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:47,833 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,833 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,834 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,834 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,834 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,834 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,834 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:47,834 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,834 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,834 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,834 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,834 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,835 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,835 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:47,835 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,835 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:47,835 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:47,835 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,835 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,835 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,836 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,836 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,836 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:47,836 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,836 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,836 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,836 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,837 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,837 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,837 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:47,837 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,837 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:47,837 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:47,837 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:47,837 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:47,837 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,838 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,838 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,838 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,838 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,838 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:47,838 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,838 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:47,838 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:47,838 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:47,838 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:47,839 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,839 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,839 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,839 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,839 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,839 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:47,840 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,840 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:47,840 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:47,840 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,840 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,840 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,841 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,841 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,841 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:47,841 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,841 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:47,841 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,841 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,841 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,842 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:47,843 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:47 +08:00

2018-05-09 18:10:48,668 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,668 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:10:48,668 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,668 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:10:48,668 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,668 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,669 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,669 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,669 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,669 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:10:48,669 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,669 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,670 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,670 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,670 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,670 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,670 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:10:48,670 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,670 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,670 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,670 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,670 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,671 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,671 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:10:48,671 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,671 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:48,671 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:48,671 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,671 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,671 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,672 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,672 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,672 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:10:48,672 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,672 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,672 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,672 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,673 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,673 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,673 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:48,673 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,673 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:48,673 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:48,673 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:48,673 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:48,673 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,674 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,674 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,674 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,674 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,675 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:10:48,675 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,675 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:48,675 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:48,675 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:48,675 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:10:48,675 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,675 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,675 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,675 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,675 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:10:48,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:10:48,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:10:48,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,676 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,676 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,676 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,676 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,677 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,678 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,678 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,678 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,678 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:10:48,678 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,678 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:10:48,678 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:10:48 +08:00

2018-05-09 18:10:48,678 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:10:48,678 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:10:48,678 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:10:48 +08:00

2018-05-09 18:11:19,618 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,618 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:11:19,618 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,618 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:11:19,618 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,620 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:11:19,620 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,620 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,621 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,621 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:11:19,621 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,621 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,622 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:11:19,622 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,623 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,623 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,623 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:11:19,623 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,623 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,624 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:11:19,624 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,624 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,624 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:11:19,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:19,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:19,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,627 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:11:19,627 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,627 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,627 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,628 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:11:19,628 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,628 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:11:19,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,629 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:11:19,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:19,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:19,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:11:19,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:11:19,630 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,632 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:11:19,632 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,633 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,633 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,633 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:11:19,633 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,633 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:19,633 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:19,633 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:19,633 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:11:19,633 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,634 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:19,634 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,634 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,634 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,634 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:11:19,634 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,634 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:19,634 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:19,634 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:11:19,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:19,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:11:19,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 18:11:19,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,640 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,640 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,640 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:19,640 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,640 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:19,640 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,641 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:19,641 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,641 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,641 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,641 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:19,641 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,641 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:11:19,641 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:19,642 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:19 +08:00

2018-05-09 18:11:20,771 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,771 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:11:20,771 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,771 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:11:20,771 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,772 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:20,772 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,772 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,773 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,773 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:11:20,773 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,773 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,773 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:20,773 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,774 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,774 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,774 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:11:20,774 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,774 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,774 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:20,774 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,774 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,775 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,775 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:11:20,775 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,775 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:20,775 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:20,775 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,775 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:20,775 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,775 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,776 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,776 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:11:20,776 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,776 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,776 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:20,776 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:11:20,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:20,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:20,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:11:20,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:11:20,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,778 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:20,778 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,778 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:11:20,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:20,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:20,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:20,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:11:20,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:20,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:11:20,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:20,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:20,780 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,782 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:11:20,782 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,783 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,783 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,783 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:20,783 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,783 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:11:20,783 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,783 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:20,783 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:20,784 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:20,785 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:20,785 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:20,785 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:20 +08:00

2018-05-09 18:11:21,596 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,596 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:11:21,596 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,596 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:11:21,596 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,597 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:21,597 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,597 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,598 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,598 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:11:21,598 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,598 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,598 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:21,598 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,598 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,598 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:11:21,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:21,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:11:21,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,599 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:21,600 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:21,600 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,600 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:21,600 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,600 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,600 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,601 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:11:21,601 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,601 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,601 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:21,601 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,601 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,601 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,602 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:11:21,602 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,602 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:21,602 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:21,602 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:11:21,602 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:11:21,602 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,602 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:21,602 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,602 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,603 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,603 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:11:21,603 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,603 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:21,603 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:21,603 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:21,603 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:11:21,603 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,603 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:21,603 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,603 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,604 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,604 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:11:21,604 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,604 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:21,604 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:21,604 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:21,607 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 18:11:21,607 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:21,607 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:21 +08:00

2018-05-09 18:11:22,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:11:22,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:11:22,329 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,330 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:22,330 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,330 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,331 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,331 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:11:22,331 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,331 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,331 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:22,331 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,331 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,331 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:22,332 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,333 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:22,333 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,333 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,333 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,333 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:11:22,333 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,334 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,334 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:22,334 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,334 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,335 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,335 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:11:22,335 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,335 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:22,335 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:22,335 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:11:22,335 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:11:22,335 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,336 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:22,336 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,336 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,336 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,336 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:11:22,337 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,337 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:22,337 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:22,337 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:22,337 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:11:22,337 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,337 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:22,337 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,337 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,337 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:11:22,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:22,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:22,338 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:22,343 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 18:11:22,343 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:22,343 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:22 +08:00

2018-05-09 18:11:23,371 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,371 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:11:23,371 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,371 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:11:23,371 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,371 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,371 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,372 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,373 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,373 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:11:23,373 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,373 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,374 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,374 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,374 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,374 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,374 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:11:23,374 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,374 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,374 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,374 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,374 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,375 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,375 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:11:23,375 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,375 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:23,375 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:23,375 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,375 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,375 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,375 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:11:23,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,376 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,376 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,376 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,377 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,377 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:11:23,377 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,377 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:23,377 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:23,377 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:11:23,377 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:11:23,377 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,377 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,377 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,378 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,378 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,378 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:11:23,378 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,378 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:23,378 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:23,378 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:23,378 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:11:23,378 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,379 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,379 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,379 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,379 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,379 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:11:23,379 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,379 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:11:23,379 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:11:23,379 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,380 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,380 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,380 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,380 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,380 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:23,380 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,380 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:11:23,380 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,381 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:11:23 +08:00

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:11:23,382 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:11:23,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:11:23 +08:00

2018-05-09 18:12:09,451 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,452 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:12:09,452 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,452 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:12:09,452 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,502 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 50 ms with result: SqlDataReader

2018-05-09 18:12:09,502 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,503 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,503 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,503 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:12:09,503 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,503 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,587 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 83 ms with result: SqlDataReader

2018-05-09 18:12:09,587 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,587 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,588 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,588 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:12:09,588 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,588 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,646 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 58 ms with result: SqlDataReader

2018-05-09 18:12:09,646 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,646 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,646 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,647 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:12:09,647 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,647 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:09,647 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:09,647 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,702 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 55 ms with result: SqlDataReader

2018-05-09 18:12:09,702 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:12:09,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,703 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,881 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 177 ms with result: SqlDataReader

2018-05-09 18:12:09,881 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,881 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,881 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,882 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:12:09,882 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,882 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:09,882 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:09,882 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:12:09,882 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:12:09,882 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,942 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 59 ms with result: SqlDataReader

2018-05-09 18:12:09,942 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,942 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,942 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:09,943 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:12:09,943 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:09,943 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:09,943 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:09,943 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:12:09,943 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:12:09,943 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:09 +08:00

2018-05-09 18:12:10,008 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 64 ms with result: SqlDataReader

2018-05-09 18:12:10,008 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,008 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,008 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,008 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:12:10,009 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,009 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:10,009 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:10,009 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,065 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 56 ms with result: SqlDataReader

2018-05-09 18:12:10,065 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,065 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,066 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,066 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:10,066 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,066 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:12:10,066 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,102 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 35 ms with result: SqlDataReader

2018-05-09 18:12:10,102 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,102 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,102 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,102 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:10,102 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,102 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:12:10,102 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,154 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 51 ms with result: SqlDataReader

2018-05-09 18:12:10,154 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,154 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,154 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,154 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:10,154 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,154 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:12:10,154 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,197 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 43 ms with result: SqlDataReader

2018-05-09 18:12:10,197 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:10,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:12:10,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:10,233 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 35 ms with result: SqlDataReader

2018-05-09 18:12:10,233 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:10,234 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:10 +08:00

2018-05-09 18:12:11,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:12:11,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:12:11,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,220 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,220 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,220 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,221 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,221 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:12:11,221 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,221 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,221 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,221 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,221 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:12:11,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,223 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:12:11,223 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,223 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:11,223 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:11,223 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,223 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,223 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,223 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,224 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,224 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:12:11,224 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,224 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,224 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,224 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,224 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,225 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,225 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:12:11,225 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,225 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:11,225 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:11,225 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:12:11,225 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:12:11,225 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,225 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,225 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,226 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,226 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,226 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:12:11,226 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,226 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:11,226 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:11,226 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:12:11,226 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:12:11,226 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,227 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,227 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,227 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,227 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,227 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:12:11,227 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,227 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:11,227 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:11,227 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,228 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,228 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,228 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,228 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,228 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:11,228 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,228 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,229 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:11,230 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:11,231 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:11 +08:00

2018-05-09 18:12:12,184 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,184 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:12:12,184 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,184 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:12:12,184 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,185 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:12,185 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,185 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,186 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,186 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:12:12,186 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,186 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,187 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:12,187 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,187 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,187 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,187 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:12:12,187 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,187 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,188 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:12,188 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,188 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,188 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,188 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:12:12,188 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,188 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:12,188 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:12,188 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,189 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:12,189 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,189 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,189 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,190 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:12:12,190 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,190 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,190 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:12,190 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,190 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,191 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,191 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:12:12,191 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,191 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:12,191 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:12,191 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:12:12,191 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:12:12,191 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 18:12:12,192 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,193 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:12,193 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,193 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,193 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,193 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 18:12:12,193 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,194 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:12,194 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:12,194 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,196 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 18:12:12,196 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,197 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,197 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,197 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:12,197 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,197 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 18:12:12,197 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,197 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:12,197 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:12,198 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:12,199 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:12 +08:00

2018-05-09 18:12:13,073 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,073 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 18:12:13,074 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:13,074 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 18:12:13,074 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,074 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:13,074 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:13,075 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,075 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,076 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 18:12:13,076 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:13,076 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,076 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:13,076 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:13,076 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,076 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,076 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 18:12:13,076 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:13,076 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,077 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:13,077 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:13,077 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,077 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,077 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 18:12:13,077 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:13,077 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 18:12:13,077 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 18:12:13,077 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,078 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:13,078 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:13,078 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,078 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,078 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 18:12:13,078 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:13,078 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,079 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 18:12:13,079 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 18:12:13,079 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,079 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 18:12:13 +08:00

2018-05-09 18:12:13,080 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
