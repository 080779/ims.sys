2018-05-15 14:03:24,489 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,499 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:03:24,500 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,500 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:03:24,500 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,502 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:03:24,502 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,502 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,502 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,502 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:03:24,502 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,503 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:03:24,503 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,503 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:03:24,503 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,503 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:03:24,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:03:24,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:03:24,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'积分增加' <> [Extent1].[Name])
2018-05-15 14:03:24,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:03:24,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:03:24,507 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:03:24 +08:00

2018-05-15 14:03:24,508 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:03:24,508 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:03:24,508 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:03:24 +08:00

2018-05-15 14:05:35,338 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,338 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:05:35,338 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,338 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,340 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:35,340 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,340 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,340 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,340 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:05:35,340 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,341 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,342 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:35,342 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,342 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,342 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,343 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:05:35,343 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,343 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:35,343 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,345 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:05:35,345 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,345 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,346 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,346 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:05:35,346 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,346 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,348 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:35,348 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,348 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,349 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,349 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:05:35,349 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,349 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:35,349 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,349 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,349 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,352 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:05:35,352 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,352 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,353 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,353 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:05:35,353 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,353 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:35,353 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,353 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,353 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,354 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:35,354 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,354 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,354 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,355 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:05:35,355 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,355 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:35,355 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,359 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:05:35,359 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,360 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,360 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,360 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:35,360 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,360 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,360 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,361 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:35,361 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,362 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,362 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,362 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:35,362 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,362 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,362 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,363 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:35,363 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,364 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,364 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,364 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:35,364 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,364 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,364 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,364 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:35,364 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,364 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,365 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,365 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'积分增加' <> [Extent1].[Name])
2018-05-15 14:05:35,365 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,365 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,367 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:35,367 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,367 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,368 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,368 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:05:35,368 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,368 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,368 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,369 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:35,370 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,370 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,370 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,370 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:35,370 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,370 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,370 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,371 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:35,371 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,371 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,949 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,950 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:05:35,950 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,950 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:05:35,950 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,951 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:35,951 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,952 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,952 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:05:35,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,956 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:35,956 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,956 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,956 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,956 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:05:35,956 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,956 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,957 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:35,957 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,957 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,957 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,957 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:05:35,957 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,957 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:35,957 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:05:35,957 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,960 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:05:35,960 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,960 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,960 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,961 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:05:35,961 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,961 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,961 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:35,961 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,962 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,962 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,962 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:05:35,962 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,962 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:35,962 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:05:35,962 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,962 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,962 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,966 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:05:35,967 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,967 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,967 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,967 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:05:35,967 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:35,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:05:35,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,968 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,969 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:35,969 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,969 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,969 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,970 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:05:35,970 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,970 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:35,970 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:05:35,970 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,973 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:05:35,973 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,973 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,973 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,973 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,974 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:35,975 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,975 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,975 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,975 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:35,975 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,975 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:35,975 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:35,975 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:35,975 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:35,975 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:35 +08:00

2018-05-15 14:05:36,758 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,759 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:05:36,759 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,759 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-15 14:05:36,759 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,759 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:36,759 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,759 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,760 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,760 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:05:36,760 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,760 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,761 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:36,761 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,761 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,761 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,761 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:05:36,761 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,761 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,761 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:36,761 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,762 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,762 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,762 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:05:36,762 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,762 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:36,762 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:05:36,762 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,763 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:36,763 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,763 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,763 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,763 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:05:36,763 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,763 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,764 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:36,764 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,764 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,764 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,764 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:05:36,764 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,765 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:36,765 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:05:36,765 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:36,765 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:36,765 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,767 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:05:36,767 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,767 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,768 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,769 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:05:36,769 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,769 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:36,769 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:05:36,769 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:36,769 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:36,769 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,769 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:36,769 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,769 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,770 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,770 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:05:36,770 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,770 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:36,770 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:05:36,770 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,771 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:36,771 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,771 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,771 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,771 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:36,771 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,771 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:36,771 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,772 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:36,772 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,772 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,772 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,772 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:36,772 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,772 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:36,772 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,773 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:36,773 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,773 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,773 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,773 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:36,773 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,773 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-15 14:05:36,773 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:36,774 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:36,774 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:36,774 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:36 +08:00

2018-05-15 14:05:38,880 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,880 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:05:38,880 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,880 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-15 14:05:38,880 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,881 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:38,881 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,881 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,882 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,882 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:05:38,883 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,883 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,883 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:38,883 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,883 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,884 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,884 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:05:38,884 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,884 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,884 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:38,884 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,884 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,885 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,885 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:05:38,885 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,885 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:38,885 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:05:38,885 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,885 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:38,885 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,886 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,886 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,886 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:05:38,886 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,886 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,887 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:38,887 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,887 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,887 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,888 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:05:38,888 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,888 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:38,888 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:05:38,888 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:38,888 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:38,888 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,888 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:38,888 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,889 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,889 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,889 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:05:38,889 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,889 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:38,889 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:05:38,889 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:38,889 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:38,889 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,890 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:38,890 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,890 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,890 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,891 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:05:38,891 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,891 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:38,891 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:05:38,891 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,892 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:38,892 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,892 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,892 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,892 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:38,892 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,892 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:38,892 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,893 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:38,893 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,893 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,893 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,893 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:38,893 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,893 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:38,893 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:38,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:38,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-15 14:05:38,894 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:38,895 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:38,895 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:38,895 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:38 +08:00

2018-05-15 14:05:39,375 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,375 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:05:39,375 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,375 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:05:39,375 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,401 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 26 ms with result: SqlDataReader

2018-05-15 14:05:39,401 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,402 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,402 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,402 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:05:39,403 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,403 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,403 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,403 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,403 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,403 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,403 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:05:39,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,405 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,405 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,405 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,405 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:05:39,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,407 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:05:39,407 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,407 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:39,407 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:05:39,407 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,407 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,407 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,407 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,407 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,408 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,412 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:05:39,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:39,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:05:39,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,415 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:05:39,415 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,415 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:39,415 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:05:39,415 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:39,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,417 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:39,417 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,418 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,419 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:39,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,421 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,781 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,781 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:05:39,781 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,781 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,783 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:39,783 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,783 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,783 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,783 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:05:39,783 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,783 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,784 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,784 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,784 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,784 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,784 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:05:39,784 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,784 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:39,784 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,786 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:39,786 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,786 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,787 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,787 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:05:39,787 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,787 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,787 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,787 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,788 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,788 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,788 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:05:39,788 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,788 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:39,788 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,788 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,788 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,789 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,789 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,789 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,789 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,790 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:05:39,790 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,790 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:39,790 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,790 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,790 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,790 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,790 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,790 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,791 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,791 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:05:39,791 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,791 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:05:39,791 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,791 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,791 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,792 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,792 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,792 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:39,792 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,792 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,792 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,792 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,792 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,792 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,793 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,793 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:39,793 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,793 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,793 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,794 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:05:39,794 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,794 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,794 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,794 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:39,794 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,794 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,794 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,795 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,795 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,795 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,795 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,795 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'积分增加' <> [Extent1].[Name])
2018-05-15 14:05:39,795 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,795 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,796 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,796 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,796 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,796 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,797 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:05:39,797 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,797 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,797 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,797 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,797 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,797 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,798 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,798 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:05:39,798 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,798 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:05:39,798 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:05:39 +08:00

2018-05-15 14:05:39,798 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:05:39,798 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:05:39,798 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:05:39 +08:00

2018-05-15 14:20:51,904 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:51 +08:00

2018-05-15 14:20:51,904 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-15 14:20:51,904 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:51,904 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:51 +08:00

2018-05-15 14:20:51,919 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: 15

2018-05-15 14:20:51,919 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:51,919 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:51 +08:00

2018-05-15 14:20:52,013 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:52 +08:00

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:52 +08:00

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:52 +08:00

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:52 +08:00

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:52 +08:00

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:52,863 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:52 +08:00

2018-05-15 14:20:53,019 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,160 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:20:53,160 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,160 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-15 14:20:53,160 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,160 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:20:53,160 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,222 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,238 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,269 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:20:53,269 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,269 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,269 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,269 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:20:53,269 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,316 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,481 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,482 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:20:53,482 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,483 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,483 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,484 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:20:53,484 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,485 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,486 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,487 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:20:53,487 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,487 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,487 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,487 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:20:53,487 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,487 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,497 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,504 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:20:53,504 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,504 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,506 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:20:53,506 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,508 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,508 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,509 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:20:53,509 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,509 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,510 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:20:53,510 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,510 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,523 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,535 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:20:53,535 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,535 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:20:53,535 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,541 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-15 14:20:53,541 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,549 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,550 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,551 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:20:53,551 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,551 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,555 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:20:53,555 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,555 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,569 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,585 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:20:53,585 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,585 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:20:53,585 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,585 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,585 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,587 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:20:53,587 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,595 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,596 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,597 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:20:53,597 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,597 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:20:53,597 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,597 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,597 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,597 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:20:53,597 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,597 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,605 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,640 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:20:53,640 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,640 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:20:53,640 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,643 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:20:53,643 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,653 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,656 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:20:53,666 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,666 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,666 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,667 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:20:53,667 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,670 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,671 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,673 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:20:53,673 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,673 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,673 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,675 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:20:53,676 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,676 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,677 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,678 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:20:53,678 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,678 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,678 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,679 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:20:53,679 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,680 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,680 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,680 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:20:53 +08:00

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:20:53,681 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:20:53,682 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:20:53 +08:00

2018-05-15 14:21:56,466 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:56 +08:00

2018-05-15 14:21:56,481 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-15 14:21:56,481 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:56,481 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:56 +08:00

2018-05-15 14:21:56,497 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: 15

2018-05-15 14:21:56,497 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:56,497 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:56 +08:00

2018-05-15 14:21:56,591 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:56 +08:00

2018-05-15 14:21:57,409 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-15 14:21:57,409 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:57,424 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:57,596 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:57,721 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:21:57,721 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:57,721 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-15 14:21:57,721 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:57,721 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:21:57,721 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:57,799 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:57,799 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:57,830 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:21:57,830 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:57,830 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:21:57,830 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:57,830 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:21:57,830 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:57,877 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:57 +08:00

2018-05-15 14:21:58,030 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,031 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:21:58,032 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,032 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,032 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,034 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:21:58,034 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,034 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,036 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,036 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:21:58,036 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,036 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,036 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,036 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:21:58,037 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,037 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,046 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,053 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:21:58,053 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,053 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,054 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:21:58,055 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,057 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,057 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,058 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:21:58,058 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,058 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,059 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:21:58,059 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,059 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,071 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,083 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:21:58,083 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,084 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:21:58,084 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,088 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:21:58,088 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,096 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,097 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,098 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:21:58,098 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,098 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,102 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:21:58,102 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,102 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,116 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,131 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:21:58,131 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,131 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:21:58,131 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,131 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,131 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,135 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:21:58,135 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,143 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,143 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,144 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:21:58,144 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,144 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:21:58,144 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,144 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,144 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,145 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:21:58,145 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,145 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,152 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,184 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:21:58,184 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,184 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:21:58,184 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,187 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:21:58,187 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,196 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,199 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,208 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:21:58,208 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,208 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,208 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,209 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:21:58,209 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,213 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,214 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,215 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:21:58,215 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,215 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,215 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,216 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:21:58,216 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,217 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,217 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,218 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:21:58,218 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,218 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,218 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,219 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:21:58,219 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,220 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:21:58 +08:00

2018-05-15 14:21:58,221 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:21:58,222 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:21:58,222 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:21:58 +08:00

2018-05-15 14:22:32,592 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,602 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:22:32,602 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,602 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-15 14:22:32,602 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,606 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:22:32,606 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,607 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,607 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,608 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:22:32,608 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,608 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,608 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:32,608 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,608 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,609 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,609 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:22:32,609 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,609 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,609 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:32,609 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,610 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,610 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,611 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:22:32,611 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,611 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:32,612 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:22:32,612 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,614 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:32,614 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,614 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,614 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:22:32,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,615 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,616 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:32,616 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,616 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,616 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:22:32,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:32,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:22:32,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:32,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:32,618 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:32,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:22:32,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:32,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:22:32,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:32,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:32,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:32,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,623 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,627 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:22:32,627 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,627 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:32,627 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:22:32,627 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,631 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:22:32,631 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,631 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,632 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,632 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:32,632 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,632 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:32,632 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,634 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:32,634 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,635 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,635 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,635 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:32,635 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,635 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:32,635 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,635 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:32,635 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,635 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,635 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,636 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:32,636 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,636 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-15 14:22:32,636 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:32,636 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:32,636 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:32,636 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:32 +08:00

2018-05-15 14:22:33,864 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,864 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:22:33,864 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:22:33,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,865 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:33,865 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,865 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,866 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,866 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:22:33,866 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,866 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:33,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:22:33,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,868 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:33,868 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,868 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,868 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,868 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:22:33,868 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,868 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:33,868 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:33,868 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,869 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:33,869 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,869 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,869 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,870 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:22:33,870 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,870 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,871 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:33,871 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,871 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,871 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,875 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:22:33,876 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,876 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:33,876 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:33,876 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:33,876 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:33,876 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,878 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:33,878 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,878 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,879 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,879 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:22:33,879 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,879 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:33,879 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:33,879 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:33,879 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:33,879 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,880 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:33,880 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,880 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,880 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,883 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:22:33,884 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,884 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:33,884 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:33,884 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:22:33,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,888 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,889 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,889 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:33,889 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,889 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:33,889 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,890 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,891 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:33,891 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,891 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:33,891 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:33,891 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:33,891 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:33,891 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:33 +08:00

2018-05-15 14:22:43,694 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,694 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:22:43,694 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,694 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-15 14:22:43,694 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,695 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:43,695 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,695 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,696 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,696 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:22:43,696 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,696 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,696 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:43,696 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,696 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,696 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:43,697 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:22:43,698 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,698 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:43,698 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,698 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,698 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,698 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:22:43,698 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,698 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,699 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:43,699 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,699 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,699 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,700 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:22:43,700 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,700 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:43,700 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:22:43,700 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:43,700 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:43,700 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,700 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:43,700 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,700 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,701 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,701 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:22:43,701 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,701 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:43,701 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:22:43,701 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:43,701 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:43,701 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,702 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:43,702 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,702 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,702 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,702 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:22:43,702 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,702 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:43,702 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:22:43,702 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,703 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:43,703 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,703 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:43,704 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,705 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:43,705 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,705 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,705 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,705 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:43,705 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,705 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-15 14:22:43,705 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:43,706 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:43,706 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:43,707 [57] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:43 +08:00

2018-05-15 14:22:44,166 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,167 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:22:44,167 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,167 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:22:44,167 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,169 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:44,169 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,169 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,170 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,170 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:22:44,170 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,170 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,173 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:44,173 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,173 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,173 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,174 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:22:44,174 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,174 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,175 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:44,175 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,175 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,175 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,176 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:22:44,176 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,176 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:44,176 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:44,176 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,178 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:44,178 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,179 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,179 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,179 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:22:44,179 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,179 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,181 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:44,181 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,181 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,181 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,182 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:22:44,182 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,182 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:44,182 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:44,182 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,182 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,182 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,186 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:22:44,186 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,186 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,187 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,187 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:22:44,187 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,187 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:44,187 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:44,187 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,187 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,187 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,190 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:44,190 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,190 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,190 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,191 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:22:44,191 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,191 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:44,191 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:44,191 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,195 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:22:44,195 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,195 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,195 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,195 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:44,196 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,196 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,196 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,197 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:44,197 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,197 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,197 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,197 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:44,197 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,197 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,197 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,198 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:44,198 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,198 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,198 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,199 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:44,199 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,199 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,199 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,199 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:44,199 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,199 [55] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,704 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,705 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:22:44,705 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,705 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,705 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:44,705 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,705 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,705 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,705 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:22:44,706 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,706 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:22:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,710 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:44,710 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,710 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,710 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,711 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:22:44,711 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,711 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,713 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:44,713 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,713 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,713 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,714 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:22:44,714 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,714 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:44,714 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,714 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,714 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,716 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:44,716 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,716 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,716 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,718 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:22:44,718 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,718 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:44,718 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,718 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,718 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,719 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:44,719 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,719 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,720 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,721 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:22:44,721 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,721 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:44,721 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,725 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:22:44,725 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,725 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,726 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,726 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:44,726 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,726 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,726 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,728 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:44,728 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,728 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,728 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,728 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:44,728 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,728 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,728 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,730 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:44,730 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,730 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,730 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,730 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:44,730 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,730 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,730 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,731 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:44,731 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,731 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,733 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,737 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'积分增加' <> [Extent1].[Name])
2018-05-15 14:22:44,737 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,737 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,740 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:44,740 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,740 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,742 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,742 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:22:44,742 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,742 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,743 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,746 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:22:44,746 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:44,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:44,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:44,748 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:44,749 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:44,749 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:44 +08:00

2018-05-15 14:22:46,398 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,398 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:22:46,398 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,398 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,400 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:46,400 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,400 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,400 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,400 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:22:46,400 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,400 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,401 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:46,401 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,402 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,402 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,402 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:22:46,402 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,402 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:46,402 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:46,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,404 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:22:46,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,406 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,408 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:46,408 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,408 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,408 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,409 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:22:46,409 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,410 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:46,410 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,410 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,410 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,412 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:46,412 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,412 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,412 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:22:46,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:46,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:46,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:22:46,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:46,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,419 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-15 14:22:46,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:46,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,423 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:46,423 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,423 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,424 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,424 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:46,424 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,424 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,424 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,425 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:46,425 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,425 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,425 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,425 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:46,425 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,425 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,425 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,426 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:46,426 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,426 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,426 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,426 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'积分增加' <> [Extent1].[Name])
2018-05-15 14:22:46,426 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,426 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,428 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:46,428 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,428 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,429 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,429 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:22:46,429 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,429 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,429 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,431 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:46,431 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,431 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,431 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,431 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:46,431 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,431 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,431 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,432 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:46,432 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,433 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,721 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:22:46,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:22:46,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,724 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:46,724 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,724 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,725 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,725 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:22:46,725 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,725 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,725 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:46,725 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,726 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,726 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,726 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:22:46,726 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,726 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,726 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:46,726 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,726 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,726 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,727 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:22:46,727 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,727 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:46,727 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:46,727 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,729 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:46,729 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,729 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,731 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,731 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:22:46,731 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,731 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,732 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:46,732 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,732 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,732 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,733 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:22:46,733 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,733 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:46,733 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:46,733 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,733 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,733 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,736 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:22:46,736 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,737 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,737 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,737 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:22:46,737 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,737 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:46,737 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:46,737 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,737 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,737 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,739 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:46,739 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,739 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,740 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,740 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:22:46,740 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,740 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:22:46,740 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:22:46,740 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,743 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:22:46,743 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,744 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,744 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,744 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:46,744 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,744 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,744 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,744 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:46,744 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,745 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,745 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,745 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:46,745 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,745 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,745 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,746 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:22:46,746 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,746 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,747 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,747 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:22:46,747 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,747 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:22:46,747 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:22:46 +08:00

2018-05-15 14:22:46,747 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:22:46,747 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:22:46,747 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:22:46 +08:00

2018-05-15 14:27:18,980 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:18 +08:00

2018-05-15 14:27:18,996 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-15 14:27:18,996 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:18,996 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:18 +08:00

2018-05-15 14:27:19,011 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: 15

2018-05-15 14:27:19,011 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:19,011 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:19 +08:00

2018-05-15 14:27:19,261 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:19 +08:00

2018-05-15 14:27:20,120 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-15 14:27:20,120 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,121 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-15 14:27:20,121 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,123 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-15 14:27:20,123 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,124 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,126 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-15 14:27:20,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,127 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-15 14:27:20,128 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,129 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,276 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,429 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:27:20,429 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,429 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-15 14:27:20,429 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,435 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-15 14:27:20,435 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,515 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,527 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,563 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:27:20,563 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,563 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,563 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,564 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:27:20,564 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,587 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,804 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,807 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:27:20,807 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,807 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,807 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,808 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:27:20,808 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,809 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,810 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,811 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:27:20,811 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,811 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,811 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,811 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:27:20,811 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,811 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,820 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,828 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:27:20,828 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,828 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,829 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:27:20,830 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,831 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,831 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,832 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:27:20,832 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,832 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,834 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:27:20,834 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,834 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,846 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,859 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:27:20,859 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,859 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:27:20,859 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,864 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:27:20,864 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,871 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,872 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,873 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:27:20,873 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,873 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,875 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:27:20,875 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,875 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,889 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,905 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:27:20,905 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,905 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:27:20,905 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,905 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,905 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,908 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:27:20,908 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,916 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,917 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,918 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:27:20,918 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,918 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:27:20,918 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,918 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,918 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,919 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:27:20,919 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,919 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,927 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,962 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:27:20,962 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,962 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:27:20,962 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:27:20,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,974 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,977 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,985 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:27:20,985 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,985 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,986 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,987 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:27:20,987 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,990 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,991 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,993 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:27:20,993 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,993 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,993 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,994 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:27:20,994 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,994 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:27:20,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,997 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:27:20,997 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 14:27:20,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:27:20 +08:00

2018-05-15 14:27:21,000 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:27:21,000 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:27:21,000 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:27:21 +08:00

2018-05-15 14:29:29,643 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:29:29,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,649 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:29:29,649 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,649 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,649 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,649 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:29:29,649 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,649 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,649 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,650 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:29:29,650 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,651 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,651 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,652 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:29:29,652 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,652 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,658 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-15 14:29:29,658 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,658 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,658 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,659 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:29:29,659 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,659 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,660 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:29:29,660 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,660 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,660 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,661 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:29:29,661 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,661 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:29:29,661 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,664 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:29:29,664 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,664 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,664 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,664 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:29:29,664 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,664 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,667 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:29:29,667 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,671 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,671 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,672 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:29:29,672 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,672 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:29:29,672 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,672 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,672 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,675 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:29:29,675 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,675 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,675 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:29:29,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:29:29,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:29:29,676 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,677 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,677 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,677 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:29:29,677 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,677 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:29:29,677 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,681 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:29:29,681 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,681 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,682 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,682 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:29:29,682 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,682 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,682 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,695 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-15 14:29:29,695 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,695 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,695 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,695 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:29:29,695 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,695 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,695 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,741 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 45 ms with result: SqlDataReader

2018-05-15 14:29:29,741 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,742 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,742 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,742 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:29:29,742 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,742 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,742 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,815 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 73 ms with result: SqlDataReader

2018-05-15 14:29:29,815 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,816 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,816 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,816 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:29:29,816 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,816 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,816 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,822 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-15 14:29:29,822 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,822 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,822 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,822 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:29:29,822 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,822 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 14:29:29,822 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:29:29 +08:00

2018-05-15 14:29:29,823 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:29:29,823 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:29:29,823 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:29:29 +08:00

2018-05-15 14:30:40,309 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,309 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:30:40,310 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,310 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,310 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,341 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 31 ms with result: SqlDataReader

2018-05-15 14:30:40,341 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,342 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,342 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,342 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:30:40,342 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,342 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,342 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,364 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 22 ms with result: SqlDataReader

2018-05-15 14:30:40,364 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,364 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,365 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,365 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:30:40,365 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,365 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,368 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:30:40,368 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,369 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,369 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,369 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:30:40,369 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,369 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,370 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:30:40,370 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,371 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,371 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,371 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:30:40,371 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,371 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:30:40,371 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,373 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:30:40,373 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,374 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,374 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,374 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:30:40,374 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,374 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,375 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:30:40,375 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:30:40,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:30:40,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,376 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,378 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:30:40,378 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,379 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,379 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,379 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:30:40,379 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,379 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:30:40,379 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,379 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,379 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,380 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:30:40,380 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,380 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,380 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,380 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:30:40,380 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,380 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:30:40,381 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,384 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:30:40,384 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,385 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,385 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,385 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:30:40,385 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,385 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,385 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,391 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-15 14:30:40,393 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,393 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,393 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,393 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:30:40,393 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,393 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,393 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,394 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:30:40,394 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,394 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,395 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,395 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:30:40,395 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,395 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,395 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,395 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:30:40,395 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,396 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:30:40,397 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,397 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 14:30:40,397 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:30:40 +08:00

2018-05-15 14:30:40,397 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:30:40,397 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:30:40,397 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:30:40 +08:00

2018-05-15 14:35:49,272 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:49 +08:00

2018-05-15 14:35:49,287 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-15 14:35:49,287 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:49,287 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:49 +08:00

2018-05-15 14:35:49,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: 15

2018-05-15 14:35:49,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:49,303 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:49 +08:00

2018-05-15 14:35:49,397 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:49 +08:00

2018-05-15 14:35:50,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-15 14:35:50,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-15 14:35:50,253 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-15 14:35:50,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-15 14:35:50,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-15 14:35:50,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,269 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,425 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,550 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:35:50,550 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,550 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-15 14:35:50,550 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,566 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-15 14:35:50,566 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,644 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,644 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,691 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:35:50,691 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,691 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:35:50,691 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,691 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:35:50,691 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,722 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,924 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:35:50,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:35:50,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,928 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:35:50,928 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,929 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,930 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,932 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:35:50,932 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,932 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:35:50,932 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,933 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:35:50,933 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,934 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,942 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,950 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:35:50,950 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,950 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,953 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:35:50,953 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,955 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,956 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,957 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:35:50,957 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,957 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,958 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:35:50,958 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,958 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,972 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,984 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:35:50,984 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,984 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:35:50,985 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,986 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:35:50,987 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,994 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,994 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,996 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:35:50,996 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,996 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:50,997 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:35:50,997 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:50,997 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:50 +08:00

2018-05-15 14:35:51,010 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,024 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:35:51,024 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,024 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:35:51,024 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:35:51,024 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:35:51,024 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,026 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:35:51,026 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,034 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,034 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,035 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:35:51,035 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,035 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:35:51,035 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:35:51,035 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:35:51,035 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,036 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:35:51,036 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,036 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,043 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:35:51,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:35:51,077 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,079 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:35:51,080 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,089 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,092 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,100 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:35:51,100 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,100 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:35:51,101 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,102 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:35:51,102 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,106 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,107 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,108 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:35:51,108 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,108 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:35:51,108 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,109 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:35:51,109 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,110 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,110 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,111 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:35:51,111 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,111 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:35:51,111 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,112 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:35:51,112 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,113 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:35:51,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:35:51,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:35:51,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:35:51,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 14:35:51,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:35:51 +08:00

2018-05-15 14:35:51,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:35:51,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:35:51,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:35:51 +08:00

2018-05-15 14:36:20,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:20 +08:00

2018-05-15 14:36:20,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:36:20,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:20,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-15 14:36:20,383 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:20 +08:00

2018-05-15 14:36:20,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:36:20,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:20,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:20 +08:00

2018-05-15 14:36:20,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:20 +08:00

2018-05-15 14:36:20,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:20,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:20,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:20,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:20 +08:00

2018-05-15 14:36:20,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:36:20,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:20,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:20 +08:00

2018-05-15 14:36:20,390 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:20 +08:00

2018-05-15 14:36:20,390 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:36:20,390 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:20,390 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:20,390 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:20 +08:00

2018-05-15 14:36:20,391 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:36:20,391 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:20,392 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:20 +08:00

2018-05-15 14:36:28,023 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,035 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:36:28,035 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,035 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-15 14:36:28,035 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,038 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:36:28,038 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,038 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,039 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,040 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:36:28,040 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,040 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,041 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:36:28,041 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,041 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,041 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:36:28,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:28,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,045 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:36:28,045 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,045 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:28,045 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:36:28,045 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,048 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:36:28,048 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,048 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,049 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,049 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:36:28,049 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,049 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,050 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:36:28,050 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,051 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,051 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,056 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:36:28,056 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,056 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:28,056 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:36:28,056 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:28,056 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:36:28,056 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,058 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:36:28,059 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,059 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,059 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,059 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:36:28,060 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,060 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:28,060 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:36:28,060 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:36:28,060 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:36:28,060 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,060 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:28,060 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,060 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,061 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:36:28,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:28,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:36:28,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,066 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:36:28,066 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:28,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:28,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:36:28,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,069 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,069 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,069 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:28,069 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,069 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:36:28,069 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:28,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:28,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-15 14:36:28,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:28,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:28,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:28,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:28 +08:00

2018-05-15 14:36:34,489 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,490 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:36:34,490 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,490 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:36:34,490 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,490 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:34,491 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,491 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,491 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,492 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:36:34,492 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,492 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,492 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:34,492 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,492 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,492 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,493 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:36:34,493 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,493 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,493 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:34,493 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,493 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,493 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,494 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:36:34,494 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,494 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:34,494 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:36:34,494 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,494 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:34,494 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,494 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,495 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,495 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:36:34,495 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,495 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,495 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:34,495 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,496 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,496 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,497 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:36:34,497 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,497 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:34,497 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:36:34,497 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:34,497 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:36:34,497 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,498 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:34,498 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,498 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,498 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,499 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:36:34,499 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,499 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:34,499 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:36:34,499 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:36:34,499 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:36:34,499 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,499 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:34,500 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,500 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,500 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,502 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:36:34,503 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,503 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:34,503 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:36:34,503 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,506 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:36:34,506 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,506 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,506 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:36:34,507 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,508 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:34,508 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,508 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,508 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,508 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:34,508 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,508 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:34,508 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:34,508 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:34,508 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:34,509 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:34 +08:00

2018-05-15 14:36:40,920 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,920 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:36:40,920 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,920 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,920 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:40,920 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,920 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:36:40,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:40,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,922 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:36:40,922 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,922 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:40,922 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:36:40,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:36:40,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:40,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:36:40,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:40,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:40,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:36:40,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,928 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:36:40,928 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,928 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:36:40,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:40,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:36:40,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:36:40,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,930 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:40,930 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,931 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,932 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,933 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:36:40,933 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,934 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:40,934 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,937 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:36:40,937 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,938 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,938 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,938 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:40,938 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,938 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:36:40,938 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,938 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:40,938 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:40,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:36:40,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:40,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:40,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:40,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:40,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,943 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,947 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'积分增加' <> [Extent1].[Name])
2018-05-15 14:36:40,947 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,947 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,951 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:36:40,951 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,951 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,953 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,953 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:36:40,953 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,953 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:40,953 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:36:40,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:40,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:40,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:40,955 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:40,956 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:40,956 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:40 +08:00

2018-05-15 14:36:46,543 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,543 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:36:46,543 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,543 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,552 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-15 14:36:46,552 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,553 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,553 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,553 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:36:46,553 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,553 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,555 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:36:46,555 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,555 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,555 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,556 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:36:46,556 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,556 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:46,556 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,558 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:36:46,558 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,558 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,559 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,559 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:36:46,559 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,559 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,560 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:46,560 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,560 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,560 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,561 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:36:46,561 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,561 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:46,561 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:46,561 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:36:46,561 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,561 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:46,561 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:36:46,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:46,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:36:46,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:36:46,562 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,563 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:46,563 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,565 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,565 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,566 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:36:46,566 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,566 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:36:46,566 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,593 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 26 ms with result: SqlDataReader

2018-05-15 14:36:46,593 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,593 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,593 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,594 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:46,594 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,594 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:36:46,594 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,624 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 30 ms with result: SqlDataReader

2018-05-15 14:36:46,624 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,624 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,624 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,625 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:46,625 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,625 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:36:46,625 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-15 14:36:46,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:46,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:46,635 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:46,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,636 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'积分增加' <> [Extent1].[Name])
2018-05-15 14:36:46,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:46,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,637 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:36:46,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:46,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,638 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:46,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:36:46,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:36:46,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:36:46 +08:00

2018-05-15 14:36:46,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:36:46,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:36:46,639 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:36:46 +08:00

2018-05-15 14:37:48,192 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,193 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:37:48,193 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,193 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,193 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,199 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-15 14:37:48,199 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,199 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,199 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,200 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:48,200 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,200 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,200 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,202 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:37:48,202 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,203 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,203 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,203 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:37:48,203 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,203 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,205 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:48,205 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,205 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,205 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,205 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:37:48,205 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,206 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,207 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:48,207 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,207 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,207 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,208 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:37:48,208 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,208 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:37:48,208 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,210 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:48,210 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,210 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,210 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,210 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:37:48,210 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,210 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:48,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:37:48,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:37:48,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,215 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:37:48,215 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,215 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,215 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,216 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:37:48,216 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,216 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:37:48,216 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,216 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,216 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,216 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:48,216 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:37:48,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:37:48,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,220 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:37:48,220 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,220 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,221 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,221 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:48,221 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,221 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,221 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,222 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:48,222 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,222 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,222 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,222 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:48,222 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,222 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,222 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,224 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:48,224 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,224 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,224 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,224 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:48,224 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,224 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,224 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,225 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:48,225 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,225 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:48,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:48,227 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:48 +08:00

2018-05-15 14:37:50,000 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,000 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:37:50,000 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,000 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:37:50,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,002 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,002 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,002 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:37:50,002 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,002 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,002 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,003 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,003 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,003 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,003 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,003 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:37:50,003 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,003 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,004 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,004 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,005 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,005 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,005 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:37:50,005 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,005 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,005 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,005 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,005 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,006 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,006 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,006 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,006 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,007 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:37:50,007 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,007 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,007 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,007 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,007 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,007 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,007 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,007 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,008 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,008 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:37:50,008 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,008 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,008 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,011 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:37:50,011 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,011 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,011 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,012 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:50,012 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,012 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,012 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,012 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,012 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,012 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,012 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,012 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:50,012 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,013 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,013 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,015 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:37:50,015 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,015 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,015 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,015 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:50,015 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,015 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,015 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,016 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,016 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,016 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,016 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,016 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'积分增加' <> [Extent1].[Name])
2018-05-15 14:37:50,016 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,016 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,018 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:50,018 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,018 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,019 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,019 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:37:50,019 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,019 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,019 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,019 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,019 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:50,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:37:50,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:37:50,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:50,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,634 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,635 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,635 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:37:50,635 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,635 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,635 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,635 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,635 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,636 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,636 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:37:50,636 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,636 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,636 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,636 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,636 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,636 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,637 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:37:50,637 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,637 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,637 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:37:50,637 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,645 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-15 14:37:50,645 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,645 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,645 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,645 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:37:50,645 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,645 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,646 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,646 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,647 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,648 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,648 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:37:50,648 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,648 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,648 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:37:50,648 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,648 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,648 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,651 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:37:50,651 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,651 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,651 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,652 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,654 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:37:50,654 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,654 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,654 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:37:50,654 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,657 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:37:50,657 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:50,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,659 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,660 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,953 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,953 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:37:50,953 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,953 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-15 14:37:50,953 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,954 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,954 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,954 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:37:50,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,955 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,956 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,956 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:37:50,956 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,956 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,956 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,956 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,956 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,956 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,957 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:37:50,957 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,957 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,957 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:37:50,957 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,957 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,957 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,957 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,957 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,958 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:37:50,958 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,958 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,958 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,958 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,958 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:37:50,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:37:50,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,959 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,960 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,960 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,960 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,960 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:37:50,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:37:50,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,961 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:50,962 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,963 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,964 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:37:50,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:50,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:37:50,965 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,968 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:37:50,968 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,968 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:50,969 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:50,970 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:50,971 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:50 +08:00

2018-05-15 14:37:52,920 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:37:52,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:37:52,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:52,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,922 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,922 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:37:52,922 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,922 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,922 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:52,922 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,923 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,923 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,923 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:37:52,923 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,923 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,923 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:52,923 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:37:52,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:52,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:37:52,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,924 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:52,924 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,925 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,925 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,925 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:37:52,925 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,925 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:52,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,926 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,927 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,928 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:37:52,928 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,928 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:52,928 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:37:52,928 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:52,928 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:52,928 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,929 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:52,929 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,929 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,930 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,930 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:37:52,930 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,930 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:52,930 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:37:52,930 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,933 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:37:52,933 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,935 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,935 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,935 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,936 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:52,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:52,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:52,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:52,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:52,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:52,937 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:52 +08:00

2018-05-15 14:37:53,426 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,427 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:37:53,427 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,427 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,427 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,427 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,427 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,427 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,427 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:37:53,428 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,428 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,428 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,428 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,428 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,428 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,428 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:37:53,428 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,428 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:53,428 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,430 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:53,430 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,431 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,431 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,431 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:37:53,431 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,431 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,432 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,432 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,432 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,432 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,432 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:37:53,432 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,432 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:53,433 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,433 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,433 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,433 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,433 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,433 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,433 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,434 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:37:53,434 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,434 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:53,434 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,434 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,434 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,434 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,434 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,434 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,435 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,435 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:37:53,435 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,435 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:53,435 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,436 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,436 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,436 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,436 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,436 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:53,436 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,436 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,436 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,437 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,438 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,438 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:53,438 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,438 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,438 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,438 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,438 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,438 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,439 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,439 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'积分增加' <> [Extent1].[Name])
2018-05-15 14:37:53,439 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,439 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,440 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:53,440 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,441 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,441 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,441 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:37:53,442 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,442 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,442 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,442 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,442 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,442 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,442 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,442 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:53,442 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,442 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,443 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,443 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,443 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,443 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,877 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,877 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:37:53,877 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,877 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-15 14:37:53,878 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,878 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,878 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,878 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,879 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,879 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:37:53,879 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,879 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,882 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:37:53,882 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,882 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,882 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,882 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:37:53,882 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,882 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,883 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,883 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,883 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,883 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,883 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:37:53,883 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,883 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:53,883 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:37:53,883 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,884 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,884 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,884 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,884 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,884 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:37:53,884 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,885 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,885 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,885 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,885 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,885 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,886 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:37:53,886 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,886 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:53,886 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:37:53,886 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,886 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,886 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,886 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,886 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,886 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,887 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,887 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:37:53,887 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,887 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:53,887 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:37:53,887 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,887 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,887 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,888 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,888 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,888 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,888 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,888 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:37:53,888 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,888 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:37:53,888 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:37:53,888 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,890 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:37:53,890 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,890 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,890 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,890 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:53,890 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,890 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,890 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,892 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,893 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,894 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:37:53,894 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,894 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-15 14:37:53,894 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:37:53 +08:00

2018-05-15 14:37:53,894 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:37:53,894 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:37:53,894 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:37:53 +08:00

2018-05-15 14:38:37,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:38:37,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-15 14:38:37,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,916 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:38:37,916 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,916 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,917 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,917 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:38:37,917 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,917 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,918 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:38:37,918 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,919 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,919 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,919 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:38:37,919 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,919 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,920 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:38:37,920 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:38:37,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:38:37,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:38:37,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:38:37,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:38:37,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,928 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:38:37,928 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,928 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:38:37,931 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,931 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:38:37,931 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:38:37,931 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:38:37,931 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:38:37,931 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,933 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:38:37,933 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,933 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,934 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,934 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:38:37,934 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,934 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:38:37,934 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:38:37,934 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:38:37,934 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:38:37,934 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,935 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:37,935 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,935 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,935 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,935 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:38:37,935 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,935 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:38:37,935 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:38:37,935 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:38:37,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,939 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:38:37,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:38:37,940 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,941 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:37,941 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,941 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,941 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,941 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:38:37,941 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,941 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:38:37,941 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,942 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:37,942 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,942 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,942 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,943 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:38:37,943 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,943 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-15 14:38:37,943 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:37,944 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:38:37,944 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:37,944 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:37 +08:00

2018-05-15 14:38:40,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:38:40,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-15 14:38:40,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,028 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:38:40,028 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,029 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,029 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,030 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:38:40,030 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,030 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,031 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:40,031 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,031 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,031 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,031 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:38:40,031 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,031 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,031 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:40,031 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,031 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:38:40,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:38:40,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:38:40,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:40,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:38:40,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,034 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,034 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:40,034 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,034 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,034 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:38:40,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:38:40,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:38:40,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:38:40,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:38:40,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:40,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:38:40,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:38:40,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:38:40,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:38:40,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:38:40,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:40,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:38:40,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,038 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:38:40,038 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-15 14:38:40,038 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,038 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:40,038 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,038 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:38:40,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:38:40,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:40,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:40,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:38:40,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:40,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:40 +08:00

2018-05-15 14:38:56,574 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:38:56 +08:00

2018-05-15 14:38:56,574 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:38:56,574 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:56,574 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '123' (Type = String, Size = 4000)

2018-05-15 14:38:56,574 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:38:56 +08:00

2018-05-15 14:38:56,576 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:38:56,576 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:38:56,576 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:38:56 +08:00

2018-05-15 14:39:01,078 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,078 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:39:01,078 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,078 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:39:01,078 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,080 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:39:01,080 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,080 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,081 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,081 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:39:01,081 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,081 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,082 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,083 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:39:01,083 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,083 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:39:01,083 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:39:01,083 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,083 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:39:01,083 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,083 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,084 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,084 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:39:01,084 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,084 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,084 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:39:01,084 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,085 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,085 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,085 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:39:01,085 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:39:01,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:39:01,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:39:01,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:39:01,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:39:01,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,086 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,087 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,087 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:39:01,087 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,087 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:39:01,087 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:39:01,087 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:39:01,087 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:39:01,087 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,088 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:39:01,088 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,088 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,088 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,089 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:39:01,089 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,089 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:39:01,089 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:39:01,089 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,092 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:39:01,092 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:39:01,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:39:01,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:39:01,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,093 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,094 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,094 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:39:01,094 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,094 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:39:01,094 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,095 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:39:01,095 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,096 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,096 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,096 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:39:01,096 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,096 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:39:01,096 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:01,096 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:39:01,096 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:01,097 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:01 +08:00

2018-05-15 14:39:09,693 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:39:09 +08:00

2018-05-15 14:39:09,693 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:39:09,693 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:09,693 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 14:39:09,693 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:39:09 +08:00

2018-05-15 14:39:09,694 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:39:09,694 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:09,694 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:09 +08:00

2018-05-15 14:39:23,141 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:39:23 +08:00

2018-05-15 14:39:23,141 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:39:23,141 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:23,141 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 14:39:23,141 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:39:23 +08:00

2018-05-15 14:39:23,143 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:39:23,143 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:23,143 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:23 +08:00

2018-05-15 14:39:30,748 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:39:30 +08:00

2018-05-15 14:39:30,749 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:39:30,749 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:30,749 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 14:39:30,749 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:39:30 +08:00

2018-05-15 14:39:30,752 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:39:30,752 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:39:30,752 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:39:30 +08:00

2018-05-15 14:40:50,280 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,280 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:40:50,280 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,280 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:40:50,280 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,329 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 48 ms with result: SqlDataReader

2018-05-15 14:40:50,329 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,329 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,330 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,330 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:40:50,330 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,330 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 65 ms with result: SqlDataReader

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:40:50,395 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:40:50,410 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:50,426 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:50 +08:00

2018-05-15 14:40:58,509 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:40:58 +08:00

2018-05-15 14:40:58,509 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:40:58,509 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:58,509 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 14:40:58,509 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:40:58 +08:00

2018-05-15 14:40:58,515 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-15 14:40:58,515 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:40:58,515 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:40:58 +08:00

2018-05-15 14:41:17,442 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:41:17 +08:00

2018-05-15 14:41:17,443 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:41:17,443 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:41:17,443 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 14:41:17,443 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:41:17 +08:00

2018-05-15 14:41:17,443 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:41:17,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:41:17,444 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:41:17 +08:00

2018-05-15 14:50:39,995 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:39 +08:00

2018-05-15 14:50:40,011 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-15 14:50:40,011 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:40,011 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:40 +08:00

2018-05-15 14:50:40,026 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: 15

2018-05-15 14:50:40,026 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:40,026 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:40 +08:00

2018-05-15 14:50:40,120 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:40 +08:00

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:40 +08:00

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 3 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:40 +08:00

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:40 +08:00

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:40 +08:00

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:40,981 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:40 +08:00

2018-05-15 14:50:41,137 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,309 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:50:41,309 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,309 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-15 14:50:41,309 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,309 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-15 14:50:41,309 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,387 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,403 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,434 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:50:41,434 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,434 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,434 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,434 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:50:41,434 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,489 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,657 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,659 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:50:41,659 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,659 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,659 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,661 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:50:41,662 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,662 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,665 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,665 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:50:41,666 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,666 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,666 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,666 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:41,666 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,666 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,675 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,682 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:50:41,682 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,682 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,684 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:50:41,685 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,686 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,687 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,687 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:50:41,687 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,687 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,689 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:50:41,689 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,689 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,701 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,713 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:50:41,713 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,713 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:50:41,713 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,720 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-15 14:50:41,720 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,729 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,729 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,731 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:50:41,731 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,731 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,732 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:50:41,732 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,732 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,746 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,762 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:50:41,762 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,762 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:50:41,762 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,762 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,762 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,766 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:50:41,766 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,774 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,774 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,775 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:50:41,775 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,775 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:50:41,775 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,775 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,775 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,776 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:41,776 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,776 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,783 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,820 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:50:41,820 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,820 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:50:41,820 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,824 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:50:41,824 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,833 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,836 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,845 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:50:41,845 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,845 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,845 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,847 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:50:41,847 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,851 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,852 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,853 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:50:41,853 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,853 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,853 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,857 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:50:41,857 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,858 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,858 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,859 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:50:41,859 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,859 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,859 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,861 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:50:41,861 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,862 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,862 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,862 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:50:41,862 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,862 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,862 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,863 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:41,863 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,863 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:50:41,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 14:50:41,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:41,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:41,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:41,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:41 +08:00

2018-05-15 14:50:44,443 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,462 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:50:44,462 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,462 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:50:44,462 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,500 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 38 ms with result: SqlDataReader

2018-05-15 14:50:44,500 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,501 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,502 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,502 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:50:44,502 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,502 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,503 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,505 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:50:44,505 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,505 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:50:44,505 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:50:44,505 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,508 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:50:44,509 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,509 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,509 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,509 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:50:44,509 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,509 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,510 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:44,510 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,510 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,510 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,512 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:50:44,512 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,512 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:50:44,512 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:50:44,512 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:50:44,512 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:50:44,512 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,515 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:50:44,515 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,515 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,515 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,516 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:50:44,516 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,516 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:50:44,516 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:50:44,516 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:50:44,516 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:50:44,516 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,516 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:44,516 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,517 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,517 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,520 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:50:44,520 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,520 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:50:44,521 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:50:44,521 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,526 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:50:44,526 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,526 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,526 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,526 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:50:44,526 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,526 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:44,527 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,528 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,528 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,528 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:50:44,528 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,528 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:50:44,528 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:44,528 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:50:44,528 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:44,528 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:44 +08:00

2018-05-15 14:50:49,409 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:50:49 +08:00

2018-05-15 14:50:49,409 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:50:49,409 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:49,409 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 14:50:49,409 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:50:49 +08:00

2018-05-15 14:50:49,413 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:50:49,413 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:50:49,413 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:50:49 +08:00

2018-05-15 14:52:10,098 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,099 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:52:10,099 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,099 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:52:10,099 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,151 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 51 ms with result: SqlDataReader

2018-05-15 14:52:10,151 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,151 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,151 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,152 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:52:10,152 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,152 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,160 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-15 14:52:10,160 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,161 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,161 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,161 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:52:10,161 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,161 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,162 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:52:10,163 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,163 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,163 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,163 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:52:10,163 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,163 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:52:10,163 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:52:10,163 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,166 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:52:10,166 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,166 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,166 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,167 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:52:10,167 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,167 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,168 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:52:10,168 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,168 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,169 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,169 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:52:10,169 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,169 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:52:10,169 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:52:10,169 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:52:10,169 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:52:10,169 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,172 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:52:10,172 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,172 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,173 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,174 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:52:10,174 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,174 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:52:10,174 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:52:10,174 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:52:10,174 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:52:10,174 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,174 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:52:10,174 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,175 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,175 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,175 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:52:10,175 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,175 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:52:10,175 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:52:10,175 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,179 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:52:10,179 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,179 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,179 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,179 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:52:10,180 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,180 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:52:10,180 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,181 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:52:10,181 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,181 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,181 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,181 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:52:10,181 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,181 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:52:10,181 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,182 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:52:10,182 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,182 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,182 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,182 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:52:10,182 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,182 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:52:10,182 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:10,183 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:52:10,183 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:10,183 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:10 +08:00

2018-05-15 14:52:14,386 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:52:14 +08:00

2018-05-15 14:52:14,386 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:52:14,386 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:14,386 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 14:52:14,386 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:52:14 +08:00

2018-05-15 14:52:14,395 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-15 14:52:14,395 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:52:14,396 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:52:14 +08:00

2018-05-15 14:53:56,472 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,472 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:53:56,472 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,472 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:53:56,473 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,517 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 43 ms with result: SqlDataReader

2018-05-15 14:53:56,517 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,517 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,518 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,518 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:53:56,518 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,518 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,524 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-15 14:53:56,524 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,525 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,525 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,525 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:53:56,525 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,525 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,526 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:53:56,526 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,526 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,526 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,527 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:53:56,527 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,527 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:53:56,527 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:53:56,527 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,532 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:53:56,532 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,532 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,532 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,532 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:53:56,532 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,532 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,534 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:53:56,534 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,534 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,534 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,535 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:53:56,535 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,535 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:53:56,535 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:53:56,535 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:53:56,535 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:53:56,535 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,539 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:53:56,539 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,539 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,539 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,540 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:53:56,540 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,540 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:53:56,540 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:53:56,540 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:53:56,540 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:53:56,540 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,540 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:53:56,540 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,540 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,543 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,543 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:53:56,543 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,543 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:53:56,543 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:53:56,543 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,547 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:53:56,547 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,547 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,547 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,547 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:53:56,547 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,547 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:53:56,547 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,548 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:53:56,548 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,549 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,549 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,549 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:53:56,549 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,549 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:53:56,549 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,550 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:53:56,550 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,550 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,550 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,550 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:53:56,550 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,550 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:53:56,550 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:56,555 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-15 14:53:56,555 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:56,555 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:56 +08:00

2018-05-15 14:53:59,868 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:53:59 +08:00

2018-05-15 14:53:59,868 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:53:59,869 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:59,869 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 14:53:59,869 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:53:59 +08:00

2018-05-15 14:53:59,897 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 28 ms with result: SqlDataReader

2018-05-15 14:53:59,897 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:53:59,898 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:53:59 +08:00

2018-05-15 14:55:31,504 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,504 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:55:31,504 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,504 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:55:31,504 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,526 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-15 14:55:31,526 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,526 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,527 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,527 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:55:31,527 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,527 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,535 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-15 14:55:31,535 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,535 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,536 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,536 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:55:31,536 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,536 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,538 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:55:31,538 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,538 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,538 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,539 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:55:31,539 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,539 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:55:31,539 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:55:31,539 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,542 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:55:31,542 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,542 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,542 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,542 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:55:31,542 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,542 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,544 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:55:31,544 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,545 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,545 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,545 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:55:31,546 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,546 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:55:31,546 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:55:31,546 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:55:31,546 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:55:31,546 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,548 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:55:31,548 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,548 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,549 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,549 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:55:31,549 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,549 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:55:31,549 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:55:31,549 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:55:31,549 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:55:31,549 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,550 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:55:31,550 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,550 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,550 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,550 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:55:31,550 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,550 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:55:31,550 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:55:31,550 [21] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,558 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-15 14:55:31,558 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,558 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,559 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,559 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:55:31,559 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,559 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:55:31,559 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:55:31,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:55:31,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:55:31,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,561 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:55:31,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:55:31,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:55:31,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:31,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:55:31,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:31,562 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:31 +08:00

2018-05-15 14:55:35,625 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:55:35 +08:00

2018-05-15 14:55:35,625 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:55:35,625 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:35,625 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 14:55:35,625 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:55:35 +08:00

2018-05-15 14:55:35,627 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:55:35,627 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:55:35,627 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:55:35 +08:00

2018-05-15 14:57:33,523 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,523 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 14:57:33,523 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,523 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 14:57:33,523 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,525 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:57:33,525 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,525 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,526 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,526 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:57:33,526 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,526 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,528 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:57:33,528 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,528 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,528 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,528 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:57:33,528 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,528 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,529 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:57:33,529 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,530 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,530 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,530 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 14:57:33,530 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,530 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:57:33,530 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:57:33,530 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:57:33,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:57:33,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,537 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:57:33,537 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,537 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:57:33,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:57:33,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:57:33,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:57:33,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:57:33,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:57:33,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 14:57:33,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:57:33,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:57:33,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:57:33,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:57:33,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,548 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-15 14:57:33,548 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,548 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,548 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,549 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:57:33,549 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,549 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 14:57:33,549 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 14:57:33,549 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-15 14:57:33,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:57:33,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:57:33,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,561 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 14:57:33,561 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,562 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,562 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,562 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:57:33,562 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,562 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 14:57:33,562 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,577 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-15 14:57:33,577 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,578 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,578 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,578 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:57:33,578 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,578 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:57:33,578 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:33,588 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-15 14:57:33,588 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:33,588 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:33 +08:00

2018-05-15 14:57:37,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:57:37 +08:00

2018-05-15 14:57:37,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:57:37,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:37,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 14:57:37,602 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:57:37 +08:00

2018-05-15 14:57:37,611 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-15 14:57:37,612 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:37,612 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:37 +08:00

2018-05-15 14:57:46,621 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:57:46 +08:00

2018-05-15 14:57:46,622 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:57:46,622 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:46,622 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1223156' (Type = String, Size = 4000)

2018-05-15 14:57:46,622 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:57:46 +08:00

2018-05-15 14:57:46,624 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:57:46,624 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:57:46,624 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:57:46 +08:00

2018-05-15 14:58:04,464 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:58:04 +08:00

2018-05-15 14:58:04,465 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:58:04,465 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:04,465 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615661' (Type = String, Size = 4000)

2018-05-15 14:58:04,465 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:58:04 +08:00

2018-05-15 14:58:04,465 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:58:04,465 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:04,466 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:58:04 +08:00

2018-05-15 14:58:04,466 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:58:04 +08:00

2018-05-15 14:58:04,466 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:58:04,466 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:04,466 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:58:04,466 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:58:04 +08:00

2018-05-15 14:58:04,467 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:58:04,467 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:04,467 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:58:04 +08:00

2018-05-15 14:58:07,350 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:58:07 +08:00

2018-05-15 14:58:07,350 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:58:07,350 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:07,350 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615661' (Type = String, Size = 4000)

2018-05-15 14:58:07,350 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:58:07 +08:00

2018-05-15 14:58:07,351 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:58:07,351 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:07,352 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:58:07 +08:00

2018-05-15 14:58:07,352 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:58:07 +08:00

2018-05-15 14:58:07,352 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:58:07,352 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:07,352 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:58:07,352 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:58:07 +08:00

2018-05-15 14:58:07,353 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:58:07,353 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:07,353 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:58:07 +08:00

2018-05-15 14:58:12,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:58:12 +08:00

2018-05-15 14:58:12,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 14:58:12,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:12,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615661' (Type = String, Size = 4000)

2018-05-15 14:58:12,265 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:58:12 +08:00

2018-05-15 14:58:12,269 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:58:12,269 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:12,270 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:58:12 +08:00

2018-05-15 14:58:12,270 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:58:12 +08:00

2018-05-15 14:58:12,270 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:58:12,270 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:12,270 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:58:12,270 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:58:12 +08:00

2018-05-15 14:58:12,271 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:58:12,271 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:58:12,271 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:58:12 +08:00

2018-05-15 14:59:57,430 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,430 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 14:59:57,430 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,430 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,430 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,437 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-15 14:59:57,437 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,437 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,437 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,437 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:59:57,437 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,437 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,437 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,440 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:59:57,440 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,441 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,441 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,441 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 14:59:57,441 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,441 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,443 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:59:57,443 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,443 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,443 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,443 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 14:59:57,443 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,443 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,444 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:59:57,444 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,444 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,445 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,445 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 14:59:57,445 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,445 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:59:57,445 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,447 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:59:57,447 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,447 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,447 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,448 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 14:59:57,448 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,448 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,449 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:59:57,449 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,449 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,450 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,451 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:59:57,451 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,451 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:59:57,451 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,451 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,451 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,453 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 14:59:57,453 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,454 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,454 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,454 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 14:59:57,462 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,462 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:59:57,462 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,462 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,462 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,462 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:59:57,462 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,462 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,463 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,463 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 14:59:57,463 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,463 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 14:59:57,463 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,467 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:59:57,467 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,468 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,468 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,468 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:59:57,468 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,468 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,468 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,471 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 14:59:57,471 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,471 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,472 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,472 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:59:57,472 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,472 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,472 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,473 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 14:59:57,473 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,473 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,473 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,473 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:59:57,473 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,473 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,473 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,474 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:59:57,474 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,475 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 14:59:57,476 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,476 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 14:59:57,476 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 14:59:57 +08:00

2018-05-15 14:59:57,476 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 14:59:57,476 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 14:59:57,476 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 14:59:57 +08:00

2018-05-15 15:00:00,422 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,422 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 15:00:00,422 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,422 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 15:00:00,422 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,461 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 38 ms with result: SqlDataReader

2018-05-15 15:00:00,461 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,461 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,462 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,463 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 15:00:00,463 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,463 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,463 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:00:00,463 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,463 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,463 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,464 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 15:00:00,464 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,464 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,464 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:00:00,464 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,464 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,464 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,465 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 15:00:00,465 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,465 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:00:00,465 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:00:00,465 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,467 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:00:00,467 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,467 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,468 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,468 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 15:00:00,468 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,468 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,469 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:00:00,469 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,469 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,469 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,470 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:00:00,470 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,470 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:00:00,470 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:00:00,470 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:00:00,470 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:00:00,470 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,472 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:00:00,472 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,472 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,473 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,473 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:00:00,473 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,473 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:00:00,473 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:00:00,473 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:00:00,473 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:00:00,473 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,474 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:00:00,474 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,474 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,474 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,474 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 15:00:00,474 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,474 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:00:00,475 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:00:00,475 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,477 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:00:00,477 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,478 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,478 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,478 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:00:00,478 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,478 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:00:00,478 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,478 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:00:00,478 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:00:00,479 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:00,480 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:00:00,480 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:00,480 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:00 +08:00

2018-05-15 15:00:04,005 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:04 +08:00

2018-05-15 15:00:04,006 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 15:00:04,006 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:04,006 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 15:00:04,006 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:04 +08:00

2018-05-15 15:00:04,061 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 55 ms with result: SqlDataReader

2018-05-15 15:00:04,061 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:04,061 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:04 +08:00

2018-05-15 15:00:25,885 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,885 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 15:00:25,885 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,885 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 15:00:25,885 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,887 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:00:25,887 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,887 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,888 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,888 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 15:00:25,888 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,888 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,889 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:00:25,889 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,889 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,890 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,890 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 15:00:25,890 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,890 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,891 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:00:25,891 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,891 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,891 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,892 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 15:00:25,892 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,892 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:00:25,892 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:00:25,892 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,894 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:00:25,894 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,894 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,895 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,895 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 15:00:25,895 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,895 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,897 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:00:25,897 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,897 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,897 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,898 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:00:25,898 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,898 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:00:25,898 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:00:25,898 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:00:25,898 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:00:25,898 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,901 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 15:00:25,901 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,901 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,902 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,902 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:00:25,902 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,902 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:00:25,902 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:00:25,902 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:00:25,902 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:00:25,902 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,903 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:00:25,903 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,903 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,903 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,904 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 15:00:25,904 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,904 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:00:25,904 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:00:25,904 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,907 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:00:25,907 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,907 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,907 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,908 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:00:25,908 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,908 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:00:25,908 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,909 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:00:25,909 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,909 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,909 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,909 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:00:25,909 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,909 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 15:00:25,909 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,911 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:00:25,911 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,911 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,911 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,911 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:00:25,911 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,911 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:00:25,911 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:25,911 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:00:25,911 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:25,912 [38] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:25 +08:00

2018-05-15 15:00:28,549 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:00:28 +08:00

2018-05-15 15:00:28,549 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 15:00:28,549 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:28,549 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 15:00:28,549 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:00:28 +08:00

2018-05-15 15:00:28,553 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 15:00:28,553 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:00:28,553 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:00:28 +08:00

2018-05-15 15:02:07,565 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,565 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 15:02:07,565 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,565 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,565 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,605 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 40 ms with result: SqlDataReader

2018-05-15 15:02:07,605 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,606 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,606 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,606 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:07,606 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,606 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,606 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,610 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 15:02:07,610 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,610 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,610 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,611 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 15:02:07,611 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,611 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,612 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:02:07,612 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,612 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,612 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,613 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 15:02:07,613 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,613 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,614 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:07,614 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,614 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,614 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,614 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 15:02:07,614 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,614 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:02:07,614 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,622 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-15 15:02:07,622 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,622 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,622 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,622 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 15:02:07,622 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,623 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,624 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:02:07,624 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,624 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,625 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,625 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 15:02:07,625 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,625 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:02:07,625 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,625 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,625 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,627 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:02:07,627 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,627 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,628 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,628 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 15:02:07,628 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,628 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:02:07,628 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,628 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,628 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,629 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:07,629 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,629 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,629 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,629 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 15:02:07,629 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,629 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:02:07,629 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,634 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 15:02:07,634 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,635 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,635 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,635 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:07,635 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,635 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,635 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,636 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:02:07,637 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,637 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,637 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,637 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:07,637 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,637 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,637 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,638 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:07,638 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,638 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,638 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,638 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:07,638 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,638 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,638 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,639 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:07,639 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,639 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,639 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,639 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:07,639 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,639 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:07,640 [32] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:07 +08:00

2018-05-15 15:02:11,317 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,317 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 15:02:11,317 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,317 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 15:02:11,317 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,372 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 55 ms with result: SqlDataReader

2018-05-15 15:02:11,373 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,373 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,373 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,374 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 15:02:11,374 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,374 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,375 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:11,375 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,375 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,375 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,375 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 15:02:11,375 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,375 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,376 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:11,376 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,376 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,376 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,376 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 15:02:11,376 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,376 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:02:11,376 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:02:11,376 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,378 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:02:11,378 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,378 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,379 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,379 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 15:02:11,379 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,379 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,379 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:11,379 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,380 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,380 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,380 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:02:11,380 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,380 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:02:11,380 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:02:11,380 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:02:11,380 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:02:11,380 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,384 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 15:02:11,384 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,385 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,385 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,385 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:02:11,385 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,385 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:02:11,385 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:02:11,385 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:02:11,385 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:02:11,385 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,386 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:11,386 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,386 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,386 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,387 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 15:02:11,387 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,387 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:02:11,387 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:02:11,387 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,390 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:02:11,390 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,390 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,390 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,390 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:11,390 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,390 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:02:11,390 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,391 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,392 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:11,392 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,392 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:02:11,392 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:11,392 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:11,392 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:11,392 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:11 +08:00

2018-05-15 15:02:15,026 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:15 +08:00

2018-05-15 15:02:15,027 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 15:02:15,027 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:15,027 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 15:02:15,027 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:15 +08:00

2018-05-15 15:02:15,029 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:02:15,029 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:15,029 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:15 +08:00

2018-05-15 15:02:42,576 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,576 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 15:02:42,576 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,576 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 15:02:42,576 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,578 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:02:42,578 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,579 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,579 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,579 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 15:02:42,579 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,579 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,581 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:02:42,581 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,581 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,581 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,581 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 15:02:42,581 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,581 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,583 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:02:42,583 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,583 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,583 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,584 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 15:02:42,584 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,584 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:02:42,584 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:02:42,584 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,586 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:02:42,586 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,587 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,587 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,587 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 15:02:42,587 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,587 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,589 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:02:42,589 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,589 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,589 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,590 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:02:42,590 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,590 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:02:42,590 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:02:42,590 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:02:42,590 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:02:42,590 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,593 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:02:42,593 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,593 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,593 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,594 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:02:42,594 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,594 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:02:42,594 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:02:42,594 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:02:42,594 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:02:42,594 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,594 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:42,594 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,594 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,595 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,595 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 15:02:42,595 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,595 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:02:42,595 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:02:42,595 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,598 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 15:02:42,598 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,599 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,599 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,599 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:42,599 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,599 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:02:42,599 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,604 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-15 15:02:42,604 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,604 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,604 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,604 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:42,604 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,604 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 15:02:42,604 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,605 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:42,605 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,605 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,605 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,605 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:02:42,606 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,606 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:02:42,606 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:42,606 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:02:42,606 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:42,606 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:42 +08:00

2018-05-15 15:02:46,462 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:02:46 +08:00

2018-05-15 15:02:46,462 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 15:02:46,462 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:46,462 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 15:02:46,462 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:02:46 +08:00

2018-05-15 15:02:46,465 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:02:46,465 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:02:46,465 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:02:46 +08:00

2018-05-15 15:03:11,426 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,427 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 15:03:11,427 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,427 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 15:03:11,427 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,427 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:03:11,427 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,427 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,428 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,428 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 15:03:11,428 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,428 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,428 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:03:11,429 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,429 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,429 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,429 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 15:03:11,429 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,429 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,429 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:03:11,429 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,429 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,429 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,430 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 15:03:11,430 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,430 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:03:11,430 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:03:11,430 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,430 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:03:11,430 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,430 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,431 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,431 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 15:03:11,431 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,431 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,432 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:03:11,432 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,433 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,433 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,433 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:03:11,433 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,433 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:03:11,433 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:03:11,433 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:03:11,434 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:03:11,434 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,434 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:03:11,434 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,434 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,434 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,435 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:03:11,435 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,435 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:03:11,435 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:03:11,435 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:03:11,435 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:03:11,435 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,436 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:03:11,436 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,436 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,436 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,436 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 15:03:11,437 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,437 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:03:11,437 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:03:11,437 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,437 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:03:11,437 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,437 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 15:03:11,438 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:11,439 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:11 +08:00

2018-05-15 15:03:16,782 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:03:16 +08:00

2018-05-15 15:03:16,784 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 15:03:16,784 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:16,784 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 15:03:16,784 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:03:16 +08:00

2018-05-15 15:03:16,786 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:03:16,786 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:03:16,786 [36] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:03:16 +08:00

2018-05-15 15:05:07,924 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,924 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 15:05:07,925 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,925 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,925 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-15 15:05:07,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:05:07,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,938 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:05:07,938 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,939 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,939 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,939 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 15:05:07,939 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,939 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,941 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:05:07,941 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,941 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,941 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,941 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 15:05:07,941 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,941 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,942 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:05:07,942 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,943 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,943 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,943 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 15:05:07,943 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,943 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:05:07,943 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,945 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:05:07,945 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,945 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,946 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,946 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 15:05:07,946 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,946 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,947 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:05:07,947 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,948 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,948 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,948 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 15:05:07,948 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,948 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:05:07,949 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,949 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,949 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:05:07,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 15:05:07,951 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,952 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:05:07,952 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,952 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,952 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,952 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:05:07,952 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,952 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,953 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,953 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 15:05:07,953 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,953 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:05:07,953 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,955 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:05:07,955 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,956 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,956 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,956 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:05:07,956 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,956 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,956 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,957 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:05:07,957 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,958 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,958 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,958 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:05:07,958 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,958 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,958 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,959 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:05:07,959 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,960 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,960 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,960 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:05:07,960 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,960 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,960 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,961 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:05:07,961 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,961 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,961 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,961 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:05:07,961 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,961 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,961 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,961 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:05:07,961 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:05:07,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 15:05:07,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:07,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:05:07,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:07,963 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:07 +08:00

2018-05-15 15:05:11,636 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,636 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 15:05:11,636 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,636 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 15:05:11,636 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,688 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 51 ms with result: SqlDataReader

2018-05-15 15:05:11,688 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,688 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,689 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,689 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 15:05:11,689 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,689 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,691 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:05:11,691 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,691 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,691 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,691 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 15:05:11,691 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,691 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,692 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:05:11,692 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,692 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,692 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,692 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 15:05:11,692 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,692 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:05:11,692 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:05:11,692 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,694 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:05:11,695 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,695 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,695 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,695 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 15:05:11,695 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,695 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,696 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:05:11,696 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,696 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,696 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:05:11,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:05:11,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:05:11,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:05:11,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:05:11,698 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,700 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:05:11,700 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,700 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:05:11,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:05:11,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:05:11,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:05:11,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:05:11,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:05:11,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 15:05:11,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:05:11,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:05:11,703 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,706 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 15:05:11,706 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,706 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,706 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,706 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:05:11,706 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,706 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:05:11,706 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:05:11,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:05:11,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:11,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:05:11,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:11,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:11 +08:00

2018-05-15 15:05:15,029 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:05:15 +08:00

2018-05-15 15:05:15,030 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-15 15:05:15,030 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:15,030 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = String, Size = 4000)

2018-05-15 15:05:15,030 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:05:15 +08:00

2018-05-15 15:05:15,085 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 55 ms with result: SqlDataReader

2018-05-15 15:05:15,085 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:05:15,085 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:05:15 +08:00

2018-05-15 15:06:29,041 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,041 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-15 15:06:29,041 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,041 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,041 [26] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,043 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:06:29,043 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,044 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,044 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,044 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:06:29,044 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,044 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,044 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,045 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:06:29,045 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,045 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,046 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,046 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 15:06:29,046 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,046 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,049 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:06:29,049 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,049 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,049 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,050 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 15:06:29,050 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,050 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,051 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:06:29,051 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,051 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,051 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,051 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-15 15:06:29,051 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,051 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:06:29,051 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,053 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:06:29,053 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,054 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,054 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,054 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 15:06:29,054 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,054 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,056 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-15 15:06:29,056 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,056 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,056 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,057 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 15:06:29,057 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,057 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:06:29,057 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,057 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,057 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,059 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:06:29,059 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,059 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,060 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,060 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-15 15:06:29,060 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,060 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:06:29,060 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,060 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,060 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,061 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:06:29,061 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,061 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,061 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,061 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 15:06:29,061 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,061 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-15 15:06:29,061 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,064 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:06:29,064 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:06:29,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,068 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:06:29,068 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,068 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,068 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,068 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:06:29,068 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,068 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,068 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,069 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:06:29,070 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,070 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,070 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,070 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:06:29,070 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,070 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,070 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,071 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:06:29,071 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,071 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,071 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,071 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:06:29,071 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,071 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,071 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,074 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:06:29,074 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,074 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,074 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,074 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-15 15:06:29,075 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,075 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-15 15:06:29,075 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:29,075 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:06:29,075 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:29,075 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:29 +08:00

2018-05-15 15:06:32,635 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,636 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-15 15:06:32,636 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,636 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-15 15:06:32,636 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,640 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 15:06:32,640 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,640 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,641 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,641 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-15 15:06:32,641 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,641 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,643 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:06:32,643 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,643 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,643 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,644 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-15 15:06:32,644 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,644 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:06:32,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-15 15:06:32,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:06:32,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:06:32,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Journal01] AS [Journal01], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Journal01] AS [Journal01], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Journal01] AS [Journal01], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/15 15:06:32 +08:00

2018-05-15 15:06:32,648 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
